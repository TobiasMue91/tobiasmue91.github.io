<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽµ</text></svg>">
    <title>Simon Says - Memory Game | Test Your Pattern Recognition Skills</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
    <meta name="description"
          content="Challenge your memory with Simon Says! Follow the musical light sequence and test your pattern recognition skills in this classic memory game.">
    <meta charset="UTF-8">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: #1a1a2e;
            color: #e8e8e8;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 20px
        }

        .container {
            max-width: 600px;
            width: 100%;
            text-align: center
        }

        header {
            margin-bottom: 40px
        }

        h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 700;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0, 0, 0, .3)
        }

        .subtitle {
            font-size: clamp(.9rem, 2vw, 1.1rem);
            color: #a8a8b8;
            font-weight: 400
        }

        .game-card {
            background: #252541;
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, .4)
        }

        .info-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            gap: 15px
        }

        .info-item {
            background: #1a1a2e;
            padding: 15px 20px;
            border-radius: 12px;
            flex: 1;
            min-width: 0
        }

        .info-label {
            font-size: .75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #7f7f8f;
            margin-bottom: 5px;
            font-weight: 600
        }

        .info-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #fff
        }

        .info-value.level {
            color: #00b894
        }

        .info-value.high-score {
            color: #fdcb6e
        }

        .status {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            transition: all .3s ease
        }

        .status.watching {
            color: #74b9ff
        }

        .status.playing {
            color: #00b894
        }

        .status.game-over {
            color: #d63031
        }

        .board {
            display: grid;
            grid-template-columns:repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px
        }

        .square {
            aspect-ratio: 1;
            border-radius: 20px;
            cursor: pointer;
            transition: all .2s ease;
            border: 4px solid transparent;
            opacity: .4
        }

        .square.disabled {
            cursor: not-allowed
        }

        .square.green {
            background: #00b894
        }

        .square.red {
            background: #d63031
        }

        .square.yellow {
            background: #fdcb6e
        }

        .square.blue {
            background: #0984e3
        }

        .square.active {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: 0 0 30px currentColor
        }

        .square.wrong {
            animation: shake .4s ease;
            border-color: #ff4757
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0)
            }
            25% {
                transform: translateX(-10px)
            }
            75% {
                transform: translateX(10px)
            }
        }

        .btn {
            background: #00b894;
            color: #fff;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all .2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(0, 184, 148, .3)
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 184, 148, .4)
        }

        .btn:active:not(:disabled) {
            transform: translateY(0)
        }

        .btn:disabled {
            opacity: .5;
            cursor: not-allowed
        }

        .btn.restart {
            background: #d63031;
            box-shadow: 0 4px 15px rgba(214, 48, 49, .3)
        }

        .btn.restart:hover:not(:disabled) {
            box-shadow: 0 6px 20px rgba(214, 48, 49, .4)
        }

        @media (max-width: 500px) {
            .game-card {
                padding: 25px 20px
            }

            .info-bar {
                flex-direction: column;
                gap: 10px
            }

            .board {
                gap: 15px
            }

            .square {
                border-radius: 15px
            }
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>Simon Says</h1>
        <p class="subtitle">Watch, remember, and repeat the sequence!</p>
    </header>
    <div class="game-card">
        <div class="info-bar">
            <div class="info-item">
                <div class="info-label">Level</div>
                <div class="info-value level" id="level">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Score</div>
                <div class="info-value" id="score">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Best</div>
                <div class="info-value high-score" id="highScore">0</div>
            </div>
        </div>
        <div class="status" id="status">Press Start to Begin</div>
        <div class="board" id="board">
            <div class="square green" data-color="green" data-freq="329.63"></div>
            <div class="square red" data-color="red" data-freq="261.63"></div>
            <div class="square yellow" data-color="yellow" data-freq="392.00"></div>
            <div class="square blue" data-color="blue" data-freq="440.00"></div>
        </div>
        <button class="btn" id="startBtn">Start Game</button>
    </div>
</div>
<script>
    const STATES = {IDLE: 'idle', SHOWING: 'showing', PLAYING: 'playing', GAME_OVER: 'gameOver'};

    class SimonGame {
        constructor() {
            this.audioCtx = null;
            this.squares = document.querySelectorAll('.square');
            this.startBtn = document.getElementById('startBtn');
            this.statusEl = document.getElementById('status');
            this.levelEl = document.getElementById('level');
            this.scoreEl = document.getElementById('score');
            this.highScoreEl = document.getElementById('highScore');
            this.sequence = [];
            this.playerSequence = [];
            this.level = 0;
            this.score = 0;
            this.highScore = parseInt(localStorage.getItem('simonHighScore')) || 0;
            this.state = STATES.IDLE;
            this.baseSpeed = 1000;
            this.init();
        }

        init() {
            this.highScoreEl.textContent = this.highScore;
            this.startBtn.addEventListener('click', () => this.start());
            this.squares.forEach(sq => sq.addEventListener('click', e => this.handleClick(e)));
        }

        start() {
            if (!this.audioCtx) this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            this.sequence = [];
            this.playerSequence = [];
            this.level = 0;
            this.score = 0;
            this.state = STATES.IDLE;
            this.updateDisplay();
            this.startBtn.disabled = true;
            this.nextRound();
        }

        nextRound() {
            this.level++;
            this.playerSequence = [];
            const randomSquare = this.squares[Math.floor(Math.random() * 4)];
            this.sequence.push(randomSquare);
            this.updateDisplay();
            this.state = STATES.SHOWING;
            this.statusEl.textContent = 'Watch the sequence...';
            this.statusEl.className = 'status watching';
            setTimeout(() => this.playSequence(), 800);
        }

        async playSequence() {
            this.squares.forEach(sq => sq.classList.add('disabled'));
            const speed = Math.max(this.baseSpeed - this.level * 50, 300);
            for (let i = 0; i < this.sequence.length; i++) {
                await this.wait(speed);
                await this.flashSquare(this.sequence[i]);
            }
            this.squares.forEach(sq => sq.classList.remove('disabled'));
            this.state = STATES.PLAYING;
            this.statusEl.textContent = 'Your turn!';
            this.statusEl.className = 'status playing';
        }

        async flashSquare(square) {
            square.classList.add('active');
            this.playTone(parseFloat(square.dataset.freq));
            await this.wait(400);
            square.classList.remove('active');
        }

        handleClick(e) {
            if (this.state !== STATES.PLAYING) return;
            const square = e.currentTarget;
            square.classList.add('active');
            this.playTone(parseFloat(square.dataset.freq));
            setTimeout(() => square.classList.remove('active'), 200);
            this.playerSequence.push(square);
            const currentIndex = this.playerSequence.length - 1;
            if (square !== this.sequence[currentIndex]) {
                this.gameOver(square);
                return;
            }
            if (this.playerSequence.length === this.sequence.length) {
                this.score++;
                this.updateDisplay();
                this.state = STATES.IDLE;
                this.statusEl.textContent = 'Correct! Get ready...';
                this.statusEl.className = 'status';
                setTimeout(() => this.nextRound(), 1200);
            }
        }

        gameOver(square) {
            this.state = STATES.GAME_OVER;
            square.classList.add('wrong');
            this.playErrorSound();
            setTimeout(() => square.classList.remove('wrong'), 400);
            if (this.score > this.highScore) {
                this.highScore = this.score;
                localStorage.setItem('simonHighScore', this.highScore);
                this.highScoreEl.textContent = this.highScore;
                this.statusEl.textContent = `New High Score: ${this.score}!`;
            } else {
                this.statusEl.textContent = `Game Over! Score: ${this.score}`;
            }
            this.statusEl.className = 'status game-over';
            this.startBtn.textContent = 'Play Again';
            this.startBtn.className = 'btn restart';
            this.startBtn.disabled = false;
            setTimeout(() => {
                this.startBtn.textContent = 'Start Game';
                this.startBtn.className = 'btn';
            }, 3000);
        }

        playTone(freq) {
            if (!this.audioCtx) return;
            const osc = this.audioCtx.createOscillator();
            const gain = this.audioCtx.createGain();
            osc.connect(gain);
            gain.connect(this.audioCtx.destination);
            osc.frequency.value = freq;
            osc.type = 'sine';
            gain.gain.setValueAtTime(0, this.audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(.3, this.audioCtx.currentTime + .01);
            gain.gain.exponentialRampToValueAtTime(.01, this.audioCtx.currentTime + .3);
            osc.start(this.audioCtx.currentTime);
            osc.stop(this.audioCtx.currentTime + .3);
        }

        playErrorSound() {
            if (!this.audioCtx) return;
            const osc = this.audioCtx.createOscillator();
            const gain = this.audioCtx.createGain();
            osc.connect(gain);
            gain.connect(this.audioCtx.destination);
            osc.frequency.setValueAtTime(200, this.audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(100, this.audioCtx.currentTime + .3);
            osc.type = 'sawtooth';
            gain.gain.setValueAtTime(.3, this.audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(.01, this.audioCtx.currentTime + .3);
            osc.start(this.audioCtx.currentTime);
            osc.stop(this.audioCtx.currentTime + .3);
        }

        updateDisplay() {
            this.levelEl.textContent = this.level;
            this.scoreEl.textContent = this.score;
        }

        wait(ms) {
            return new Promise(resolve => setTimeout(resolve, ms))
        }
    }

    new SimonGame();
</script>
<script src="../logo.js"></script>
</body>
</html>