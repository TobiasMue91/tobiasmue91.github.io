// SYNONYM MATCHING - ENHANCED
$(function(){
if(!window.HB){console.error('HB utilities not loaded');return;}
const words=[{word:'happy',synonym:'joyful'},{word:'big',synonym:'large'},{word:'fast',synonym:'rapid'},{word:'angry',synonym:'furious'},{word:'sad',synonym:'sorrowful'},{word:'beautiful',synonym:'stunning'},{word:'smart',synonym:'intelligent'},{word:'brave',synonym:'courageous'},{word:'quiet',synonym:'silent'},{word:'loud',synonym:'noisy'},{word:'scared',synonym:'frightened'},{word:'funny',synonym:'hilarious'},{word:'hungry',synonym:'famished'},{word:'tired',synonym:'exhausted'},{word:'cold',synonym:'frigid'},{word:'hot',synonym:'scorching'},{word:'nice',synonym:'pleasant'},{word:'mean',synonym:'cruel'},{word:'important',synonym:'crucial'},{word:'interesting',synonym:'fascinating'},{word:'boring',synonym:'dull'},{word:'good',synonym:'excellent'},{word:'bad',synonym:'terrible'},{word:'clean',synonym:'spotless'},{word:'dirty',synonym:'filthy'},{word:'strong',synonym:'powerful'},{word:'weak',synonym:'feeble'},{word:'rich',synonym:'wealthy'},{word:'poor',synonym:'destitute'},{word:'famous',synonym:'renowned'}];
const game={score:0,lives:3,timer:30,interval:null,currentWord:null,bestScore:null};
const els={start:$('#sm-start'),gameArea:$('#sm-game-area'),word:$('#sm-word'),options:$('#sm-options'),scoreDisplay:$('#sm-score'),livesDisplay:$('#sm-lives'),bestDisplay:$('#sm-best'),timerDisplay:$('#sm-timer')};
const loadBest=()=>{const scores=JSON.parse(localStorage.getItem('humanBenchmarkScores'))||{};game.bestScore=scores['Synonym Matching'];if(game.bestScore)els.bestDisplay.text(game.bestScore);};
const updateUI=()=>{els.scoreDisplay.text(game.score);els.livesDisplay.text(game.lives);els.timerDisplay.text(game.timer+'s');};
const showWord=()=>{game.currentWord=words[Math.floor(Math.random()*words.length)];els.word.text(game.currentWord.word);const options=[game.currentWord.synonym];while(options.length<4){const randomSyn=words[Math.floor(Math.random()*words.length)].synonym;if(!options.includes(randomSyn))options.push(randomSyn);}const shuffled=HB.shuffleArray(options);els.options.empty();shuffled.forEach(opt=>{const btn=$(`<button class="btn-game">${opt}</button>`);btn.on('click',()=>checkAnswer(opt));els.options.append(btn);});};
const checkAnswer=(answer)=>{if(answer===game.currentWord.synonym){game.score++;updateUI();HB.playSound('success');if(game.score%5===0)HB.showToast(`${game.score} correct! ðŸ“–`,1500,'success');showWord();}else{game.lives--;updateUI();HB.playSound('fail');if(game.lives<=0)gameOver();else{HB.showToast(`Wrong! ${game.lives} lives left`,1500,'error');showWord();}}};
const gameOver=()=>{if(game.interval)clearInterval(game.interval);const isNewRecord=saveScore('Synonym Matching',game.score);if(isNewRecord)game.bestScore=game.score;HB.showModal({title:isNewRecord?'ðŸŽ‰ New Personal Best!':'Game Over',message:`You matched <strong>${game.score}</strong> synonyms correctly!${game.score>=15?'<br>ðŸ† Vocabulary master!':''}`,score:`${game.score} correct`,isNewRecord,onRetry:reset,onHome:HB.goHome,icon:'ðŸ“š'});};
const reset=()=>{game.score=0;game.lives=3;game.timer=30;if(game.interval)clearInterval(game.interval);game.currentWord=null;els.start.show();els.gameArea.addClass('hidden');updateUI();loadBest();};
const start=()=>{els.start.hide();els.gameArea.removeClass('hidden');showWord();game.interval=setInterval(()=>{game.timer--;updateUI();if(game.timer<=0)gameOver();},1000);};
els.start.on('click',start);
loadBest();updateUI();
});
