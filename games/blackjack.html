<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="Play blackjack online for free. Learn the rules, hit or stand to beat the dealer, and win big.">
    <meta name="keywords" content="blackjack, card game, online game, casino game">
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>♠️</text></svg>">
    <title>Blackjack Royal</title>
    <style>:root {
        --table-color: #0d5f2b;
        --table-border: #7a4e26;
        --card-color: #fff;
        --text-color: #fff;
        --btn-color: #222;
        --btn-hover: #444;
        --btn-active: #111;
        --primary-btn: #2c3e50;
        --primary-btn-hover: #34495e;
        --accent-btn: #e67e22;
        --accent-btn-hover: #d35400;
        --chip-red: #e23941;
        --chip-blue: #2b5fff;
        --chip-green: #25a926;
        --chip-black: #333;
        --highlight-color: #f5d76a;
        --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0
    }

    body {
        background: #121212 url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h20v20H0V0zm10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm20 0a7 7 0 1 0 0-14 7 7 0 0 0 0 14zM10 37a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm10-17h20v20H20V20zm10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14z' fill='%23222222' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E");
        color: var(--text-color);
        font-family: var(--font-main);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center
    }

    .game-container {
        width: 100%;
        max-width: 960px;
        margin: 0 auto;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 1rem
    }

    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: .5rem 1rem;
        background: rgba(0, 0, 0, 0.8);
        border-radius: 8px;
        border: 2px solid var(--table-border);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5)
    }

    h1 {
        font-size: 2.5rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6), 0 0 10px rgba(255, 215, 0, 0.6);
        font-weight: 700;
        letter-spacing: 1px;
        background: linear-gradient(to bottom, #fff 20%, #f5d76a 50%, #f0c14b 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin: 0
    }

    .table {
        background: var(--table-color);
        border-radius: 16px;
        border: 12px solid var(--table-border);
        box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.4), 0 10px 20px rgba(0, 0, 0, 0.4);
        display: flex;
        flex-direction: column;
        min-height: 500px;
        position: relative;
        padding: 1rem;
        gap: 2rem
    }

    .table::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        border-radius: 4px;
        z-index: 0
    }

    .hand-section {
        z-index: 1;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: .5rem
    }

    .hand-label {
        display: flex;
        justify-content: space-between;
        width: 100%;
        max-width: 300px;
        font-size: 1.25rem;
        font-weight: 500;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7)
    }

    .hand {
        min-height: 150px;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 5px
    }

    .card {
        width: 90px;
        height: 130px;
        position: relative;
        transform-style: preserve-3d;
        transition: all .3s ease;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
        border-radius: 8px;
        background-color: var(--card-color);
        margin-top: -40px;
        animation: dealCard .5s forwards
    }

    @keyframes dealCard {
        0% {
            transform: translateY(-50px) rotate(5deg);
            opacity: 0
        }
        100% {
            transform: translateY(0) rotate(0deg);
            opacity: 1
        }
    }

    .card-back, .card-front {
        width: 100%;
        height: 100%;
        position: absolute;
        backface-visibility: hidden;
        border-radius: 8px;
        overflow: hidden
    }

    .card-front {
        display: flex;
        flex-direction: column;
        padding: 5px;
        justify-content: space-between;
        background: #fff;
        border: 1px solid #ddd
    }

    .card-back {
        transform: rotateY(180deg);
        background: linear-gradient(135deg, #3498db, #1c6fa5);
        display: flex;
        align-items: center;
        justify-content: center;
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.2'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        border: 5px solid #fff
    }

    .card.flipped {
        transform: rotateY(180deg)
    }

    .card-value {
        font-size: 1.5rem;
        font-weight: bold
    }

    .card-suit {
        font-size: 2rem;
        line-height: 1;
        align-self: center
    }

    .control-panel {
        background: rgba(20, 30, 40, 0.9);
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 1rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden
    }

    .control-panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(to right, var(--highlight-color), transparent)
    }

    .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
        padding-bottom: .5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1)
    }

    .panel-title {
        font-size: 1.2rem;
        font-weight: 600;
        letter-spacing: 1px;
        color: var(--highlight-color)
    }

    .panel-stats {
        display: flex;
        gap: 1rem;
        font-size: .9rem
    }

    .streak {
        color: var(--highlight-color);
        font-weight: bold
    }

    .bank-display {
        display: flex;
        gap: 2rem;
        align-items: center;
        padding: .75rem;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.05)
    }

    .bank-info, .bet-info {
        display: flex;
        flex-direction: column;
        align-items: center
    }

    .bank-label, .bet-label {
        font-size: .9rem;
        opacity: .8;
        text-transform: uppercase;
        letter-spacing: 1px
    }

    .bank-amount, .bet-amount {
        font-weight: bold;
        font-size: 1.8rem;
        margin-top: .25rem
    }

    .bet-amount {
        color: var(--highlight-color);
        text-shadow: 0 0 5px rgba(245, 215, 106, 0.5)
    }

    .action-area {
        display: flex;
        flex-direction: column;
        gap: 1rem
    }

    .betting-actions, .game-actions {
        display: flex;
        flex-wrap: wrap;
        gap: .5rem;
        justify-content: center;
        transition: opacity .3s ease;
        align-items: center;
    }

    .betting-buttons {
        margin-left: .5rem;
    }

    .chips {
        display: flex;
        gap: .75rem;
        justify-content: center;
        margin: .5rem 0
    }

    .chip {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 1.1rem;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        border: 4px dashed rgba(255, 255, 255, 0.5);
        transition: all .2s;
        user-select: none
    }

    .chip:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4)
    }

    .chip:active {
        transform: translateY(1px) scale(0.98)
    }

    .chip-5 {
        background: var(--chip-red)
    }

    .chip-10 {
        background: var(--chip-blue)
    }

    .chip-25 {
        background: var(--chip-green)
    }

    .chip-100 {
        background: var(--chip-black)
    }

    .chip-animation {
        animation: chipAdded .5s ease
    }

    @keyframes chipAdded {
        0% {
            transform: scale(1)
        }
        50% {
            transform: scale(1.2)
        }
        100% {
            transform: scale(1)
        }
    }

    button {
        background: var(--btn-color);
        color: #fff;
        border: none;
        padding: .75rem 1.25rem;
        border-radius: 4px;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all .2s;
        min-width: 100px;
        text-transform: uppercase;
        letter-spacing: 1px;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2)
    }

    button:hover:not(:disabled) {
        background: var(--btn-hover);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3)
    }

    button:active:not(:disabled) {
        background: var(--btn-active);
        transform: translateY(1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2)
    }

    button:disabled {
        opacity: .5;
        cursor: not-allowed
    }

    button.primary {
        background: var(--primary-btn);
        min-width: 140px
    }

    button.primary:hover:not(:disabled) {
        background: var(--primary-btn-hover)
    }

    button.accent {
        background: var(--accent-btn);
        min-width: 140px
    }

    button.accent:hover:not(:disabled) {
        background: var(--accent-btn-hover)
    }

    .hidden {
        display: none
    }

    .message {
        background: rgba(0, 0, 0, 0.7);
        padding: .75rem 1.5rem;
        border-radius: 8px;
        text-align: center;
        font-size: 1.25rem;
        font-weight: 500;
        min-height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 1rem 0;
        transition: all .3s;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5)
    }

    .win {
        background: rgba(39, 174, 96, 0.8);
        animation: pulse 1s ease infinite
    }

    .lose {
        background: rgba(231, 76, 60, 0.8)
    }

    .push {
        background: rgba(52, 152, 219, 0.8)
    }

    @keyframes pulse {
        0% {
            transform: scale(1)
        }
        50% {
            transform: scale(1.02)
        }
        100% {
            transform: scale(1)
        }
    }

    .stats {
        display: flex;
        justify-content: space-around;
        background: rgba(0, 0, 0, 0.7);
        border-radius: 8px;
        padding: .75rem 1.5rem;
        font-size: 1rem;
        margin-top: 1rem
    }

    .stat {
        display: flex;
        flex-direction: column;
        align-items: center
    }

    .stat-value {
        font-size: 1.5rem;
        font-weight: 700;
        margin-top: .25rem
    }

    .advice {
        font-style: italic;
        opacity: .8;
        font-size: .9rem;
        margin-top: .5rem
    }

    .keyboard-shortcuts {
        background: rgba(0, 0, 0, 0.6);
        border-radius: 4px;
        padding: .5rem;
        margin-top: .5rem;
        font-size: .8rem;
        text-align: center
    }

    .shortcuts-key {
        display: inline-block;
        background: #333;
        border-radius: 3px;
        padding: 2px 6px;
        margin: 0 3px;
        font-weight: bold
    }

    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 100;
        justify-content: center;
        align-items: center
    }

    .modal-content {
        background: #2c3e50;
        border-radius: 8px;
        padding: 2rem;
        max-width: 600px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        border: 2px solid var(--table-border)
    }

    .close-modal {
        position: absolute;
        top: 1rem;
        right: 1rem;
        font-size: 1.5rem;
        cursor: pointer
    }

    .modal h2 {
        margin-bottom: 1rem;
        color: #f5d76a;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        padding-bottom: .5rem
    }

    .modal p {
        margin-bottom: 1rem;
        line-height: 1.6
    }

    .header-buttons {
        display: flex;
        gap: .5rem
    }

    .header-button {
        padding: .5rem 1rem;
        min-width: auto;
        font-size: .9rem
    }

    .footer {
        display: flex;
        justify-content: center;
        margin-top: 1rem;
        gap: 1rem;
        padding: 1rem;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 8px
    }

    @media (max-width: 768px) {
        .game-container {
            padding: .5rem
        }

        h1 {
            font-size: 1.75rem
        }

        .card {
            width: 70px;
            height: 105px
        }

        .card-value {
            font-size: 1.25rem
        }

        .card-suit {
            font-size: 1.5rem
        }

        .chip {
            width: 50px;
            height: 50px;
            font-size: .9rem
        }

        .bank-display {
            flex-direction: column;
            gap: .5rem;
            align-items: stretch
        }

        .bank-info, .bet-info {
            flex-direction: row;
            justify-content: space-between
        }

        .bank-amount, .bet-amount {
            font-size: 1.4rem
        }

        button {
            padding: .6rem 1rem;
            font-size: .9rem;
            min-width: 80px
        }
    }

    @media (max-width: 480px) {
        h1 {
            font-size: 1.5rem
        }

        .card {
            width: 60px;
            height: 90px
        }

        .hand {
            min-height: 120px
        }

        .chip {
            width: 40px;
            height: 40px;
            font-size: .8rem
        }

        .message {
            font-size: 1rem;
            padding: .5rem 1rem
        }

        .action-area {
            flex-direction: column
        }

        .betting-actions, .game-actions {
            justify-content: center
        }

        .panel-header {
            flex-direction: column;
            gap: .5rem;
            align-items: flex-start
        }

        .chips {
            gap: .5rem
        }
    }</style>
</head>
<body>
<div class="game-container">
    <header><h1>Blackjack Royal</h1>
        <div class="header-buttons">
            <button id="rulesBtn" class="header-button">Rules</button>
            <button id="newGameBtn" class="header-button">New Game</button>
        </div>
    </header>
    <div class="control-panel">
        <div class="panel-header">
            <div>
                <div class="panel-title">Game Controls</div>
                <div class="panel-stats">Current streak: <span class="streak">0</span> | Hands played: <span
                        class="hands-played">0</span></div>
            </div>
            <div class="bank-display">
                <div class="bank-info"><span class="bank-label">Bank</span><span class="bank-amount">1000</span></div>
                <div class="bet-info"><span class="bet-label">Current Bet</span><span class="bet-amount">0</span></div>
            </div>
        </div>
        <div class="action-area">
            <div class="betting-actions">
                <div class="chips">
                    <div class="chip chip-5" data-value="5">5</div>
                    <div class="chip chip-10" data-value="10">10</div>
                    <div class="chip chip-25" data-value="25">25</div>
                    <div class="chip chip-100" data-value="100">100</div>
                </div>
                <div class="betting-buttons">
                    <button id="clearBetBtn" disabled>Clear Bet</button>
                    <button id="dealBtn" class="accent" disabled>Deal Cards</button>
                </div>
            </div>
            <div class="game-actions hidden">
                <button id="hitBtn" class="primary">Hit</button>
                <button id="standBtn" class="primary">Stand</button>
                <button id="doubleBtn">Double</button>
            </div>
        </div>
        <div class="advice"></div>
        <div class="keyboard-shortcuts hidden">Keyboard shortcuts: <span class="shortcuts-key">H</span> Hit | <span
                class="shortcuts-key">S</span> Stand | <span class="shortcuts-key">D</span> Double
        </div>
    </div>
    <div class="message"></div>
    <div class="table">
        <div class="hand-section">
            <div class="hand-label"><span>Dealer</span><span class="dealer-score">0</span></div>
            <div class="dealer-hand hand"></div>
        </div>
        <div class="hand-section">
            <div class="hand-label"><span>Player</span><span class="player-score">0</span></div>
            <div class="player-hand hand"></div>
        </div>
    </div>
    <div class="stats">
        <div class="stat">
            <div class="stat-label">Wins</div>
            <div class="stat-value wins">0</div>
        </div>
        <div class="stat">
            <div class="stat-label">Losses</div>
            <div class="stat-value losses">0</div>
        </div>
        <div class="stat">
            <div class="stat-label">Pushes</div>
            <div class="stat-value pushes">0</div>
        </div>
        <div class="stat">
            <div class="stat-label">Blackjacks</div>
            <div class="stat-value blackjacks">0</div>
        </div>
    </div>
    <div class="footer">
        <button id="resetStatsBtn">Reset Stats</button>
    </div>
</div>
<div id="rulesModal" class="modal">
    <div class="modal-content"><span class="close-modal">&times;</span>
        <h2>Blackjack Rules</h2>
        <p>The goal of blackjack is to beat the dealer's hand without going over 21.</p>
        <p><strong>Card Values:</strong></p>
        <ul>
            <li>Face cards (Jack, Queen, King) are worth 10 points</li>
            <li>Aces are worth 1 or 11 points, whichever is more favorable</li>
            <li>All other cards are worth their face value</li>
        </ul>
        <p><strong>How to Play:</strong></p>
        <ol>
            <li>Place a bet by clicking on chips</li>
            <li>Click "Deal Cards" to start the game</li>
            <li>Choose to "Hit" for another card or "Stand" to keep your current hand</li>
            <li>"Double" allows you to double your bet and receive exactly one more card</li>
        </ol>
        <p>The dealer must hit until their hand value is 17 or higher.</p>
        <p>Blackjack (an Ace and a 10-value card) pays 3:2.</p>
        <p><strong>Keyboard Shortcuts:</strong></p>
        <ul>
            <li><strong>H</strong> - Hit</li>
            <li><strong>S</strong> - Stand</li>
            <li><strong>D</strong> - Double</li>
        </ul>
    </div>
</div>
<script>
    const suits = ['♥', '♦', '♣', '♠'];
    const suitColors = {'♥': 'red', '♦': 'red', '♣': 'black', '♠': 'black'};
    const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
    let deck = [];
    let playerHand = [];
    let dealerHand = [];
    let dealerScore = 0;
    let playerScore = 0;
    let currentBet = 0;
    let bankAmount = 1000;
    let gameInProgress = false;
    let stats = {wins: 0, losses: 0, pushes: 0, blackjacks: 0, handsPlayed: 0};
    let currentStreak = 0;
    const dealerHandEl = document.querySelector('.dealer-hand');
    const playerHandEl = document.querySelector('.player-hand');
    const dealerScoreEl = document.querySelector('.dealer-score');
    const playerScoreEl = document.querySelector('.player-score');
    const messageEl = document.querySelector('.message');
    const bankAmountEl = document.querySelector('.bank-amount');
    const betAmountEl = document.querySelector('.bet-amount');
    const adviceEl = document.querySelector('.advice');
    const bettingActions = document.querySelector('.betting-actions');
    const gameActions = document.querySelector('.game-actions');
    const keyboardShortcuts = document.querySelector('.keyboard-shortcuts');
    const streakEl = document.querySelector('.streak');
    const handsPlayedEl = document.querySelector('.hands-played');
    const statElements = {
        wins: document.querySelector('.wins'),
        losses: document.querySelector('.losses'),
        pushes: document.querySelector('.pushes'),
        blackjacks: document.querySelector('.blackjacks')
    };
    const dealBtn = document.getElementById('dealBtn');
    const hitBtn = document.getElementById('hitBtn');
    const standBtn = document.getElementById('standBtn');
    const doubleBtn = document.getElementById('doubleBtn');
    const clearBetBtn = document.getElementById('clearBetBtn');
    const rulesBtn = document.getElementById('rulesBtn');
    const newGameBtn = document.getElementById('newGameBtn');
    const resetStatsBtn = document.getElementById('resetStatsBtn');
    const chips = document.querySelectorAll('.chip');
    const rulesModal = document.getElementById('rulesModal');
    const closeButtons = document.querySelectorAll('.close-modal');

    function createDeck() {
        const deck = [];
        for (let suit of suits) {
            for (let value of values) {
                deck.push({value, suit})
            }
        }
        return deck
    }

    function shuffleDeck(deck) {
        for (let i = deck.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [deck[i], deck[j]] = [deck[j], deck[i]]
        }
        return deck
    }

    function drawCard() {
        return deck.pop()
    }

    function createCardElement(card, faceDown = false) {
        const cardEl = document.createElement('div');
        cardEl.className = 'card' + (faceDown ? ' flipped' : '');
        const frontEl = document.createElement('div');
        frontEl.className = 'card-front';
        frontEl.style.color = suitColors[card.suit];
        const topValue = document.createElement('div');
        topValue.className = 'card-value';
        topValue.textContent = card.value;
        const suitEl = document.createElement('div');
        suitEl.className = 'card-suit';
        suitEl.textContent = card.suit;
        const bottomValue = document.createElement('div');
        bottomValue.className = 'card-value';
        bottomValue.textContent = card.value;
        bottomValue.style.transform = 'rotate(180deg)';
        frontEl.appendChild(topValue);
        frontEl.appendChild(suitEl);
        frontEl.appendChild(bottomValue);
        const backEl = document.createElement('div');
        backEl.className = 'card-back';
        cardEl.appendChild(frontEl);
        cardEl.appendChild(backEl);
        return cardEl
    }

    function calculateHandValue(hand) {
        let value = 0;
        let aces = 0;
        for (let card of hand) {
            if (card.value === 'A') {
                aces++;
                value += 11
            } else if (['K', 'Q', 'J'].includes(card.value)) {
                value += 10
            } else {
                value += parseInt(card.value)
            }
        }
        while (value > 21 && aces > 0) {
            value -= 10;
            aces--
        }
        return value
    }

    function updateScores() {
        playerScore = calculateHandValue(playerHand);
        dealerScore = calculateHandValue(dealerHand);
        playerScoreEl.textContent = playerScore;
        dealerScoreEl.textContent = dealerHand[0].hidden ? '?' : dealerScore
    }

    function updateStats() {
        for (const [key, el] of Object.entries(statElements)) {
            el.textContent = stats[key]
        }
        handsPlayedEl.textContent = stats.handsPlayed;
        streakEl.textContent = currentStreak
    }

    function updateBankDisplay() {
        bankAmountEl.textContent = bankAmount;
        betAmountEl.textContent = currentBet
    }

    function showMessage(text, type = '') {
        messageEl.textContent = text;
        messageEl.className = 'message ' + type
    }

    function resetMessage() {
        messageEl.textContent = '';
        messageEl.className = 'message'
    }

    function showAdvice(text) {
        adviceEl.textContent = text;
        adviceEl.style.opacity = 1;
        setTimeout(() => {
            adviceEl.style.opacity = 0
        }, 5000)
    }

    function toggleGameUI(inGame) {
        if (inGame) {
            bettingActions.classList.add('hidden');
            gameActions.classList.remove('hidden');
            keyboardShortcuts.classList.remove('hidden')
        } else {
            bettingActions.classList.remove('hidden');
            gameActions.classList.add('hidden');
            keyboardShortcuts.classList.add('hidden')
        }
    }

    function toggleGameButtons(enabled) {
        hitBtn.disabled = !enabled;
        standBtn.disabled = !enabled;
        doubleBtn.disabled = !enabled || playerHand.length > 2 || currentBet > bankAmount
    }

    function toggleBetButtons(enabled) {
        clearBetBtn.disabled = !enabled || currentBet === 0;
        chips.forEach(chip => chip.style.opacity = enabled ? 1 : 0.5);
        dealBtn.disabled = !enabled || currentBet === 0
    }

    function startGame() {
        if (currentBet === 0) {
            showMessage('Please place a bet first');
            return
        }
        resetMessage();
        gameInProgress = true;
        stats.handsPlayed++;
        updateStats();
        playerHand = [];
        dealerHand = [];
        dealerHandEl.innerHTML = '';
        playerHandEl.innerHTML = '';
        deck = shuffleDeck(createDeck());
        toggleGameUI(true);
        dealInitialCards();
        checkForBlackjack()
    }

    function dealInitialCards() {
        setTimeout(() => {
            playerHand.push(drawCard());
            const cardEl = createCardElement(playerHand[0]);
            playerHandEl.appendChild(cardEl)
        }, 300);
        setTimeout(() => {
            const card = drawCard();
            dealerHand.push(card);
            const cardEl = createCardElement(dealerHand[0]);
            dealerHandEl.appendChild(cardEl)
        }, 600);
        setTimeout(() => {
            playerHand.push(drawCard());
            const cardEl = createCardElement(playerHand[1]);
            playerHandEl.appendChild(cardEl)
        }, 900);
        setTimeout(() => {
            const card = drawCard();
            card.hidden = true;
            dealerHand.push(card);
            const cardEl = createCardElement(dealerHand[1], true);
            dealerHandEl.appendChild(cardEl);
            updateScores();
            toggleGameButtons(true);
            const advice = getStrategyAdvice(playerScore, dealerHand[0].value);
            if (advice) {
                showAdvice(advice)
            }
        }, 1200)
    }

    function getStrategyAdvice(playerScore, dealerUpCard) {
        let advice = '';
        const dealerValue = ['K', 'Q', 'J'].includes(dealerUpCard) ? '10' : dealerUpCard;
        if (playerScore >= 17) {
            advice = 'Basic strategy: Stand on 17 or higher.'
        } else if (playerScore >= 13 && dealerValue >= '2' && dealerValue <= '6') {
            advice = 'Basic strategy: Stand against dealer 2-6 with 13 or higher.'
        } else if (playerScore >= 12 && dealerValue >= '4' && dealerValue <= '6') {
            advice = 'Basic strategy: Stand on 12 against dealer 4-6.'
        } else if (playerScore <= 11) {
            advice = 'Basic strategy: Always hit on 11 or less.'
        } else if (playerScore <= 16 && (dealerValue >= '7' || dealerValue === 'A')) {
            advice = 'Basic strategy: Hit on 16 or less against dealer 7-A.'
        }
        return advice
    }

    function checkForBlackjack() {
        setTimeout(() => {
            const playerValue = calculateHandValue(playerHand);
            if (playerValue === 21) {
                const dealerCard = dealerHandEl.querySelectorAll('.card')[1];
                dealerCard.classList.remove('flipped');
                dealerHand[1].hidden = false;
                const dealerValue = calculateHandValue(dealerHand);
                updateScores();
                if (dealerValue === 21) {
                    showMessage('Both have Blackjack! Push.', 'push');
                    bankAmount += currentBet;
                    stats.pushes++;
                    currentStreak = 0
                } else {
                    showMessage('Blackjack! You win!', 'win');
                    bankAmount += currentBet * 2.5;
                    stats.blackjacks++;
                    stats.wins++;
                    currentStreak++
                }
                gameOver();
            } else {
                gameInProgress = true
            }
        }, 1500)
    }

    function hit() {
        if (!gameInProgress) return;
        doubleBtn.disabled = true;
        const card = drawCard();
        playerHand.push(card);
        const cardEl = createCardElement(card);
        playerHandEl.appendChild(cardEl);
        updateScores();
        if (playerScore > 21) {
            showMessage('Bust! You lose.', 'lose');
            stats.losses++;
            currentStreak = 0;
            const dealerCard = dealerHandEl.querySelectorAll('.card')[1];
            dealerCard.classList.remove('flipped');
            dealerHand[1].hidden = false;
            updateScores();
            gameOver()
        }
    }

    function stand() {
        if (!gameInProgress) return;
        const dealerCard = dealerHandEl.querySelectorAll('.card')[1];
        dealerCard.classList.remove('flipped');
        dealerHand[1].hidden = false;
        updateScores();
        dealerPlay()
    }

    function double() {
        if (!gameInProgress || playerHand.length !== 2 || bankAmount < currentBet) return;
        bankAmount -= currentBet;
        currentBet *= 2;
        updateBankDisplay();
        const card = drawCard();
        playerHand.push(card);
        const cardEl = createCardElement(card);
        playerHandEl.appendChild(cardEl);
        updateScores();
        if (playerScore > 21) {
            showMessage('Bust! You lose.', 'lose');
            stats.losses++;
            currentStreak = 0;
            const dealerCard = dealerHandEl.querySelectorAll('.card')[1];
            dealerCard.classList.remove('flipped');
            dealerHand[1].hidden = false;
            updateScores();
            gameOver()
        } else {
            stand()
        }
    }

    function dealerPlay() {
        toggleGameButtons(false);

        function drawDealerCard() {
            if (dealerScore < 17) {
                setTimeout(() => {
                    const card = drawCard();
                    dealerHand.push(card);
                    const cardEl = createCardElement(card);
                    dealerHandEl.appendChild(cardEl);
                    updateScores();
                    drawDealerCard()
                }, 600)
            } else {
                determineWinner()
            }
        }

        drawDealerCard()
    }

    function determineWinner() {
        if (dealerScore > 21) {
            showMessage('Dealer busts! You win!', 'win');
            bankAmount += currentBet * 2;
            stats.wins++;
            currentStreak++
        } else if (dealerScore > playerScore) {
            showMessage('Dealer wins!', 'lose');
            stats.losses++;
            currentStreak = 0
        } else if (dealerScore < playerScore) {
            showMessage('You win!', 'win');
            bankAmount += currentBet * 2;
            stats.wins++;
            currentStreak++
        } else {
            showMessage('Push!', 'push');
            bankAmount += currentBet;
            stats.pushes++;
            currentStreak = 0
        }
        gameOver()
    }

    function gameOver() {
        gameInProgress = false;
        currentBet = 0;
        updateBankDisplay();
        updateStats();
        toggleGameButtons(false);
        setTimeout(() => {
            toggleGameUI(false);
            if (bankAmount === 0) {
                showMessage('Game over! You\'re out of money. Resetting bank...');
                setTimeout(() => {
                    bankAmount = 1000;
                    updateBankDisplay();
                    toggleBetButtons(true)
                }, 3000)
            } else {
                toggleBetButtons(true)
            }
        }, 1500)
    }

    function placeBet(amount) {
        if (gameInProgress) return;
        if (amount <= bankAmount) {
            currentBet += amount;
            bankAmount -= amount;
            updateBankDisplay();
            betAmountEl.classList.add('chip-animation');
            setTimeout(() => {
                betAmountEl.classList.remove('chip-animation')
            }, 500);
            dealBtn.disabled = false;
            clearBetBtn.disabled = false
        } else {
            showMessage('Not enough funds for this bet')
        }
    }

    function clearBet() {
        if (gameInProgress) return;
        bankAmount += currentBet;
        currentBet = 0;
        updateBankDisplay();
        dealBtn.disabled = true;
        clearBetBtn.disabled = true;
        resetMessage()
    }

    function resetStats() {
        stats = {wins: 0, losses: 0, pushes: 0, blackjacks: 0, handsPlayed: 0};
        currentStreak = 0;
        updateStats()
    }

    function newGame() {
        if (gameInProgress) {
            if (!confirm('Are you sure you want to start a new game?')) {
                return
            }
        }
        gameInProgress = false;
        playerHand = [];
        dealerHand = [];
        dealerHandEl.innerHTML = '';
        playerHandEl.innerHTML = '';
        currentBet = 0;
        bankAmount = 1000;
        updateBankDisplay();
        resetMessage();
        dealerScoreEl.textContent = '0';
        playerScoreEl.textContent = '0';
        toggleGameUI(false);
        toggleBetButtons(true);
        adviceEl.textContent = ''
    }

    dealBtn.addEventListener('click', startGame);
    hitBtn.addEventListener('click', hit);
    standBtn.addEventListener('click', stand);
    doubleBtn.addEventListener('click', double);
    clearBetBtn.addEventListener('click', clearBet);
    resetStatsBtn.addEventListener('click', resetStats);
    newGameBtn.addEventListener('click', newGame);
    chips.forEach(chip => {
        chip.addEventListener('click', () => {
            const amount = parseInt(chip.dataset.value);
            placeBet(amount)
        })
    });
    rulesBtn.addEventListener('click', () => {
        rulesModal.style.display = 'flex'
    });
    closeButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            btn.closest('.modal').style.display = 'none'
        })
    });
    window.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) {
            e.target.style.display = 'none'
        }
    });
    document.addEventListener('keydown', (e) => {
        if (!gameInProgress) return;
        if (e.key.toLowerCase() === 'h') {
            hit()
        } else if (e.key.toLowerCase() === 's') {
            stand()
        } else if (e.key.toLowerCase() === 'd') {
            double()
        }
    });
    updateBankDisplay();
    updateStats();
    toggleGameButtons(false);
    clearBetBtn.disabled = true;</script>
<script src="../logo.js" data-position="bottom-left"></script>
</body>
</html>