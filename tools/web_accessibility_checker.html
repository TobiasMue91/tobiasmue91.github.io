<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="Free online web accessibility checker to scan websites and HTML code for WCAG compliance and accessibility issues">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üñ±Ô∏è</text></svg>">
    <title>Web Accessibility Checker - WCAG Compliance Scanner</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #4a6fa5;
            --primary-light: #6b8cb8;
            --primary-dark: #3a5b8c;
            --secondary-color: #166088;
            --accent-color: #f0a500;
            --bg-color: #ffffff;
            --card-bg: #f8f9fa;
            --text-color: #333333;
            --text-muted: #6c757d;
            --error-color: #e74c3c;
            --warning-color: #f39c12;
            --notice-color: #3498db;
            --success-color: #27ae60;
            --border-color: #e0e0e0;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
            --transition: all 0.3s ease
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --primary-color: #5b8bd0;
                --primary-light: #7aa3e0;
                --primary-dark: #4a7ac0;
                --secondary-color: #206a94;
                --accent-color: #ffc107;
                --bg-color: #1f2937;
                --card-bg: #2d3748;
                --text-color: #e5e7eb;
                --text-muted: #9ca3af;
                --error-color: #f87171;
                --warning-color: #fbbf24;
                --notice-color: #60a5fa;
                --success-color: #34d399;
                --border-color: #4b5563;
                --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25)
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            transition: var(--transition)
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            margin: 0;
            padding: 0
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 3rem 2rem;
            text-align: center
        }

        header h1 {
            margin-bottom: 0.5rem;
            font-size: 2.5rem;
            font-weight: 800;
            letter-spacing: -0.5px
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem
        }

        section {
            margin-bottom: 3rem
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            font-weight: 700
        }

        .card {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow)
        }

        .tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--border-color)
        }

        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-muted);
            border-bottom: 3px solid transparent;
            margin-right: 1rem;
            transition: var(--transition)
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color)
        }

        .tab:hover:not(.active) {
            color: var(--primary-light);
            border-bottom-color: var(--primary-light)
        }

        .tab-content {
            display: none
        }

        .tab-content.active {
            display: block
        }

        .input-group {
            margin-bottom: 1.5rem
        }

        .input-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600
        }

        input[type="url"], textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 1rem;
            color: var(--text-color);
            transition: var(--transition)
        }

        input[type="url"]:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.25)
        }

        textarea {
            min-height: 300px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical
        }

        .controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap
        }

        button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: var(--transition)
        }

        button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.25)
        }

        button:active {
            transform: translateY(1px)
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white
        }

        .btn-primary:hover {
            background-color: var(--primary-dark)
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: white
        }

        .btn-secondary:hover {
            background-color: #125070
        }

        .btn-light {
            background-color: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color)
        }

        .btn-light:hover {
            background-color: var(--bg-color)
        }

        .btn-sample {
            color: var(--primary-color);
            background-color: transparent;
            text-decoration: underline;
            padding: 0.5rem;
            border-radius: 4px
        }

        .btn-sample:hover {
            background-color: rgba(74, 111, 165, 0.1)
        }

        .btn-disabled {
            opacity: 0.7;
            cursor: not-allowed
        }

        .loading {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin: 1rem 0;
            font-weight: 600;
            color: var(--primary-color)
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(74, 111, 165, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite
        }

        @keyframes spin {
            to {
                transform: rotate(360deg)
            }
        }

        .summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 1.5rem;
            background-color: var(--bg-color);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color)
        }

        .summary-counts {
            display: flex;
            gap: 1.5rem
        }

        .count-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600
        }

        .count-badge-error {
            color: var(--error-color)
        }

        .count-badge-warning {
            color: var(--warning-color)
        }

        .count-badge-notice {
            color: var(--notice-color)
        }

        .results-buttons {
            display: flex;
            gap: 0.75rem
        }

        .results-container {
            display: grid;
            grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem
        }

        .result-category {
            background-color: var(--bg-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            border-top: 4px solid;
            height: fit-content
        }

        #errors {
            border-top-color: var(--error-color)
        }

        #warnings {
            border-top-color: var(--warning-color)
        }

        #notices {
            border-top-color: var(--notice-color)
        }

        .result-category h3 {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-color)
        }

        #errors h3 i {
            color: var(--error-color)
        }

        #warnings h3 i {
            color: var(--warning-color)
        }

        #notices h3 i {
            color: var(--notice-color)
        }

        ul {
            list-style-type: none
        }

        li {
            margin-bottom: 1.5rem;
            padding: 1.25rem;
            border-radius: var(--border-radius);
            background-color: var(--card-bg);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            border-left: 4px solid
        }

        #errors-list li {
            border-left-color: var(--error-color)
        }

        #warnings-list li {
            border-left-color: var(--warning-color)
        }

        #notices-list li {
            border-left-color: var(--notice-color)
        }

        .no-issues {
            color: var(--success-color);
            text-align: center;
            font-weight: bold;
            border-left-color: var(--success-color) !important
        }

        .issue-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
            gap: 0.5rem
        }

        .issue-type {
            font-weight: bold;
            color: var(--primary-color)
        }

        .issue-element {
            font-family: monospace;
            background-color: rgba(0, 0, 0, 0.05);
            padding: 0.2rem 0.5rem;
            border-radius: 4px
        }

        .issue-description {
            margin-bottom: 0.75rem
        }

        .issue-suggestion {
            margin-bottom: 0.75rem;
            background-color: rgba(74, 111, 165, 0.1);
            padding: 0.75rem;
            border-radius: 4px;
            border-left: 3px solid var(--primary-color)
        }

        .issue-code {
            background-color: var(--bg-color);
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin-top: 0.75rem;
            border: 1px solid var(--border-color)
        }

        .show-fix {
            color: var(--primary-color);
            background: none;
            border: none;
            padding: 0.25rem 0.5rem;
            cursor: pointer;
            font-size: 0.9rem;
            text-decoration: underline;
            margin-top: 0.5rem;
            display: inline-block
        }

        .show-fix:hover {
            color: var(--primary-dark)
        }

        .issue-fix {
            display: none;
            background-color: rgba(39, 174, 96, 0.1);
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin-top: 0.75rem;
            border: 1px solid var(--success-color)
        }

        .fix-header {
            color: var(--success-color);
            font-weight: bold;
            margin-bottom: 0.5rem
        }

        .tips-container {
            display: grid;
            grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem
        }

        .tip-card {
            background-color: var(--bg-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border-top: 4px solid var(--primary-color);
            height: 100%
        }

        .tip-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem
        }

        .tip-card ul {
            padding-left: 1.25rem;
            list-style-type: disc
        }

        .tip-card ul li {
            border: none;
            padding: 0;
            margin-bottom: 0.75rem;
            background: none;
            box-shadow: none
        }

        .cors-notice {
            background-color: var(--notice-color);
            color: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            display: none;
            align-items: center;
            gap: 0.75rem
        }

        .cors-notice.show {
            display: flex
        }

        .note {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-top: 0.75rem
        }

        .faq-section {
            margin-top: 4rem
        }

        .faq-item {
            margin-bottom: 1.5rem;
            background-color: var(--bg-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-light)
        }

        .faq-question {
            font-weight: bold;
            margin-bottom: 0.75rem;
            color: var(--primary-color);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center
        }

        .faq-answer {
            padding-top: 0.75rem;
            display: none;
            border-top: 1px solid var(--border-color)
        }

        .faq-answer.show {
            display: block
        }

        .proxy-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem
        }

        .proxy-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            background-color: var(--notice-color);
            color: white
        }

        .proxy-selector label {
            font-size: 0.9rem;
            color: var(--text-muted)
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 1rem;
            background-color: var(--card-bg);
            border-left: 4px solid;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 1000;
            transform: translateY(150%);
            transition: transform 0.3s ease
        }

        .toast.show {
            transform: translateY(0)
        }

        .toast-success {
            border-left-color: var(--success-color)
        }

        .toast-error {
            border-left-color: var(--error-color)
        }

        .toast-content {
            display: flex;
            align-items: center;
            gap: 0.75rem
        }

        .toast-icon {
            font-size: 1.25rem
        }

        .toast-success .toast-icon {
            color: var(--success-color)
        }

        .toast-error .toast-icon {
            color: var(--error-color)
        }

        .shortcut-tip {
            display: none;
            position: absolute;
            background-color: var(--card-bg);
            padding: 0.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            font-size: 0.9rem;
            z-index: 100;
            opacity: 0.9
        }

        footer {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            margin-top: 2rem
        }

        footer p {
            margin-bottom: 1rem
        }

        footer a {
            color: white;
            text-decoration: underline;
            transition: var(--transition)
        }

        footer a:hover {
            color: var(--accent-color)
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem
        }

        .social-links a {
            color: white;
            font-size: 1.25rem;
            padding: 0.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition)
        }

        .social-links a:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px)
        }

        #shortcuts-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center
        }

        .modal-content {
            background-color: var(--bg-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 90%;
            max-width: 500px;
            padding: 2rem;
            position: relative
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted)
        }

        .modal-close:hover {
            color: var(--text-color)
        }

        .keyboard-shortcuts {
            margin-top: 1rem
        }

        .shortcut {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-color)
        }

        .shortcut:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0
        }

        .key {
            background-color: var(--card-bg);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            font-family: monospace;
            font-weight: bold
        }

        .dropdown {
            position: relative;
            display: inline-block
        }

        .dropdown-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap
        }

        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: var(--bg-color);
            min-width: 180px;
            box-shadow: var(--box-shadow);
            border-radius: var(--border-radius);
            z-index: 1;
            border: 1px solid var(--border-color)
        }

        .dropdown-content a {
            color: var(--text-color);
            padding: 0.75rem 1rem;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem
        }

        .dropdown-content a:hover {
            background-color: rgba(74, 111, 165, 0.1)
        }

        .dropdown:hover .dropdown-content {
            display: block
        }

        .accordion {
            margin-top: 1rem
        }

        .accordion-item {
            border-bottom: 1px solid var(--border-color)
        }

        .accordion-header {
            padding: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600
        }

        .accordion-content {
            padding: 0 1rem 1rem 1rem;
            display: none;
            animation: fadeIn 0.3s ease-in-out
        }

        @keyframes fadeIn {
            from {
                opacity: 0
            }
            to {
                opacity: 1
            }
        }

        .accordion-content.active {
            display: block
        }

        .scan-tooltip-box {
            background-color: var(--bg-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1rem;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            max-width: 80%;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            display: none;
            animation: fadeInDown 0.3s ease-in-out
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translate(-50%, -20px)
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0)
            }
        }

        .scan-tooltip-box i {
            color: var(--success-color)
        }

        @media (max-width: 768px) {
            .tabs {
                flex-wrap: wrap
            }

            .summary {
                flex-direction: column;
                align-items: flex-start
            }

            .summary-counts {
                flex-direction: column;
                gap: 0.75rem
            }

            .results-container {
                grid-template-columns:1fr
            }

            .controls {
                flex-direction: column
            }
        }
    </style>
</head>
<body>
<header>
    <h1>Web Accessibility Checker</h1>
    <p>Scan websites and HTML code for accessibility issues and get suggestions for WCAG compliance</p>
</header>

<main>
    <section id="input-section" class="card">
        <h2>Check Accessibility</h2>

        <div class="tabs">
            <div class="tab active" data-tab="url-input">URL Input</div>
            <div class="tab" data-tab="html-input">HTML Input</div>
        </div>

        <div id="url-input" class="tab-content active">
            <div class="input-group">
                <label for="url" class="input-label">Enter website URL:</label>
                <input type="url" id="url" placeholder="https://example.com" autocomplete="url">
                <div class="proxy-selector">
                    <label for="cors-proxy">CORS proxy:</label>
                    <select id="cors-proxy" class="proxy-badge">
                        <option value="auto" selected>Auto (Try all)</option>
                        <option value="corsanywhere">CORS Anywhere</option>
                        <option value="allorigins">All Origins</option>
                        <option value="corsproxy">CORS Proxy.io</option>
                        <option value="none">No Proxy (Direct)</option>
                    </select>
                    <span class="note">Using a proxy helps bypass CORS restrictions</span>
                </div>
            </div>

            <div class="cors-notice" id="cors-notice">
                <i class="bi bi-exclamation-triangle-fill"></i>
                <div>
                    <strong>CORS limitation:</strong> Some websites block direct access. We're trying multiple proxies,
                    but you can also copy-paste the HTML code instead.
                </div>
            </div>

            <div class="controls">
                <button id="fetch-btn" class="btn-primary">
                    <i class="bi bi-search"></i> Scan Website
                </button>
                <button id="sample-url-btn" class="btn-sample">Try a sample URL</button>
            </div>
        </div>

        <div id="html-input" class="tab-content">
            <div class="input-group">
                <label for="html-code" class="input-label">Paste HTML code:</label>
                <textarea id="html-code" placeholder="<!DOCTYPE html>..."></textarea>
            </div>

            <div class="controls">
                <button id="scan-html-btn" class="btn-primary">
                    <i class="bi bi-code-slash"></i> Scan HTML
                </button>
                <button id="sample-html-btn" class="btn-sample">Load sample HTML</button>
                <button id="clear-btn" class="btn-light">
                    <i class="bi bi-x-lg"></i> Clear
                </button>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <span id="loading-message">Analyzing accessibility issues...</span>
        </div>
    </section>

    <section id="results-section" class="card" style="display: none;">
        <h2>Results</h2>

        <div class="summary">
            <div class="summary-counts">
                <div class="count-badge count-badge-error">
                    <i class="bi bi-exclamation-circle-fill"></i>
                    <span id="error-count">0</span> Errors
                </div>
                <div class="count-badge count-badge-warning">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    <span id="warning-count">0</span> Warnings
                </div>
                <div class="count-badge count-badge-notice">
                    <i class="bi bi-info-circle-fill"></i>
                    <span id="notice-count">0</span> Notices
                </div>
            </div>
            <div class="results-buttons">
                <div class="dropdown">
                    <button class="btn-secondary dropdown-btn">
                        <i class="bi bi-download"></i> Export <i class="bi bi-chevron-down"></i>
                    </button>
                    <div class="dropdown-content">
                        <a href="#" id="copy-results-btn"><i class="bi bi-clipboard"></i> Copy to clipboard</a>
                        <a href="#" id="download-html-btn"><i class="bi bi-filetype-html"></i> Download HTML report</a>
                        <a href="#" id="download-json-btn"><i class="bi bi-filetype-json"></i> Download JSON</a>
                        <a href="#" id="download-csv-btn"><i class="bi bi-filetype-csv"></i> Download CSV</a>
                    </div>
                </div>
                <button id="rescan-btn" class="btn-light">
                    <i class="bi bi-arrow-repeat"></i> Rescan
                </button>
            </div>
        </div>

        <div class="results-container">
            <div id="errors" class="result-category">
                <h3><i class="bi bi-exclamation-circle-fill"></i> Errors</h3>
                <ul id="errors-list"></ul>
            </div>
            <div id="warnings" class="result-category">
                <h3><i class="bi bi-exclamation-triangle-fill"></i> Warnings</h3>
                <ul id="warnings-list"></ul>
            </div>
            <div id="notices" class="result-category">
                <h3><i class="bi bi-info-circle-fill"></i> Notices</h3>
                <ul id="notices-list"></ul>
            </div>
        </div>
    </section>

    <section id="tips-section" class="card">
        <h2>Accessibility Best Practices</h2>
        <div class="accordion">
            <div class="accordion-item">
                <div class="accordion-header">WCAG Guidelines Overview <i class="bi bi-chevron-down"></i></div>
                <div class="accordion-content">
                    <p>The Web Content Accessibility Guidelines (WCAG) are organized under four main principles:</p>
                    <ul>
                        <li><strong>Perceivable</strong>: Information and user interface components must be presentable
                            to users in ways they can perceive.
                        </li>
                        <li><strong>Operable</strong>: User interface components and navigation must be operable.</li>
                        <li><strong>Understandable</strong>: Information and the operation of user interface must be
                            understandable.
                        </li>
                        <li><strong>Robust</strong>: Content must be robust enough that it can be interpreted by a wide
                            variety of user agents, including assistive technologies.
                        </li>
                    </ul>
                    <p>Each principle contains guidelines, and each guideline contains specific success criteria at
                        levels A, AA, and AAA.</p>
                </div>
            </div>
        </div>
        <div class="tips-container">
            <div class="tip-card">
                <h3><i class="bi bi-image"></i> Images</h3>
                <ul>
                    <li>Always provide alternative text for images</li>
                    <li>Use empty alt text (alt="") for decorative images</li>
                    <li>Make sure complex images have detailed descriptions</li>
                    <li>Avoid embedding text within images</li>
                </ul>
            </div>
            <div class="tip-card">
                <h3><i class="bi bi-ui-checks"></i> Forms</h3>
                <ul>
                    <li>Label all form controls properly</li>
                    <li>Group related form elements with fieldset</li>
                    <li>Provide clear error messages</li>
                    <li>Ensure form navigation works with keyboard</li>
                    <li>Use autocomplete attributes when appropriate</li>
                </ul>
            </div>
            <div class="tip-card">
                <h3><i class="bi bi-layout-text-window"></i> Structure</h3>
                <ul>
                    <li>Use semantic HTML elements (nav, main, article, etc.)</li>
                    <li>Maintain proper heading hierarchy (h1-h6)</li>
                    <li>Use landmarks to define page regions</li>
                    <li>Ensure skip navigation links are available</li>
                    <li>Include proper document language attribute</li>
                </ul>
            </div>
            <div class="tip-card">
                <h3><i class="bi bi-palette"></i> Text & Colors</h3>
                <ul>
                    <li>Maintain sufficient color contrast (4.5:1 for normal text)</li>
                    <li>Don't rely on color alone to convey information</li>
                    <li>Ensure text can be resized up to 200% without loss of functionality</li>
                    <li>Use relative units (em, rem) instead of fixed pixels</li>
                    <li>Provide visual focus indicators for keyboard users</li>
                </ul>
            </div>
            <div class="tip-card">
                <h3><i class="bi bi-film"></i> Media & Interaction</h3>
                <ul>
                    <li>Provide captions and transcripts for audio/video</li>
                    <li>Ensure all functionality is keyboard accessible</li>
                    <li>Avoid auto-playing media with sound</li>
                    <li>Provide sufficient time for users to read and interact</li>
                    <li>Include appropriate audio descriptions for videos</li>
                </ul>
            </div>
            <div class="tip-card">
                <h3><i class="bi bi-braces"></i> ARIA Usage</h3>
                <ul>
                    <li>Use ARIA attributes only when necessary</li>
                    <li>Prefer native HTML elements when possible</li>
                    <li>Test with screen readers to verify implementation</li>
                    <li>Keep ARIA roles consistent with element behavior</li>
                    <li>Ensure custom components are fully accessible</li>
                </ul>
            </div>
        </div>
    </section>

    <section id="faq-section" class="faq-section">
        <h2>Frequently Asked Questions</h2>

        <div class="faq-item">
            <div class="faq-question">
                What is WCAG compliance? <i class="bi bi-chevron-down"></i>
            </div>
            <div class="faq-answer">
                <p>The Web Content Accessibility Guidelines (WCAG) are a set of recommendations for making web content
                    more accessible to people with disabilities. Compliance with these guidelines ensures that websites
                    are perceivable, operable, understandable, and robust for all users, including those with visual,
                    auditory, physical, or cognitive impairments.</p>
                <p>Current WCAG versions include 2.0, 2.1, and 2.2, with different conformance levels (A, AA, AAA). Most
                    organizations aim for WCAG 2.1 Level AA compliance as a minimum standard.</p>
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question">
                Why can't I check some websites? <i class="bi bi-chevron-down"></i>
            </div>
            <div class="faq-answer">
                <p>Due to security restrictions (CORS policies) implemented by browsers, our tool may not be able to
                    directly access the HTML of some websites. This is a security measure to protect users.</p>
                <p>We provide multiple CORS proxies to help bypass these restrictions, but even these might not work for
                    all sites. In such cases, you can manually copy the HTML from the website (using View Page Source in
                    your browser) and paste it into the HTML input tab.</p>
                <p>If one proxy doesn't work, try another, or use the "Auto" option to attempt all available
                    proxies.</p>
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question">
                Is this tool a replacement for manual testing? <i class="bi bi-chevron-down"></i>
            </div>
            <div class="faq-answer">
                <p>No, this tool is meant to help identify common accessibility issues, but it is not a replacement for
                    comprehensive manual testing. Automated testing can only catch about 30% of accessibility
                    issues.</p>
                <p>For full WCAG compliance, we recommend:</p>
                <ul>
                    <li>Using this tool to identify basic issues</li>
                    <li>Conducting manual testing with keyboard navigation</li>
                    <li>Testing with assistive technologies like screen readers</li>
                    <li>Getting feedback from users with disabilities</li>
                    <li>Consulting with accessibility experts for complex sites</li>
                </ul>
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question">
                What accessibility issues does this tool detect? <i class="bi bi-chevron-down"></i>
            </div>
            <div class="faq-answer">
                <p>This tool checks for several common accessibility issues including:</p>
                <ul>
                    <li>Missing alternative text for images</li>
                    <li>Form controls without proper labels</li>
                    <li>Empty links and buttons without accessible names</li>
                    <li>Missing document language</li>
                    <li>Improper heading hierarchy</li>
                    <li>Invalid or missing ARIA attributes</li>
                    <li>Inaccessible tables</li>
                    <li>Potential color contrast issues</li>
                    <li>Missing page titles</li>
                    <li>Semantic HTML structure problems</li>
                </ul>
                <p>However, many aspects of accessibility require human judgment and cannot be automatically tested.</p>
            </div>
        </div>
    </section>
</main>

<div id="toast" class="toast">
    <div class="toast-content">
        <i class="bi bi-check-circle-fill toast-icon"></i>
        <span id="toast-message">Message goes here</span>
    </div>
</div>

<div id="scan-tooltip" class="scan-tooltip-box">
    <i class="bi bi-check-circle-fill"></i>
    <span>Accessibility check complete!</span>
</div>

<div id="shortcuts-modal">
    <div class="modal-content">
        <h3>Keyboard Shortcuts</h3>
        <button class="modal-close">&times;</button>
        <div class="keyboard-shortcuts">
            <div class="shortcut">
                <span>Run accessibility scan</span>
                <span><span class="key">Alt</span> + <span class="key">Enter</span></span>
            </div>
            <div class="shortcut">
                <span>Clear input</span>
                <span><span class="key">Alt</span> + <span class="key">C</span></span>
            </div>
            <div class="shortcut">
                <span>Copy results</span>
                <span><span class="key">Alt</span> + <span class="key">R</span></span>
            </div>
            <div class="shortcut">
                <span>Switch to URL tab</span>
                <span><span class="key">Alt</span> + <span class="key">1</span></span>
            </div>
            <div class="shortcut">
                <span>Switch to HTML tab</span>
                <span><span class="key">Alt</span> + <span class="key">2</span></span>
            </div>
            <div class="shortcut">
                <span>Show shortcuts</span>
                <span><span class="key">?</span></span>
            </div>
        </div>
    </div>
</div>

<footer>
    <p>Web Accessibility Checker - Made with care for everyone</p>
    <p>A tool to help make the web more accessible and inclusive</p>
    <div class="social-links">
        <a href="https://github.com/TobiasMue91/tobiasmue91.github.io/blob/main/tools/web_accessibility_checker.html" aria-label="GitHub repository"><i class="bi bi-github"></i></a>
    </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const urlInput = document.getElementById('url');
        const corsProxySelect = document.getElementById('cors-proxy');
        const htmlInput = document.getElementById('html-code');
        const fetchBtn = document.getElementById('fetch-btn');
        const scanHtmlBtn = document.getElementById('scan-html-btn');
        const clearBtn = document.getElementById('clear-btn');
        const rescanBtn = document.getElementById('rescan-btn');
        const sampleUrlBtn = document.getElementById('sample-url-btn');
        const sampleHtmlBtn = document.getElementById('sample-html-btn');
        const copyResultsBtn = document.getElementById('copy-results-btn');
        const downloadHtmlBtn = document.getElementById('download-html-btn');
        const downloadJsonBtn = document.getElementById('download-json-btn');
        const downloadCsvBtn = document.getElementById('download-csv-btn');
        const loading = document.getElementById('loading');
        const loadingMessage = document.getElementById('loading-message');
        const resultsSection = document.getElementById('results-section');
        const errorCount = document.getElementById('error-count');
        const warningCount = document.getElementById('warning-count');
        const noticeCount = document.getElementById('notice-count');
        const errorsList = document.getElementById('errors-list');
        const warningsList = document.getElementById('warnings-list');
        const noticesList = document.getElementById('notices-list');
        const corsNotice = document.getElementById('cors-notice');
        const faqQuestions = document.querySelectorAll('.faq-question');
        const shortcutsModal = document.getElementById('shortcuts-modal');
        const modalClose = document.querySelector('.modal-close');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const scanTooltip = document.getElementById('scan-tooltip');
        const accordionHeaders = document.querySelectorAll('.accordion-header');
        let lastCheckedUrl = '';
        let lastScannedHtml = '';
        let lastScanResults = null;
        let currentProxy = 0;
        const proxies = [{
            name: 'corsanywhere',
            url: 'https://cors-anywhere.herokuapp.com/',
            requestHeaders: {}
        }, {name: 'allorigins', url: 'https://api.allorigins.win/raw?url=', requestHeaders: {}}, {
            name: 'corsproxy',
            url: 'https://corsproxy.io/?',
            requestHeaders: {}
        }];
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tabId).classList.add('active')
            })
        });
        fetchBtn.addEventListener('click', fetchAndScanUrl);
        scanHtmlBtn.addEventListener('click', scanHtml);
        clearBtn.addEventListener('click', clearAll);
        rescanBtn.addEventListener('click', rescan);
        sampleUrlBtn.addEventListener('click', loadSampleUrl);
        sampleHtmlBtn.addEventListener('click', loadSampleHtml);
        copyResultsBtn.addEventListener('click', copyResults);
        downloadHtmlBtn.addEventListener('click', downloadHtmlReport);
        downloadJsonBtn.addEventListener('click', downloadJsonReport);
        downloadCsvBtn.addEventListener('click', downloadCsvReport);
        faqQuestions.forEach(question => {
            question.addEventListener('click', () => {
                const answer = question.nextElementSibling;
                const icon = question.querySelector('i');
                if (answer.classList.contains('show')) {
                    answer.classList.remove('show');
                    icon.classList.remove('bi-chevron-up');
                    icon.classList.add('bi-chevron-down')
                } else {
                    answer.classList.add('show');
                    icon.classList.remove('bi-chevron-down');
                    icon.classList.add('bi-chevron-up')
                }
            })
        });
        accordionHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const icon = header.querySelector('i');
                const isActive = content.classList.contains('active');
                accordionHeaders.forEach(h => {
                    const c = h.nextElementSibling;
                    const i = h.querySelector('i');
                    c.classList.remove('active');
                    i.classList.remove('bi-chevron-up');
                    i.classList.add('bi-chevron-down')
                });
                if (!isActive) {
                    content.classList.add('active');
                    icon.classList.remove('bi-chevron-down');
                    icon.classList.add('bi-chevron-up')
                }
            })
        });
        document.addEventListener('keydown', e => {
            if (e.key === '?') {
                showShortcutsModal()
            } else if (e.altKey) {
                if (e.key === 'Enter') {
                    if (document.getElementById('url-input').classList.contains('active')) {
                        fetchAndScanUrl()
                    } else {
                        scanHtml()
                    }
                } else if (e.key === 'c') {
                    clearAll()
                } else if (e.key === 'r' && !resultsSection.style.display === 'none') {
                    copyResults()
                } else if (e.key === '1') {
                    setActiveTab('url-input')
                } else if (e.key === '2') {
                    setActiveTab('html-input')
                }
            }
        });
        modalClose.addEventListener('click', hideShortcutsModal);
        shortcutsModal.addEventListener('click', e => {
            if (e.target === shortcutsModal) {
                hideShortcutsModal()
            }
        });

        async function fetchAndScanUrl() {
            const url = urlInput.value.trim();
            if (!url) {
                showToast('Please enter a valid URL', 'error');
                return
            }
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                urlInput.value = `https://${url}`;
                await fetchAndScanUrl();
                return
            }
            lastCheckedUrl = url;
            corsNotice.classList.remove('show');
            loading.style.display = 'flex';
            resultsSection.style.display = 'none';
            clearResults();
            const proxyMode = corsProxySelect.value;
            if (proxyMode === 'none') {
                try {
                    await fetchWithoutProxy(url)
                } catch (error) {
                    corsNotice.classList.add('show');
                    showToast('Failed to fetch URL directly due to CORS restrictions', 'error');
                    loading.style.display = 'none';
                    console.error('Error fetching URL:', error)
                }
            } else if (proxyMode === 'auto') {
                currentProxy = 0;
                tryNextProxy(url)
            } else {
                const selectedProxy = proxies.find(p => p.name === proxyMode);
                if (selectedProxy) {
                    fetchWithProxy(url, selectedProxy)
                } else {
                    showToast('Invalid proxy selection', 'error');
                    loading.style.display = 'none'
                }
            }
        }

        async function fetchWithoutProxy(url) {
            try {
                loadingMessage.textContent = 'Attempting direct access...';
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`Failed to fetch URL: ${response.statusText}`)
                }
                const html = await response.text();
                lastScannedHtml = html;
                scanHtmlContent(html)
            } catch (error) {
                throw error
            }
        }

        async function fetchWithProxy(url, proxy) {
            try {
                loadingMessage.textContent = `Fetching via ${proxy.name} proxy...`;
                const proxyUrl = proxy.url + encodeURIComponent(url);
                const options = {method: 'GET', headers: proxy.requestHeaders, mode: 'cors'};
                const response = await fetch(proxyUrl, options);
                if (!response.ok) {
                    throw new Error(`Proxy fetch failed: ${response.statusText}`)
                }
                const html = await response.text();
                lastScannedHtml = html;
                scanHtmlContent(html)
            } catch (error) {
                console.error(`Error fetching with ${proxy.name}:`, error);
                if (corsProxySelect.value === 'auto') {
                    currentProxy++;
                    tryNextProxy(url)
                } else {
                    corsNotice.classList.add('show');
                    showToast(`Failed to fetch with ${proxy.name}. Try another proxy or HTML input.`, 'error');
                    loading.style.display = 'none'
                }
            }
        }

        async function tryNextProxy(url) {
            if (currentProxy >= proxies.length) {
                corsNotice.classList.add('show');
                showToast('All proxies failed. Try HTML input instead.', 'error');
                loading.style.display = 'none';
                return
            }
            const proxy = proxies[currentProxy];
            try {
                await fetchWithProxy(url, proxy)
            } catch (error) {
                currentProxy++;
                tryNextProxy(url)
            }
        }

        function scanHtml() {
            const html = htmlInput.value.trim();
            if (!html) {
                showToast('Please enter HTML code to scan', 'error');
                return
            }
            lastScannedHtml = html;
            loading.style.display = 'flex';
            loadingMessage.textContent = 'Analyzing accessibility issues...';
            resultsSection.style.display = 'none';
            clearResults();
            setTimeout(() => {
                scanHtmlContent(html)
            }, 300)
        }

        function rescan() {
            if (lastCheckedUrl) {
                fetchAndScanUrl()
            } else if (lastScannedHtml) {
                scanHtml()
            } else {
                showToast('Nothing to rescan. Please enter URL or HTML first.', 'error')
            }
        }

        function scanHtmlContent(html) {
            try {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const parsingError = doc.querySelector('parsererror');
                if (parsingError) {
                    displayError('Invalid HTML: Could not parse the input', 'Please check your HTML syntax');
                    showResults();
                    return
                }
                const issues = performAccessibilityChecks(doc);
                lastScanResults = issues;
                displayResults(issues);
                showResults();
                showScanTooltip()
            } catch (error) {
                console.error('Error scanning HTML:', error);
                displayError('An error occurred while scanning', 'Please check your HTML syntax or try a different input');
                showResults()
            } finally {
                loading.style.display = 'none'
            }
        }

        function performAccessibilityChecks(doc) {
            const issues = {
                errors: [],
                warnings: [],
                notices: [],
                meta: {url: lastCheckedUrl, timestamp: new Date().toISOString(), documentTitle: doc.title || 'Untitled'}
            };
            checkMissingAltText(doc, issues);
            checkFormLabels(doc, issues);
            checkEmptyInteractiveElements(doc, issues);
            checkDocumentLanguage(doc, issues);
            checkHeadingHierarchy(doc, issues);
            checkAriaAttributes(doc, issues);
            checkTables(doc, issues);
            checkColorContrast(doc, issues);
            checkSemantic(doc, issues);
            checkPageTitle(doc, issues);
            checkLinks(doc, issues);
            checkKeyboardNavigation(doc, issues);
            return issues
        }

        function checkMissingAltText(doc, issues) {
            const images = doc.querySelectorAll('img');
            images.forEach((img, index) => {
                if (!img.hasAttribute('alt')) {
                    issues.errors.push({
                        type: 'missing-alt',
                        element: `img (${index + 1})`,
                        description: 'Image is missing alt text',
                        suggestion: 'Add descriptive alt text to the image for screen readers',
                        code: getElementOuterHTML(img),
                        fix: `<img src="${img.getAttribute('src')}" alt="Description of this image" ${getAttributesString(img, ['src', 'alt'])}>`
                    })
                } else if (img.getAttribute('alt').trim() === '' && !img.getAttribute('role') === 'presentation' && !img.getAttribute('role') === 'none') {
                    issues.warnings.push({
                        type: 'empty-alt',
                        element: `img (${index + 1})`,
                        description: 'Image has empty alt text but is not marked as decorative',
                        suggestion: 'If the image is decorative, add role="presentation" or role="none", otherwise add descriptive alt text',
                        code: getElementOuterHTML(img),
                        fix: `<img src="${img.getAttribute('src')}" alt="" role="presentation" ${getAttributesString(img, ['src', 'alt', 'role'])}>`
                    })
                }
            })
        }

        function checkFormLabels(doc, issues) {
            const formControls = doc.querySelectorAll('input, select, textarea');
            formControls.forEach((control, index) => {
                if (control.type === 'hidden' || control.type === 'submit' || control.type === 'button' || control.type === 'reset') {
                    return
                }
                const id = control.getAttribute('id');
                let hasLabel = false;
                if (id) {
                    const label = doc.querySelector(`label[for="${id}"]`);
                    hasLabel = label !== null
                }
                const hasAriaLabel = control.hasAttribute('aria-label') && control.getAttribute('aria-label').trim() !== '';
                const hasAriaLabelledBy = control.hasAttribute('aria-labelledby') && control.getAttribute('aria-labelledby').trim() !== '';
                if (!hasLabel && !hasAriaLabel && !hasAriaLabelledBy) {
                    const elementType = control.tagName.toLowerCase();
                    const controlType = control.type || 'generic';
                    issues.errors.push({
                        type: 'missing-label',
                        element: `${elementType} (${controlType}) (${index + 1})`,
                        description: 'Form control has no associated label',
                        suggestion: 'Add a label element with a for attribute matching the input\'s id, or use aria-label or aria-labelledby',
                        code: getElementOuterHTML(control),
                        fix: `<label for="element-${index}">Label text</label>\n<${elementType} id="element-${index}" ${control.type ? `type="${control.type}"` : ''} ${getAttributesString(control, ['id', 'type'])}>`
                    })
                }
            })
        }

        function checkEmptyInteractiveElements(doc, issues) {
            const links = doc.querySelectorAll('a');
            links.forEach((link, index) => {
                if (link.textContent.trim() === '' && !link.hasAttribute('aria-label') && !link.hasAttribute('aria-labelledby') && link.querySelectorAll('img[alt], svg, .icon').length === 0) {
                    issues.errors.push({
                        type: 'empty-link',
                        element: `a (${index + 1})`,
                        description: 'Link has no text content or accessible name',
                        suggestion: 'Add text content to the link, or use aria-label or aria-labelledby',
                        code: getElementOuterHTML(link),
                        fix: `<a href="${link.getAttribute('href') || '#'}" aria-label="Descriptive link text" ${getAttributesString(link, ['href'])}>${link.innerHTML}</a>`
                    })
                }
            });
            const buttons = doc.querySelectorAll('button');
            buttons.forEach((button, index) => {
                if (button.textContent.trim() === '' && !button.hasAttribute('aria-label') && !button.hasAttribute('aria-labelledby') && button.querySelectorAll('img[alt], svg, .icon').length === 0) {
                    issues.errors.push({
                        type: 'empty-button',
                        element: `button (${index + 1})`,
                        description: 'Button has no text content or accessible name',
                        suggestion: 'Add text content to the button, or use aria-label or aria-labelledby',
                        code: getElementOuterHTML(button),
                        fix: `<button aria-label="Button description" ${getAttributesString(button, [])}>${button.innerHTML}</button>`
                    })
                }
            })
        }

        function checkDocumentLanguage(doc, issues) {
            const html = doc.querySelector('html');
            if (!html.hasAttribute('lang')) {
                issues.errors.push({
                    type: 'missing-lang',
                    element: 'html',
                    description: 'Document language is not specified',
                    suggestion: 'Add a lang attribute to the html element (e.g., lang="en")',
                    code: getElementOuterHTML(html).substring(0, 150) + '...',
                    fix: `<html lang="en" ${getAttributesString(html, ['lang'])}>`
                })
            } else if (html.getAttribute('lang').trim() === '') {
                issues.warnings.push({
                    type: 'empty-lang',
                    element: 'html',
                    description: 'Document language attribute is empty',
                    suggestion: 'Specify a valid language code in the lang attribute (e.g., lang="en")',
                    code: getElementOuterHTML(html).substring(0, 150) + '...',
                    fix: `<html lang="en" ${getAttributesString(html, ['lang'])}>`
                })
            }
        }

        function checkHeadingHierarchy(doc, issues) {
            const headings = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');
            const headingLevels = [];
            headings.forEach(heading => {
                const level = parseInt(heading.tagName.charAt(1));
                headingLevels.push(level)
            });
            let previousLevel = 0;
            headingLevels.forEach((level, index) => {
                if (index === 0 && level > 1) {
                    issues.warnings.push({
                        type: 'first-heading-not-h1',
                        element: `${headings[index].tagName.toLowerCase()} (${index + 1})`,
                        description: 'The first heading on the page is not an h1',
                        suggestion: 'Start the page with an h1 heading for proper document structure',
                        code: getElementOuterHTML(headings[index]),
                        fix: `<h1>${headings[index].textContent}</h1>`
                    })
                } else if (level > previousLevel + 1) {
                    issues.errors.push({
                        type: 'skipped-heading',
                        element: `${headings[index].tagName.toLowerCase()} (${index + 1})`,
                        description: `Heading level skipped from h${previousLevel} to h${level}`,
                        suggestion: 'Use sequential heading levels to maintain proper document structure',
                        code: getElementOuterHTML(headings[index]),
                        fix: `<h${previousLevel + 1}>${headings[index].textContent}</h${previousLevel + 1}>`
                    })
                }
                previousLevel = level
            });
            const h1Elements = doc.querySelectorAll('h1');
            if (h1Elements.length > 1) {
                issues.warnings.push({
                    type: 'multiple-h1',
                    element: 'document',
                    description: `Multiple h1 headings found (${h1Elements.length})`,
                    suggestion: 'For best practices, use only one main h1 heading per page',
                    code: 'Multiple h1 elements detected'
                })
            }
        }

        function checkAriaAttributes(doc, issues) {
            const elementsWithRole = doc.querySelectorAll('[role]');
            const validRoles = ['alert', 'alertdialog', 'application', 'article', 'banner', 'button', 'cell', 'checkbox', 'columnheader', 'combobox', 'complementary', 'contentinfo', 'definition', 'dialog', 'directory', 'document', 'feed', 'figure', 'form', 'grid', 'gridcell', 'group', 'heading', 'img', 'link', 'list', 'listbox', 'listitem', 'log', 'main', 'marquee', 'math', 'menu', 'menubar', 'menuitem', 'menuitemcheckbox', 'menuitemradio', 'navigation', 'none', 'note', 'option', 'presentation', 'progressbar', 'radio', 'radiogroup', 'region', 'row', 'rowgroup', 'rowheader', 'scrollbar', 'search', 'searchbox', 'separator', 'slider', 'spinbutton', 'status', 'switch', 'tab', 'table', 'tablist', 'tabpanel', 'term', 'textbox', 'timer', 'toolbar', 'tooltip', 'tree', 'treegrid', 'treeitem'];
            elementsWithRole.forEach((element, index) => {
                const role = element.getAttribute('role');
                if (!validRoles.includes(role)) {
                    issues.errors.push({
                        type: 'invalid-role',
                        element: `${element.tagName.toLowerCase()} (${index + 1})`,
                        description: `Invalid ARIA role "${role}"`,
                        suggestion: 'Use a valid ARIA role or remove the role attribute',
                        code: getElementOuterHTML(element),
                        fix: `<${element.tagName.toLowerCase()} ${getAttributesString(element, ['role'])}>${element.innerHTML}</${element.tagName.toLowerCase()}>`
                    })
                }
            });
            const elementsToCheck = [{role: 'checkbox', requiredAttrs: ['aria-checked']}, {
                role: 'combobox',
                requiredAttrs: ['aria-expanded']
            }, {
                role: 'slider',
                requiredAttrs: ['aria-valuemin', 'aria-valuemax', 'aria-valuenow']
            }, {role: 'progressbar', requiredAttrs: ['aria-valuemin', 'aria-valuemax', 'aria-valuenow']}];
            elementsToCheck.forEach(({role, requiredAttrs}) => {
                const elements = doc.querySelectorAll(`[role="${role}"]`);
                elements.forEach((element, index) => {
                    requiredAttrs.forEach(attr => {
                        if (!element.hasAttribute(attr)) {
                            issues.errors.push({
                                type: 'missing-aria-attr',
                                element: `${element.tagName.toLowerCase()} with role="${role}" (${index + 1})`,
                                description: `Element with role="${role}" is missing required attribute: ${attr}`,
                                suggestion: `Add the ${attr} attribute to this element`,
                                code: getElementOuterHTML(element),
                                fix: `<${element.tagName.toLowerCase()} role="${role}" ${attr}="${attr === 'aria-checked' ? 'false' : attr === 'aria-expanded' ? 'false' : '0'}" ${getAttributesString(element, ['role', attr])}>${element.innerHTML}</${element.tagName.toLowerCase()}>`
                            })
                        }
                    })
                })
            })
        }

        function checkTables(doc, issues) {
            const tables = doc.querySelectorAll('table');
            tables.forEach((table, index) => {
                if (!table.querySelector('caption')) {
                    issues.notices.push({
                        type: 'table-no-caption',
                        element: `table (${index + 1})`,
                        description: 'Table has no caption',
                        suggestion: 'Add a caption element to describe the purpose of the table',
                        code: getElementOuterHTML(table).substring(0, 150) + '...',
                        fix: `<table ${getAttributesString(table, [])}>\n  <caption>Table description</caption>\n  ${table.innerHTML}\n</table>`
                    })
                }
                const hasTableHeaders = table.querySelectorAll('th').length > 0;
                if (!hasTableHeaders) {
                    issues.warnings.push({
                        type: 'table-no-headers',
                        element: `table (${index + 1})`,
                        description: 'Table has no header cells (th elements)',
                        suggestion: 'Use th elements to identify header cells in the table',
                        code: getElementOuterHTML(table).substring(0, 150) + '...'
                    })
                }
                const headers = table.querySelectorAll('th');
                headers.forEach((header, headerIndex) => {
                    if (!header.hasAttribute('scope')) {
                        issues.notices.push({
                            type: 'th-no-scope',
                            element: `th in table (${index + 1})`,
                            description: 'Table header lacks scope attribute',
                            suggestion: 'Add scope="col" for column headers or scope="row" for row headers',
                            code: getElementOuterHTML(header),
                            fix: `<th scope="col" ${getAttributesString(header, ['scope'])}>${header.innerHTML}</th>`
                        })
                    }
                })
            })
        }

        function checkColorContrast(doc, issues) {
            const elementsWithStyle = doc.querySelectorAll('[style*="color"], [style*="background"]');
            elementsWithStyle.forEach((element, index) => {
                const style = element.getAttribute('style');
                if ((style.includes('color:') || style.includes('background')) && (style.includes('#fff') || style.includes('white') || style.includes('#000') || style.includes('black'))) {
                    issues.notices.push({
                        type: 'potential-contrast-issue',
                        element: `${element.tagName.toLowerCase()} (${index + 1})`,
                        description: 'Element has inline color styling that might cause contrast issues',
                        suggestion: 'Ensure there is sufficient contrast between text and background colors (4.5:1 for normal text, 3:1 for large text)',
                        code: getElementOuterHTML(element)
                    })
                }
            });
            const potentialLowContrastClasses = ['light', 'faded', 'muted', 'subtle', 'pale', 'gray', 'grey', 'text-light', 'text-muted', 'text-faded', 'text-subtle'];
            potentialLowContrastClasses.forEach(className => {
                const elements = doc.querySelectorAll(`.${className}`);
                if (elements.length > 0) {
                    issues.notices.push({
                        type: 'potential-low-contrast-class',
                        element: `elements with class '${className}'`,
                        description: `Found ${elements.length} elements with class '${className}' that might have low contrast`,
                        suggestion: 'Check that text contrast meets WCAG requirements (4.5:1 for normal text, 3:1 for large text)',
                        code: `Multiple elements with class '${className}' detected`
                    })
                }
            })
        }

        function checkSemantic(doc, issues) {
            if (!doc.querySelector('main')) {
                issues.warnings.push({
                    type: 'missing-main',
                    element: 'document',
                    description: 'No main landmark found',
                    suggestion: 'Add a <main> element to mark the main content area of the page',
                    code: 'No <main> element found in the document',
                    fix: '<main>\n  <!-- Main content here -->\n</main>'
                })
            }
            if (!doc.querySelector('header, [role="banner"]')) {
                issues.notices.push({
                    type: 'missing-header',
                    element: 'document',
                    description: 'No header landmark found',
                    suggestion: 'Add a <header> element or element with role="banner" to mark the page header',
                    code: 'No <header> or [role="banner"] found in the document',
                    fix: '<header>\n  <!-- Header content here -->\n</header>'
                })
            }
            if (!doc.querySelector('nav, [role="navigation"]')) {
                issues.notices.push({
                    type: 'missing-nav',
                    element: 'document',
                    description: 'No navigation landmark found',
                    suggestion: 'Add a <nav> element or element with role="navigation" for main navigation',
                    code: 'No <nav> or [role="navigation"] found in the document',
                    fix: '<nav>\n  <!-- Navigation content here -->\n</nav>'
                })
            }
        }

        function checkPageTitle(doc, issues) {
            const title = doc.querySelector('title');
            if (!title) {
                issues.errors.push({
                    type: 'missing-title',
                    element: 'head',
                    description: 'Page is missing a title',
                    suggestion: 'Add a descriptive <title> element in the <head> section',
                    code: 'No <title> element found',
                    fix: '<title>Page title</title>'
                })
            } else if (title.textContent.trim() === '' || title.textContent.trim().toLowerCase() === 'untitled document') {
                issues.errors.push({
                    type: 'empty-title',
                    element: 'title',
                    description: 'Page title is empty or generic',
                    suggestion: 'Add a descriptive title that explains the purpose of the page',
                    code: getElementOuterHTML(title),
                    fix: '<title>Descriptive page title</title>'
                })
            }
        }

        function checkLinks(doc, issues) {
            const links = doc.querySelectorAll('a[href]');
            links.forEach((link, index) => {
                const href = link.getAttribute('href');
                if (href === '#') {
                    if (!link.hasAttribute('aria-label') && !link.hasAttribute('aria-labelledby') && link.textContent.trim().toLowerCase() === 'click here') {
                        issues.warnings.push({
                            type: 'generic-link-text',
                            element: `a (${index + 1})`,
                            description: 'Link uses generic text ("click here")',
                            suggestion: 'Use descriptive link text that indicates the destination or purpose',
                            code: getElementOuterHTML(link),
                            fix: `<a href="${href}" ${getAttributesString(link, ['href'])}>Specific destination name</a>`
                        })
                    }
                } else if (href && href.startsWith('javascript:')) {
                    issues.warnings.push({
                        type: 'javascript-link',
                        element: `a (${index + 1})`,
                        description: 'Link uses javascript: protocol in href attribute',
                        suggestion: 'Use proper event handlers instead of javascript: URLs for better accessibility',
                        code: getElementOuterHTML(link)
                    })
                }
            })
        }

        function checkKeyboardNavigation(doc, issues) {
            const interactiveElementsWithoutTabindex = doc.querySelectorAll('div[onclick], span[onclick], p[onclick]');
            interactiveElementsWithoutTabindex.forEach((element, index) => {
                if (!element.hasAttribute('tabindex')) {
                    issues.warnings.push({
                        type: 'onclick-without-keyboard',
                        element: `${element.tagName.toLowerCase()} (${index + 1})`,
                        description: 'Element has onclick handler but is not keyboard accessible',
                        suggestion: 'Add tabindex="0" to make the element focusable, or use a button instead',
                        code: getElementOuterHTML(element),
                        fix: `<${element.tagName.toLowerCase()} onclick="${element.getAttribute('onclick')}" tabindex="0" ${getAttributesString(element, ['onclick', 'tabindex'])}>${element.innerHTML}</${element.tagName.toLowerCase()}>`
                    })
                }
            });
            const tabindexGreaterThanZero = doc.querySelectorAll('[tabindex]');
            tabindexGreaterThanZero.forEach((element, index) => {
                const tabindex = parseInt(element.getAttribute('tabindex'));
                if (tabindex > 0) {
                    issues.warnings.push({
                        type: 'positive-tabindex',
                        element: `${element.tagName.toLowerCase()} (${index + 1})`,
                        description: `Element has tabindex="${tabindex}" which disrupts natural tab order`,
                        suggestion: 'Avoid using tabindex values greater than 0. Use 0 for interactive elements that are not natively focusable.',
                        code: getElementOuterHTML(element),
                        fix: `<${element.tagName.toLowerCase()} tabindex="0" ${getAttributesString(element, ['tabindex'])}>${element.innerHTML}</${element.tagName.toLowerCase()}>`
                    })
                }
            })
        }

        function getElementOuterHTML(element) {
            try {
                return element.outerHTML
            } catch (error) {
                return `<${element.tagName.toLowerCase()}>...</${element.tagName.toLowerCase()}>`
            }
        }

        function getAttributesString(element, excludeAttrs = []) {
            let attributes = '';
            for (let i = 0; i < element.attributes.length; i++) {
                const attr = element.attributes[i];
                if (!excludeAttrs.includes(attr.name)) {
                    attributes += ` ${attr.name}="${attr.value}"`
                }
            }
            return attributes
        }

        function displayResults(issues) {
            errorCount.textContent = issues.errors.length;
            if (issues.errors.length === 0) {
                errorsList.innerHTML = '<li class="no-issues">No errors found!</li>'
            } else {
                errorsList.innerHTML = '';
                issues.errors.forEach(issue => {
                    errorsList.appendChild(createIssueElement(issue))
                })
            }
            warningCount.textContent = issues.warnings.length;
            if (issues.warnings.length === 0) {
                warningsList.innerHTML = '<li class="no-issues">No warnings found!</li>'
            } else {
                warningsList.innerHTML = '';
                issues.warnings.forEach(issue => {
                    warningsList.appendChild(createIssueElement(issue))
                })
            }
            noticeCount.textContent = issues.notices.length;
            if (issues.notices.length === 0) {
                noticesList.innerHTML = '<li class="no-issues">No notices found!</li>'
            } else {
                noticesList.innerHTML = '';
                issues.notices.forEach(issue => {
                    noticesList.appendChild(createIssueElement(issue))
                })
            }
        }

        function createIssueElement(issue) {
            const li = document.createElement('li');
            const header = document.createElement('div');
            header.className = 'issue-header';
            const typeSpan = document.createElement('span');
            typeSpan.className = 'issue-type';
            typeSpan.textContent = issue.type;
            const elementSpan = document.createElement('span');
            elementSpan.className = 'issue-element';
            elementSpan.textContent = issue.element;
            header.appendChild(typeSpan);
            header.appendChild(elementSpan);
            const description = document.createElement('p');
            description.className = 'issue-description';
            description.textContent = issue.description;
            const suggestion = document.createElement('p');
            suggestion.className = 'issue-suggestion';
            suggestion.innerHTML = `<strong>Suggestion:</strong> ${issue.suggestion}`;
            const code = document.createElement('pre');
            code.className = 'issue-code';
            code.textContent = issue.code;
            li.appendChild(header);
            li.appendChild(description);
            li.appendChild(suggestion);
            li.appendChild(code);
            if (issue.fix) {
                const showFixBtn = document.createElement('button');
                showFixBtn.className = 'show-fix';
                showFixBtn.textContent = 'Show suggested fix';
                const fixDiv = document.createElement('div');
                fixDiv.className = 'issue-fix';
                fixDiv.style.display = 'none';
                const fixHeader = document.createElement('div');
                fixHeader.className = 'fix-header';
                fixHeader.textContent = 'Suggested Fix:';
                const fixCode = document.createElement('code');
                fixCode.textContent = issue.fix;
                fixDiv.appendChild(fixHeader);
                fixDiv.appendChild(fixCode);
                showFixBtn.addEventListener('click', () => {
                    if (fixDiv.style.display === 'none') {
                        fixDiv.style.display = 'block';
                        showFixBtn.textContent = 'Hide suggested fix'
                    } else {
                        fixDiv.style.display = 'none';
                        showFixBtn.textContent = 'Show suggested fix'
                    }
                });
                li.appendChild(showFixBtn);
                li.appendChild(fixDiv)
            }
            return li
        }

        function showResults() {
            resultsSection.style.display = 'block';
            resultsSection.scrollIntoView({behavior: 'smooth'})
        }

        function clearResults() {
            errorsList.innerHTML = '';
            warningsList.innerHTML = '';
            noticesList.innerHTML = '';
            errorCount.textContent = '0';
            warningCount.textContent = '0';
            noticeCount.textContent = '0'
        }

        function clearAll() {
            urlInput.value = '';
            htmlInput.value = '';
            resultsSection.style.display = 'none';
            clearResults();
            corsNotice.classList.remove('show');
            lastCheckedUrl = '';
            lastScannedHtml = '';
            lastScanResults = null
        }

        function copyResults() {
            if (!lastScanResults) {
                showToast('No results to copy', 'error');
                return
            }
            let resultsText = 'Web Accessibility Scan Results\n\n';
            if (lastCheckedUrl) {
                resultsText += `URL: ${lastCheckedUrl}\n\n`
            }
            resultsText += `Errors: ${errorCount.textContent}\n`;
            resultsText += `Warnings: ${warningCount.textContent}\n`;
            resultsText += `Notices: ${noticeCount.textContent}\n\n`;
            if (errorCount.textContent !== '0') {
                resultsText += 'ERRORS:\n';
                const errorItems = errorsList.querySelectorAll('li:not(.no-issues)');
                errorItems.forEach(item => {
                    const type = item.querySelector('.issue-type').textContent;
                    const element = item.querySelector('.issue-element').textContent;
                    const description = item.querySelector('.issue-description').textContent;
                    const suggestion = item.querySelector('.issue-suggestion').textContent.replace('Suggestion: ', '');
                    resultsText += `- ${type} (${element}): ${description}\n`;
                    resultsText += `  Suggestion: ${suggestion}\n\n`
                })
            }
            if (warningCount.textContent !== '0') {
                resultsText += 'WARNINGS:\n';
                const warningItems = warningsList.querySelectorAll('li:not(.no-issues)');
                warningItems.forEach(item => {
                    const type = item.querySelector('.issue-type').textContent;
                    const element = item.querySelector('.issue-element').textContent;
                    const description = item.querySelector('.issue-description').textContent;
                    const suggestion = item.querySelector('.issue-suggestion').textContent.replace('Suggestion: ', '');
                    resultsText += `- ${type} (${element}): ${description}\n`;
                    resultsText += `  Suggestion: ${suggestion}\n\n`
                })
            }
            if (noticeCount.textContent !== '0') {
                resultsText += 'NOTICES:\n';
                const noticeItems = noticesList.querySelectorAll('li:not(.no-issues)');
                noticeItems.forEach(item => {
                    const type = item.querySelector('.issue-type').textContent;
                    const element = item.querySelector('.issue-element').textContent;
                    const description = item.querySelector('.issue-description').textContent;
                    const suggestion = item.querySelector('.issue-suggestion').textContent.replace('Suggestion: ', '');
                    resultsText += `- ${type} (${element}): ${description}\n`;
                    resultsText += `  Suggestion: ${suggestion}\n\n`
                })
            }
            navigator.clipboard.writeText(resultsText).then(() => {
                showToast('Results copied to clipboard!', 'success')
            }).catch(err => {
                console.error('Failed to copy: ', err);
                showToast('Failed to copy results to clipboard', 'error')
            })
        }

        function downloadHtmlReport() {
            if (!lastScanResults) {
                showToast('No results to download', 'error');
                return
            }
            let reportHtml = `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessibility Report - ${new Date().toLocaleDateString()}</title>
    <style>
        body{font-family:system-ui,-apple-system,sans-serif;line-height:1.6;color:#333;margin:0;padding:20px;}
        h1{color:#4a6fa5;margin-bottom:10px;}
        .summary{background:#f8f9fa;padding:15px;border-radius:5px;margin:20px 0;border-left:4px solid #4a6fa5;}
        .category{margin:30px 0;border-top:4px solid;padding-top:10px;}
        .errors{border-color:#e74c3c;}
        .warnings{border-color:#f39c12;}
        .notices{border-color:#3498db;}
        .issue{margin-bottom:20px;padding:15px;background:#f8f9fa;border-radius:5px;border-left:4px solid #ddd;}
        .errors .issue{border-left-color:#e74c3c;}
        .warnings .issue{border-left-color:#f39c12;}
        .notices .issue{border-left-color:#3498db;}
        .issue-header{display:flex;justify-content:space-between;margin-bottom:10px;}
        .issue-type{font-weight:bold;color:#4a6fa5;}
        .issue-element{font-family:monospace;background:rgba(0,0,0,0.05);padding:2px 5px;border-radius:3px;}
        pre{background:#fff;padding:10px;border-radius:3px;overflow-x:auto;border:1px solid #ddd;}
        .fix{margin-top:10px;background:rgba(39,174,96,0.1);padding:10px;border-radius:3px;border:1px solid #27ae60;}
        .fix-header{color:#27ae60;font-weight:bold;margin-bottom:5px;}
        footer{text-align:center;margin-top:30px;color:#666;font-size:0.9rem;}
    </style>
</head>
<body>
    <h1>Web Accessibility Report</h1>
    <p>Generated on ${new Date().toLocaleString()}</p>
    ${lastScanResults.meta.url ? `<p>URL: ${lastScanResults.meta.url}</p>` : ''}
    ${lastScanResults.meta.documentTitle ? `<p>Page Title: ${lastScanResults.meta.documentTitle}</p>` : ''}

    <div class="summary">
        <p>Found ${lastScanResults.errors.length} errors, ${lastScanResults.warnings.length} warnings, and ${lastScanResults.notices.length} notices.</p>
    </div>
`;
            const generateIssueSection = (issues, title, className) => {
                if (issues.length === 0) {
                    return `
        <div class="category ${className}">
            <h2>${title}</h2>
            <p>No issues found!</p>
        </div>`
                }
                let issuesHtml = `
        <div class="category ${className}">
            <h2>${title}</h2>`;
                issues.forEach(issue => {
                    issuesHtml += `
            <div class="issue">
                <div class="issue-header">
                    <span class="issue-type">${issue.type}</span>
                    <span class="issue-element">${issue.element}</span>
                </div>
                <p>${issue.description}</p>
                <p><strong>Suggestion:</strong> ${issue.suggestion}</p>
                <pre>${issue.code}</pre>
                ${issue.fix ? `
                <div class="fix">
                    <div class="fix-header">Suggested Fix:</div>
                    <code>${issue.fix}</code>
                </div>` : ``}
            </div>`;
                });
                issuesHtml += `
        </div>`;
                return issuesHtml
            };
            reportHtml += generateIssueSection(lastScanResults.errors, 'Errors', 'errors');
            reportHtml += generateIssueSection(lastScanResults.warnings, 'Warnings', 'warnings');
            reportHtml += generateIssueSection(lastScanResults.notices, 'Notices', 'notices');
            reportHtml += `
    <footer>
        <p>Report generated by Web Accessibility Checker</p>
        <p>Based on WCAG 2.1 guidelines</p>
    </footer>
</body>
</html>`;
            downloadFile(reportHtml, 'accessibility-report.html', 'text/html')
        }

        function downloadJsonReport() {
            if (!lastScanResults) {
                showToast('No results to download', 'error');
                return
            }
            const jsonData = JSON.stringify(lastScanResults, null, 2);
            downloadFile(jsonData, 'accessibility-report.json', 'application/json')
        }

        function downloadCsvReport() {
            if (!lastScanResults) {
                showToast('No results to download', 'error');
                return
            }
            let csv = 'Type,Category,Element,Description,Suggestion\n';
            const addIssues = (issues, category) => {
                issues.forEach(issue => {
                    csv += `"${category}","${issue.type}","${issue.element}","${issue.description.replace(/"/g, '""')}","${issue.suggestion.replace(/"/g, '""')}"\n`
                })
            };
            addIssues(lastScanResults.errors, 'Error');
            addIssues(lastScanResults.warnings, 'Warning');
            addIssues(lastScanResults.notices, 'Notice');
            downloadFile(csv, 'accessibility-report.csv', 'text/csv')
        }

        function downloadFile(content, filename, contentType) {
            const blob = new Blob([content], {type: contentType});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast(`Downloaded ${filename}`, 'success')
        }

        function loadSampleUrl() {
            urlInput.value = 'https://example.com';
            fetchAndScanUrl()
        }

        function loadSampleHtml() {
            htmlInput.value = `<!DOCTYPE html>
<html>
<head>
    <title>Sample Page with Accessibility Issues</title>
    <style>
        .light-text { color: #aaaaaa; }
    </style>
</head>
<body>
    <h2>Welcome to our Website</h2>
    <img src="banner.jpg">

    <div>
        <h4>Main Content Section</h4>
        <p class="light-text">This text might be hard to read due to low contrast.</p>
        <a href="#"></a>
        <button></button>
    </div>

    <div>
        <h3>Contact Form</h3>
        <form>
            <input type="text" placeholder="Name">
            <input type="email" placeholder="Email">
            <select>
                <option>Select an option</option>
            </select>
            <button>Submit</button>
        </form>
    </div>

    <table>
        <tr>
            <td>Product</td>
            <td>Price</td>
        </tr>
        <tr>
            <td>Item 1</td>
            <td>$19.99</td>
        </tr>
    </table>

    <div onclick="alert('clicked')">Click me</div>
</body>
</html>`;
            scanHtml()
        }

        function displayError(title, message) {
            clearResults();
            issues = {
                errors: [{
                    type: 'scanning-error',
                    element: 'document',
                    description: title,
                    suggestion: message,
                    code: 'N/A'
                }], warnings: [], notices: [], meta: {timestamp: new Date().toISOString()}
            };
            lastScanResults = issues;
            displayResults(issues)
        }

        function setActiveTab(tabId) {
            tabs.forEach(tab => {
                if (tab.getAttribute('data-tab') === tabId) {
                    tab.click()
                }
            })
        }

        function showToast(message, type = 'success') {
            toast.className = `toast toast-${type}`;
            toastMessage.textContent = message;
            const icon = toast.querySelector('.toast-icon');
            if (type === 'success') {
                icon.className = 'bi bi-check-circle-fill toast-icon'
            } else {
                icon.className = 'bi bi-exclamation-circle-fill toast-icon'
            }
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show')
            }, 3000)
        }

        function showScanTooltip() {
            scanTooltip.style.display = 'flex';
            setTimeout(() => {
                scanTooltip.style.display = 'none'
            }, 2500)
        }

        function showShortcutsModal() {
            shortcutsModal.style.display = 'flex'
        }

        function hideShortcutsModal() {
            shortcutsModal.style.display = 'none'
        }
    });
</script>
<script src="../logo.js"></script>
</body>
</html>