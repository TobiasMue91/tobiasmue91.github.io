<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynonymFinder</title>
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“–</text></svg>">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/json5/2.2.3/index.min.js"
            integrity="sha512-44jdhc+R2TFfzBflS3/dGNEABiNUxBkkrqwO7GWTvGsj3HkQNr3GESvI9PUvAxmqxSnTosR0Ij9y3+o+6J1hig=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f1f5f9;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            line-height: 1.5
        }

        .container {
            width: 100%;
            max-width: 520px;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(15, 23, 42, 0.08);
            padding: 32px
        }

        h1 {
            font-size: 26px;
            font-weight: 700;
            color: #0f172a;
            text-align: center;
            margin-bottom: 6px;
            letter-spacing: -0.5px
        }

        .subtitle {
            text-align: center;
            color: #64748b;
            font-size: 14px;
            margin-bottom: 28px
        }

        .input-wrap {
            position: relative;
            margin-bottom: 20px
        }

        .input-wrap input {
            width: 100%;
            padding: 14px 44px 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            color: #0f172a;
            transition: border-color .2s, box-shadow .2s
        }

        .input-wrap input::placeholder {
            color: #94a3b8
        }

        .input-wrap input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15)
        }

        .clear-btn {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            font-size: 20px;
            padding: 4px 8px;
            display: none;
            border-radius: 4px
        }

        .clear-btn.show {
            display: block
        }

        .clear-btn:hover {
            color: #64748b;
            background: #f1f5f9
        }

        .clear-btn:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px
        }

        .slider-section {
            margin-bottom: 20px
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px
        }

        .slider-label {
            font-size: 14px;
            font-weight: 500;
            color: #334155
        }

        .slider-value {
            font-size: 14px;
            color: #3b82f6;
            font-weight: 600;
            min-width: 36px;
            text-align: right
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e2e8f0;
            -webkit-appearance: none;
            cursor: pointer
        }

        input[type="range"]:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 4px;
            border-radius: 3px
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 3px solid #fff;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4)
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 3px solid #fff;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4)
        }

        .advanced-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: none;
            color: #64748b;
            font-size: 14px;
            cursor: pointer;
            padding: 8px 0;
            margin-bottom: 4px;
            border-radius: 6px
        }

        .advanced-toggle:hover {
            color: #3b82f6
        }

        .advanced-toggle:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px
        }

        .advanced-toggle svg {
            transition: transform .2s
        }

        .advanced-toggle.open svg {
            transform: rotate(180deg)
        }

        .advanced-panel {
            display: grid;
            gap: 14px;
            padding: 0;
            background: #f8fafc;
            border-radius: 10px;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height .3s ease, opacity .2s ease, padding .3s ease, margin .3s ease
        }

        .advanced-panel.show {
            max-height: 280px;
            opacity: 1;
            padding: 16px;
            margin-bottom: 20px
        }

        .option-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px
        }

        .option-label {
            font-size: 13px;
            color: #475569
        }

        .option-select {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 13px;
            color: #334155;
            background: #fff;
            cursor: pointer;
            min-width: 140px
        }

        .option-select:hover {
            border-color: #cbd5e1
        }

        .option-select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1)
        }

        .submit-btn {
            width: 100%;
            padding: 14px;
            background: #3b82f6;
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background .2s, transform .1s
        }

        .submit-btn:hover:not(:disabled) {
            background: #2563eb
        }

        .submit-btn:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px
        }

        .submit-btn:active:not(:disabled) {
            transform: scale(0.985)
        }

        .submit-btn:disabled {
            background: #94a3b8;
            cursor: not-allowed
        }

        .results {
            margin-top: 24px
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px
        }

        .results-title {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600
        }

        .results-meta {
            display: flex;
            align-items: center;
            gap: 12px
        }

        .results-count {
            font-size: 12px;
            color: #94a3b8
        }

        .copy-all {
            font-size: 12px;
            color: #3b82f6;
            background: none;
            border: none;
            cursor: pointer;
            padding: 2px 0
        }

        .copy-all:hover {
            text-decoration: underline
        }

        .copy-all:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
            border-radius: 2px
        }

        .results-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px
        }

        .synonym-tag {
            padding: 9px 15px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            color: #334155;
            cursor: pointer;
            transition: all .15s;
            user-select: none
        }

        .synonym-tag:hover {
            background: #eff6ff;
            border-color: #bfdbfe;
            color: #1e40af
        }

        .synonym-tag:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px
        }

        .synonym-tag:active {
            transform: scale(0.97)
        }

        .loading {
            display: flex;
            gap: 6px;
            justify-content: center;
            padding: 24px
        }

        .loading span {
            width: 10px;
            height: 10px;
            background: #3b82f6;
            border-radius: 50%;
            animation: bounce .6s infinite alternate
        }

        .loading span:nth-child(2) {
            animation-delay: .2s
        }

        .loading span:nth-child(3) {
            animation-delay: .4s
        }

        @keyframes bounce {
            to {
                opacity: .3;
                transform: translateY(-8px)
            }
        }

        .error {
            text-align: center;
            padding: 20px;
            background: #fef2f2;
            border-radius: 10px;
            border: 1px solid #fecaca
        }

        .error-msg {
            color: #b91c1c;
            font-size: 14px;
            margin-bottom: 12px
        }

        .error-retry {
            background: #b91c1c;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer
        }

        .error-retry:hover {
            background: #991b1b
        }

        .error-retry:focus {
            outline: 2px solid #b91c1c;
            outline-offset: 2px
        }

        .toast {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%) translateY(80px);
            background: #0f172a;
            color: #fff;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            opacity: 0;
            transition: all .25s ease;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            white-space: nowrap
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1
        }

        .help-section {
            margin-top: 28px;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px
        }

        .help-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            background: none;
            border: none;
            color: #64748b;
            font-size: 14px;
            cursor: pointer;
            padding: 4px 0;
            border-radius: 6px
        }

        .help-toggle:hover {
            color: #3b82f6
        }

        .help-toggle:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px
        }

        .help-toggle span:last-child {
            font-size: 18px;
            line-height: 1
        }

        .help-content {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height .3s ease, opacity .2s ease, margin .3s ease
        }

        .help-content.show {
            max-height: 300px;
            opacity: 1;
            margin-top: 16px
        }

        .help-content p {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 14px
        }

        .help-content ul {
            font-size: 13px;
            color: #64748b;
            padding-left: 20px
        }

        .help-content li {
            margin-bottom: 8px
        }

        .help-content li:last-child {
            margin-bottom: 0
        }

        @media (max-width: 480px) {
            .container {
                padding: 24px
            }

            .option-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px
            }

            .option-select {
                width: 100%
            }

            .toast {
                left: 20px;
                right: 20px;
                transform: translateX(0) translateY(80px)
            }

            .toast.show {
                transform: translateX(0) translateY(0)
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>SynonymFinder</h1>
    <p class="subtitle">Find the perfect word for any context</p>
    <div class="input-wrap">
        <input type="text" id="input" placeholder="Enter a word..." autocomplete="off"
               aria-label="Word to find synonyms for" spellcheck="false" maxlength="50">
        <button class="clear-btn" id="clearBtn" type="button" aria-label="Clear input">Ã—</button>
    </div>
    <div class="slider-section">
        <div class="slider-header">
            <label class="slider-label" for="creativity">Creativity</label>
            <span class="slider-value" id="creativityVal" aria-live="polite">25%</span>
        </div>
        <input type="range" id="creativity" min="0" max="100" step="5" value="25" aria-describedby="creativityVal">
    </div>
    <button class="advanced-toggle" id="advToggle" type="button" aria-expanded="false" aria-controls="advPanel">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
             stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 9l6 6 6-6"/>
        </svg>
        Advanced Options
    </button>
    <div class="advanced-panel" id="advPanel" role="region" aria-label="Advanced options">
        <div class="option-row">
            <label class="option-label" for="numSynonyms">Number of synonyms</label>
            <select class="option-select" id="numSynonyms">
                <option value="5">5</option>
                <option value="10" selected>10</option>
                <option value="15">15</option>
                <option value="20">20</option>
            </select>
        </div>
        <div class="option-row">
            <label class="option-label" for="academicLevel">Academic level</label>
            <select class="option-select" id="academicLevel">
                <option value="casual">Casual</option>
                <option value="standard" selected>Standard</option>
                <option value="academic">Academic</option>
                <option value="technical">Technical</option>
            </select>
        </div>
        <div class="option-row">
            <label class="option-label" for="precision">Precision</label>
            <select class="option-select" id="precision">
                <option value="exact">Exact meaning</option>
                <option value="balanced" selected>Balanced</option>
                <option value="broad">Related concepts</option>
            </select>
        </div>
        <div class="option-row">
            <label class="option-label" for="partOfSpeech">Part of speech</label>
            <select class="option-select" id="partOfSpeech">
                <option value="any" selected>Any</option>
                <option value="noun">Noun</option>
                <option value="verb">Verb</option>
                <option value="adjective">Adjective</option>
                <option value="adverb">Adverb</option>
            </select>
        </div>
    </div>
    <button class="submit-btn" id="submitBtn" type="button" disabled>Find Synonyms</button>
    <div class="results" id="results" role="region" aria-live="polite" aria-label="Synonym results"></div>
    <div class="help-section">
        <button class="help-toggle" id="helpToggle" type="button" aria-expanded="false" aria-controls="helpContent">
            <span>How to use</span>
            <span id="helpIcon" aria-hidden="true">+</span>
        </button>
        <div class="help-content" id="helpContent">
            <p>SynonymFinder helps you discover alternative words tailored to your writing context, from casual
                conversation to academic papers.</p>
            <ul>
                <li>Enter any word and press Enter or click the button to search</li>
                <li>Adjust creativityâ€”lower values give conventional synonyms, higher values offer more inventive
                    alternatives
                </li>
                <li>Expand Advanced Options to filter by vocabulary level, semantic precision, or part of speech</li>
                <li>Click any result to copy it, or use "Copy all" to grab the entire list</li>
            </ul>
        </div>
    </div>
</div>
<div class="toast" id="toast" role="status" aria-live="polite"></div>
<script>
    (function () {
        const $ = id => document.getElementById(id);
        const input = $('input'), clearBtn = $('clearBtn'), creativity = $('creativity'),
            creativityVal = $('creativityVal'), advToggle = $('advToggle'), advPanel = $('advPanel'),
            submitBtn = $('submitBtn'), results = $('results'), helpToggle = $('helpToggle'),
            helpContent = $('helpContent'), helpIcon = $('helpIcon'), toast = $('toast');
        let toastTimeout = null, currentSynonyms = [];
        const escapeHtml = s => s.replace(/[&<>"']/g, c => ({
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#39;'
        })[c]);
        const updateSubmitState = () => {
            submitBtn.disabled = !input.value.trim() || submitBtn.textContent === 'Searching...'
        };
        input.addEventListener('input', () => {
            clearBtn.classList.toggle('show', input.value.length > 0);
            updateSubmitState()
        });
        clearBtn.addEventListener('click', () => {
            input.value = '';
            clearBtn.classList.remove('show');
            updateSubmitState();
            input.focus()
        });
        creativity.addEventListener('input', () => {
            creativityVal.textContent = creativity.value + '%'
        });
        advToggle.addEventListener('click', () => {
            const open = advPanel.classList.toggle('show');
            advToggle.classList.toggle('open', open);
            advToggle.setAttribute('aria-expanded', open)
        });
        helpToggle.addEventListener('click', () => {
            const open = helpContent.classList.toggle('show');
            helpToggle.setAttribute('aria-expanded', open);
            helpIcon.textContent = open ? 'âˆ’' : '+'
        });
        input.addEventListener('keydown', e => {
            if (e.key === 'Enter' && !submitBtn.disabled) findSynonyms()
        });
        submitBtn.addEventListener('click', findSynonyms);
        results.addEventListener('click', e => {
            if (e.target.classList.contains('synonym-tag')) {
                const w = e.target.dataset.word;
                if (w) copyText(w, 'Copied "' + w + '"')
            }
            if (e.target.classList.contains('copy-all') && currentSynonyms.length) copyText(currentSynonyms.join(', '), 'Copied all synonyms')
            if (e.target.classList.contains('error-retry')) findSynonyms()
        });
        results.addEventListener('keydown', e => {
            if (e.target.classList.contains('synonym-tag') && (e.key === 'Enter' || e.key === ' ')) {
                e.preventDefault();
                const w = e.target.dataset.word;
                if (w) copyText(w, 'Copied "' + w + '"')
            }
        });

        function showToast(msg) {
            if (toastTimeout) clearTimeout(toastTimeout);
            toast.textContent = msg;
            toast.classList.add('show');
            toastTimeout = setTimeout(() => toast.classList.remove('show'), 2200)
        }

        function copyText(text, msg) {
            navigator.clipboard.writeText(text).then(() => showToast(msg)).catch(() => showToast('Failed to copy'))
        }

        function setLoading(loading) {
            submitBtn.disabled = loading || !input.value.trim();
            submitBtn.textContent = loading ? 'Searching...' : 'Find Synonyms';
            if (loading) results.innerHTML = '<div class="loading"><span></span><span></span><span></span></div>';
        }

        function showError(msg) {
            results.innerHTML = '<div class="error"><div class="error-msg">' + escapeHtml(msg) + '</div><button class="error-retry" type="button">Try Again</button></div>';
        }

        function renderResults(synonyms) {
            currentSynonyms = synonyms;
            const n = synonyms.length;
            results.innerHTML = '<div class="results-header"><span class="results-title">Results</span><div class="results-meta"><span class="results-count">' + n + ' synonym' + (n !== 1 ? 's' : '') + '</span><button class="copy-all" type="button">Copy all</button></div></div><div class="results-grid">' + synonyms.map(s => '<button class="synonym-tag" type="button" data-word="' + escapeHtml(s) + '" tabindex="0">' + escapeHtml(s) + '</button>').join('') + '</div>';
        }

        async function findSynonyms() {
            const word = input.value.trim();
            if (!word) return;
            const num = parseInt($('numSynonyms').value, 10);
            const level = $('academicLevel').value;
            const prec = $('precision').value;
            const pos = $('partOfSpeech').value;
            const temp = (creativity.value / 100) * 2;
            setLoading(true);
            const levelMap = {
                casual: 'everyday conversational',
                standard: 'general-purpose',
                academic: 'scholarly and formal',
                technical: 'specialized and technical'
            };
            const precMap = {
                exact: 'very close in meaning',
                balanced: 'similar in meaning',
                broad: 'loosely related or conceptually connected'
            };
            const posNote = pos !== 'any' ? ' All synonyms must be ' + pos + 's.' : '';
            const systemMsg = 'I am the SynonymFinder API. I find synonyms in the same language as the input word. I respond only with valid JSON: {"synonyms":["word1","word2",...]}';
            const userMsg = 'Find exactly ' + num + ' synonyms for "' + word + '". Use ' + levelMap[level] + ' vocabulary. Each should be ' + precMap[prec] + ' to the original.' + posNote + ' Return only JSON.';
            try {
                const res = await fetch('https://chatgpt.tobiasmue91.workers.dev/', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json', 'Accept': '*/*'},
                    body: JSON.stringify({
                        model: 'gpt-4o-mini',
                        max_tokens: 500,
                        temperature: temp,
                        messages: [{role: 'assistant', content: systemMsg}, {role: 'user', content: userMsg}]
                    })
                });
                if (!res.ok) throw new Error('API request failed');
                const data = await res.json();
                const content = data.choices?.[0]?.message?.content || '';
                const start = content.indexOf('{'), end = content.lastIndexOf('}') + 1;
                if (start === -1 || end === 0) throw new Error('Invalid response');
                const parsed = JSON5.parse(content.substring(start, end));
                const synonyms = parsed.synonyms;
                if (!Array.isArray(synonyms) || !synonyms.length) throw new Error('No synonyms found');
                renderResults(synonyms.slice(0, num).map(s => String(s).trim()).filter(Boolean));
            } catch (err) {
                console.error('SynonymFinder:', err);
                let msg = 'Unable to find synonyms. Please try again.';
                if (err.message.includes('rate') || err.message.includes('limit')) msg = 'Too many requests. Please wait a moment.';
                else if (err.name === 'TypeError') msg = 'Connection error. Check your internet.';
                showError(msg);
            } finally {
                setLoading(false);
            }
        }

        input.focus();
    })();
</script>
<script src="../logo.js"></script>
</body>
</html>