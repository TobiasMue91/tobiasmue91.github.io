<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>AI Text Naturalizer | Human-Like AI Content</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¤–</text></svg>">
    <meta name="description" content="Transform AI-generated content into natural, human-like text. Avoid AI detection and improve readability with our professional text naturalizer.">
    <meta name="keywords" content="AI text naturalizer, AI content, human-like text, avoid AI detection, improve readability">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: {
                    primary: {
                        50: '#f0f9ff',
                        100: '#e0f2fe',
                        200: '#bae6fd',
                        300: '#7dd3fc',
                        400: '#38bdf8',
                        500: '#0ea5e9',
                        600: '#0284c7',
                        700: '#0369a1',
                        800: '#075985',
                        900: '#0c4a6e'
                    },
                    secondary: {
                        50: '#ecfdf5',
                        100: '#d1fae5',
                        200: '#a7f3d0',
                        300: '#6ee7b7',
                        400: '#34d399',
                        500: '#10b981',
                        600: '#059669',
                        700: '#047857',
                        800: '#065f46',
                        900: '#064e3b'
                    },
                    neutral: {
                        50: '#f9fafb',
                        100: '#f3f4f6',
                        200: '#e5e7eb',
                        300: '#d1d5db',
                        400: '#9ca3af',
                        500: '#6b7280',
                        600: '#4b5563',
                        700: '#374151',
                        800: '#1f2937',
                        900: '#111827'
                    }
                },
                fontFamily: {sans: ['Inter', 'system-ui', 'sans-serif'], mono: ['monospace']},
                boxShadow: {
                    'custom': '0 4px 20px -2px rgba(0, 0, 0, 0.1)',
                    'custom-dark': '0 4px 20px -2px rgba(0, 0, 0, 0.25)'
                }
            }
        }
    }</script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}
        .fade-in{animation:fadeIn 0.3s ease-in-out}
        .pulse{animation:pulse 1.5s ease-in-out infinite}
        .transition-all{transition:all 0.2s ease-in-out}
        .scrollbar-thin::-webkit-scrollbar{width:4px}
        .scrollbar-thin::-webkit-scrollbar-track{background:transparent}
        .dark .scrollbar-thin::-webkit-scrollbar-thumb{background-color:rgba(255,255,255,0.15);border-radius:3px}
        .scrollbar-thin::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.15);border-radius:3px}
    </style>
</head>
<body class="min-h-screen transition-colors duration-300 bg-neutral-50 dark:bg-neutral-900 text-neutral-800 dark:text-neutral-100 font-sans">
<div class="container mx-auto px-4 py-6 max-w-5xl">
    <header class="mb-6 fade-in">
        <div class="flex justify-between items-center mb-2">
            <h1 class="text-3xl md:text-4xl font-bold text-primary-600 dark:text-primary-400">AI Text Naturalizer</h1>
            <button id="themeToggle" class="p-2 rounded-full bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-200 hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors" aria-label="Toggle dark mode"><i class="fa-solid fa-moon dark:hidden"></i><i class="fa-solid fa-sun hidden dark:block"></i></button>
        </div>
        <p class="text-neutral-600 dark:text-neutral-400 text-lg">Transform AI-generated content into natural, human-like text</p>
        <div class="mt-3 w-full h-1 bg-gradient-to-r from-primary-400 to-secondary-400 rounded"></div>
    </header>

    <div class="bg-white dark:bg-neutral-800 rounded-xl shadow-custom dark:shadow-custom-dark p-5 space-y-5 fade-in">
        <!-- Input Section -->
        <div class="space-y-3">
            <div class="flex items-center justify-between mb-2">
                <h2 class="text-xl font-semibold text-neutral-700 dark:text-neutral-200">Input Text</h2>
                <div class="flex space-x-2">
                    <button id="exampleBtn" class="text-sm px-3 py-1 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 hover:bg-primary-200 dark:hover:bg-primary-800 transition-colors" aria-label="Load example text"><i class="fa-solid fa-lightbulb mr-1"></i> Examples</button>
                    <button onclick="clearText()" class="text-sm px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-600 transition-colors" aria-label="Clear text"><i class="fa-solid fa-eraser mr-1"></i> Clear</button>
                </div>
            </div>
            <div class="relative">
                <textarea id="inputText" class="w-full h-48 p-4 bg-neutral-50 dark:bg-neutral-900 text-neutral-800 dark:text-neutral-100 rounded-lg border border-neutral-300 dark:border-neutral-700 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-30 transition scrollbar-thin" placeholder="Paste AI-generated text here or select an example..." aria-label="Input text"></textarea>
                <div class="absolute bottom-3 right-3">
                    <button onclick="copyToClipboard('inputText')" class="text-sm p-1.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors" aria-label="Copy input to clipboard"><i class="fa-solid fa-copy"></i></button>
                </div>
            </div>
            <div class="flex justify-between text-sm text-neutral-500 dark:text-neutral-400">
                <span>Words: <span id="wordCount" class="font-medium">0</span></span>
                <span>Characters: <span id="charCount" class="font-medium">0</span> / <span class="font-medium">5000</span></span>
            </div>
            <div id="characterAlert" class="hidden text-red-500 text-sm">
                <i class="fa-solid fa-exclamation-circle mr-1"></i> Character limit approaching. Maximum is 5000 characters.
            </div>
        </div>

        <!-- Settings Panel -->
        <div class="bg-neutral-100 dark:bg-neutral-800 rounded-lg p-4">
            <h2 class="text-xl font-semibold text-neutral-700 dark:text-neutral-200 mb-3">Naturalization Settings</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-4">
                <div>
                    <label for="modificationLevel" class="block mb-2 text-neutral-700 dark:text-neutral-300 font-medium">Modification Level: <span id="modificationLevelDisplay" class="font-bold text-primary-600 dark:text-primary-400">5</span></label>
                    <div class="flex items-center space-x-2">
                        <span class="text-xs text-neutral-500">Subtle</span>
                        <input type="range" id="modificationLevel" min="1" max="10" value="5" class="w-full h-2 bg-neutral-300 dark:bg-neutral-600 rounded-lg appearance-none cursor-pointer accent-primary-500" oninput="document.getElementById('modificationLevelDisplay').textContent=this.value" aria-label="Modification level">
                        <span class="text-xs text-neutral-500">Strong</span>
                    </div>
                    <p class="text-xs text-neutral-500 mt-1">Controls how much the text structure and wording will change</p>
                </div>
                <div>
                    <label for="formalityLevel" class="block mb-2 text-neutral-700 dark:text-neutral-300 font-medium">Formality Level: <span id="formalityLevelDisplay" class="font-bold text-primary-600 dark:text-primary-400">5</span></label>
                    <div class="flex items-center space-x-2">
                        <span class="text-xs text-neutral-500">Casual</span>
                        <input type="range" id="formalityLevel" min="1" max="10" value="5" class="w-full h-2 bg-neutral-300 dark:bg-neutral-600 rounded-lg appearance-none cursor-pointer accent-primary-500" oninput="document.getElementById('formalityLevelDisplay').textContent=this.value" aria-label="Formality level">
                        <span class="text-xs text-neutral-500">Formal</span>
                    </div>
                    <p class="text-xs text-neutral-500 mt-1">Adjusts the tone from conversational to professional</p>
                </div>
            </div>
            <div class="mb-4">
                <label for="patternsToChange" class="block mb-2 text-neutral-700 dark:text-neutral-300 font-medium">Patterns to Change</label>
                <input type="text" id="patternsToChange" class="w-full p-3 bg-neutral-50 dark:bg-neutral-900 text-neutral-800 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 rounded-lg focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-30 transition" placeholder="e.g. AI-generated, machine learning, however, therefore" aria-label="Patterns to change">
                <p class="text-xs text-neutral-500 mt-1">Comma-separated terms or phrases that should be rewritten</p>
            </div>
            <!-- Presets Manager -->
            <div class="flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-3">
                <div class="flex-grow">
                    <input type="text" id="presetName" class="w-full p-3 bg-neutral-50 dark:bg-neutral-900 text-neutral-800 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 rounded-lg focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-30 transition" placeholder="New preset name" aria-label="Preset name">
                </div>
                <div class="flex space-x-2">
                    <button onclick="savePreset()" class="bg-secondary-500 hover:bg-secondary-600 text-white font-medium py-2 px-4 rounded-lg transition flex items-center"><i class="fa-solid fa-save mr-2"></i> Save</button>
                    <div class="relative">
                        <select id="presetSelect" class="appearance-none bg-neutral-50 dark:bg-neutral-900 text-neutral-800 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 rounded-lg py-2 px-4 pr-8 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-30 transition" aria-label="Load preset">
                            <option value="">Load Preset</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-neutral-600 dark:text-neutral-400">
                            <i class="fa-solid fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                    <button id="deletePresetBtn" onclick="deletePreset()" class="bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-3 rounded-lg transition flex items-center disabled:opacity-50 disabled:pointer-events-none" aria-label="Delete preset" disabled><i class="fa-solid fa-trash-alt"></i></button>
                </div>
            </div>
        </div>

        <!-- Action Button -->
        <div class="flex justify-center">
            <button id="naturalizeButton" onclick="naturalizeText()" class="bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5 flex items-center" aria-label="Naturalize text"><i class="fa-solid fa-wand-magic-sparkles mr-2"></i><span>Naturalize Text</span></button>
        </div>

        <!-- Results Section -->
        <div class="mt-5">
            <div class="flex items-center justify-between mb-2">
                <h2 class="text-xl font-semibold text-neutral-700 dark:text-neutral-200">Naturalized Output</h2>
                <div id="naturalScore" class="hidden bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-3 py-1 rounded-full text-sm font-medium">
                    <i class="fa-solid fa-check-circle mr-1"></i> Natural Score: <span id="scoreValue">0</span>/10
                </div>
            </div>
            <div class="relative">
                <textarea id="outputText" class="w-full h-48 p-4 bg-neutral-50 dark:bg-neutral-900 text-neutral-800 dark:text-neutral-100 rounded-lg border border-neutral-300 dark:border-neutral-700 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-30 transition scrollbar-thin" placeholder="Naturalized text will appear here..." readonly aria-label="Output text"></textarea>
                <div class="absolute bottom-3 right-3">
                    <button onclick="copyToClipboard('outputText')" class="text-sm p-1.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors" aria-label="Copy output to clipboard"><i class="fa-solid fa-copy"></i></button>
                </div>
            </div>
            <div id="outputStats" class="flex justify-between text-sm text-neutral-500 dark:text-neutral-400 mt-2 hidden">
                <span>Words: <span id="outputWordCount" class="font-medium">0</span></span>
                <span>Characters: <span id="outputCharCount" class="font-medium">0</span></span>
            </div>
        </div>
    </div>
</div>

<!-- Examples Modal -->
<div id="examplesModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white dark:bg-neutral-800 p-5 rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-neutral-800 dark:text-neutral-100">Example Texts</h3>
            <button id="closeExamplesBtn" class="text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"><i class="fa-solid fa-times text-xl"></i></button>
        </div>
        <div class="space-y-3">
            <div class="p-4 bg-neutral-100 dark:bg-neutral-700 rounded-lg cursor-pointer hover:bg-neutral-200 dark:hover:bg-neutral-600 transition-colors" data-example="academic">
                <h4 class="font-semibold text-neutral-800 dark:text-neutral-100 mb-2">Academic Style</h4>
                <p class="text-neutral-600 dark:text-neutral-400 text-sm">This paper explores the implications of artificial intelligence on modern society. The research indicates that AI systems demonstrate significant utility across various domains, including healthcare, transportation, and education.</p>
            </div>
            <div class="p-4 bg-neutral-100 dark:bg-neutral-700 rounded-lg cursor-pointer hover:bg-neutral-200 dark:hover:bg-neutral-600 transition-colors" data-example="business">
                <h4 class="font-semibold text-neutral-800 dark:text-neutral-100 mb-2">Business Report</h4>
                <p class="text-neutral-600 dark:text-neutral-400 text-sm">Our quarterly analysis demonstrates a 15% increase in revenue compared to the previous fiscal period. The implementation of new customer acquisition strategies has yielded positive results, as evidenced by the 22% growth in our user base.</p>
            </div>
            <div class="p-4 bg-neutral-100 dark:bg-neutral-700 rounded-lg cursor-pointer hover:bg-neutral-200 dark:hover:bg-neutral-600 transition-colors" data-example="creative">
                <h4 class="font-semibold text-neutral-800 dark:text-neutral-100 mb-2">Creative Writing</h4>
                <p class="text-neutral-600 dark:text-neutral-400 text-sm">The moon cast silvery light across the tranquil lake, illuminating the surrounding pine trees. In the distance, the silhouette of mountains created a jagged horizon against the star-studded sky. Nature's symphony played softlyâ€”crickets chirping and gentle waves lapping at the shore.</p>
            </div>
        </div>
    </div>
</div>

<!-- Loading Overlay -->
<div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" aria-hidden="true">
    <div class="bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-xl flex flex-col items-center">
        <div class="w-16 h-16 border-4 border-neutral-300 dark:border-neutral-600 border-t-primary-500 rounded-full animate-spin mb-4"></div>
        <p class="text-neutral-700 dark:text-neutral-300 font-medium">Naturalizing text...</p>
        <p class="text-neutral-500 dark:text-neutral-400 text-sm mt-2">This may take a few moments</p>
    </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="fixed bottom-4 right-4 bg-neutral-800 dark:bg-neutral-700 text-white p-3 rounded-lg shadow-lg transition-opacity duration-300 opacity-0 pointer-events-none max-w-xs z-50 flex items-center" role="alert" aria-live="assertive">
    <div id="toastIcon" class="mr-3 text-green-400"><i class="fa-solid fa-check-circle"></i></div>
    <div id="toastMessage">Message here</div>
</div>

<script>
    // Dark mode handling
    function initTheme() {
        if (localStorage.getItem('darkMode') === 'true' || (localStorage.getItem('darkMode') === null && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    }

    function toggleTheme() {
        if (document.documentElement.classList.contains('dark')) {
            document.documentElement.classList.remove('dark');
            localStorage.setItem('darkMode', 'false');
        } else {
            document.documentElement.classList.add('dark');
            localStorage.setItem('darkMode', 'true');
        }
    }

    // Word & character count
    function updateWordCount() {
        const text = document.getElementById("inputText").value;
        const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
        document.getElementById("wordCount").textContent = wordCount;

        const charCount = text.length;
        document.getElementById("charCount").textContent = charCount;

        // Show warning when approaching character limit
        if (charCount > 4000 && charCount <= 5000) {
            document.getElementById("characterAlert").classList.remove("hidden");
        } else {
            document.getElementById("characterAlert").classList.add("hidden");
        }

        // Add red highlight when over limit
        if (charCount > 5000) {
            document.getElementById("inputText").classList.add("border-red-500");
            document.getElementById("charCount").classList.add("text-red-500");
        } else {
            document.getElementById("inputText").classList.remove("border-red-500");
            document.getElementById("charCount").classList.remove("text-red-500");
        }

        localStorage.setItem("inputText", text);
    }

    // Update output stats
    function updateOutputStats() {
        const text = document.getElementById("outputText").value;
        if (!text) {
            document.getElementById("outputStats").classList.add("hidden");
            document.getElementById("naturalScore").classList.add("hidden");
            return;
        }

        const wordCount = text.trim().split(/\s+/).length;
        document.getElementById("outputWordCount").textContent = wordCount;
        document.getElementById("outputCharCount").textContent = text.length;
        document.getElementById("outputStats").classList.remove("hidden");
    }

    // Copy to clipboard functionality
    function copyToClipboard(elementId) {
        const element = document.getElementById(elementId);
        if (!element.value) {
            showToast("Nothing to copy", "warning");
            return;
        }

        element.select();
        document.execCommand("copy");
        showToast("Copied to clipboard", "success");
    }

    // Toast notifications
    function showToast(message, type = "success") {
        const toast = document.getElementById("toast");
        const toastMessage = document.getElementById("toastMessage");
        const toastIcon = document.getElementById("toastIcon");

        // Set message
        toastMessage.textContent = message;

        // Set icon based on type
        if (type === "success") {
            toastIcon.innerHTML = '<i class="fa-solid fa-check-circle"></i>';
            toastIcon.className = "mr-3 text-green-400";
        } else if (type === "error") {
            toastIcon.innerHTML = '<i class="fa-solid fa-exclamation-circle"></i>';
            toastIcon.className = "mr-3 text-red-400";
        } else if (type === "warning") {
            toastIcon.innerHTML = '<i class="fa-solid fa-exclamation-triangle"></i>';
            toastIcon.className = "mr-3 text-yellow-400";
        } else if (type === "info") {
            toastIcon.innerHTML = '<i class="fa-solid fa-info-circle"></i>';
            toastIcon.className = "mr-3 text-blue-400";
        }

        // Show toast
        toast.classList.remove("opacity-0");
        toast.classList.add("opacity-100");

        // Hide after timeout
        setTimeout(() => {
            toast.classList.remove("opacity-100");
            toast.classList.add("opacity-0");
        }, 3000);
    }

    // Preset management
    function savePreset() {
        const presetName = document.getElementById("presetName").value;
        if (!presetName) {
            showToast("Please enter a preset name", "warning");
            return;
        }

        const presetData = {
            modificationLevel: document.getElementById("modificationLevel").value,
            formalityLevel: document.getElementById("formalityLevel").value,
            patternsToChange: document.getElementById("patternsToChange").value
        };

        localStorage.setItem(`preset_${presetName}`, JSON.stringify(presetData));
        updatePresetList();
        document.getElementById("presetName").value = "";
        showToast("Preset saved successfully", "success");
    }

    function loadPreset() {
        const presetSelect = document.getElementById("presetSelect");
        const selectedPreset = presetSelect.value;

        if (!selectedPreset) {
            document.getElementById("deletePresetBtn").disabled = true;
            return;
        }

        document.getElementById("deletePresetBtn").disabled = false;

        const presetData = JSON.parse(localStorage.getItem(`preset_${selectedPreset}`));
        document.getElementById("modificationLevel").value = presetData.modificationLevel;
        document.getElementById("formalityLevel").value = presetData.formalityLevel;
        document.getElementById("patternsToChange").value = presetData.patternsToChange;

        document.getElementById("modificationLevelDisplay").textContent = presetData.modificationLevel;
        document.getElementById("formalityLevelDisplay").textContent = presetData.formalityLevel;

        showToast("Preset loaded", "info");
    }

    function deletePreset() {
        const presetSelect = document.getElementById("presetSelect");
        const selectedPreset = presetSelect.value;

        if (!selectedPreset) return;

        if (confirm(`Are you sure you want to delete the preset "${selectedPreset}"?`)) {
            localStorage.removeItem(`preset_${selectedPreset}`);
            updatePresetList();
            showToast("Preset deleted", "info");
            document.getElementById("deletePresetBtn").disabled = true;
        }
    }

    function updatePresetList() {
        const presetSelect = document.getElementById("presetSelect");
        presetSelect.innerHTML = '<option value="">Load Preset</option>';

        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key.startsWith("preset_")) {
                const presetName = key.slice(7);
                const option = document.createElement("option");
                option.value = presetName;
                option.textContent = presetName;
                presetSelect.appendChild(option);
            }
        }

        document.getElementById("deletePresetBtn").disabled = true;
    }

    // Text processing
    async function naturalizeText() {
        const button = document.getElementById("naturalizeButton");
        const loadingOverlay = document.getElementById("loadingOverlay");

        if (button.disabled) return;

        const inputText = document.getElementById("inputText").value;
        const modificationLevel = document.getElementById("modificationLevel").value;
        const formalityLevel = document.getElementById("formalityLevel").value;
        const patternsToChange = document.getElementById("patternsToChange").value;

        // Validation
        if (!inputText) {
            showToast("Please enter some text to naturalize", "warning");
            return;
        }

        if (inputText.length > 5000) {
            showToast("Input text exceeds 5000 character limit", "error");
            return;
        }

        // Show loading state
        button.disabled = true;
        loadingOverlay.classList.remove("hidden");

        try {
            const response = await fetch("https://chatgpt.tobiasmue91.workers.dev/", {
                method: "POST",
                headers: {"Content-Type": "application/json", "Accept": "*/*"},
                body: JSON.stringify({
                    model: "gpt-3.5-turbo",
                    max_tokens: 500,
                    temperature: 1.3,
                    top_p: 1,
                    messages: [{
                        role: "assistant",
                        content: `I am the AI Text Naturalizer. My task is to modify the AI-generated text to make it more human-like and less recognizable by ChatGPT detection tools and other AI detectors. The input text is "${inputText}". I will apply a modification level of ${modificationLevel}(1-10), a formality level of ${formalityLevel}(1-10), and target the following specific patterns for change: "${patternsToChange}".

To achieve this, I should rephrase or restructure sentences, introduce colloquial language, add natural imperfections, and ensure the text maintains coherence and flow. I will make the output as undetectable by AI detectors as possible while still being meaningful, clear, and engaging.

I will provide my response in the exact following format:
NATURAL_SCORE: [number between 1-10 reflecting how natural/human-like the result is]
NATURALIZED_TEXT: [the naturalized text]`
                    }]
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            const responseContent = data.choices[0].message.content.trim();

            // Parse the response to extract the score and text
            let naturalScore = 0;
            let naturalizedText = "";

            // Extract natural score
            const scoreMatch = responseContent.match(/NATURAL_SCORE:\s*(\d+)/i);
            if (scoreMatch && scoreMatch[1]) {
                naturalScore = parseInt(scoreMatch[1]);
            }

            // Extract naturalized text
            const textMatch = responseContent.match(/NATURALIZED_TEXT:([\s\S]*)/i);
            if (textMatch && textMatch[1]) {
                naturalizedText = textMatch[1].trim();
            } else {
                // Fallback if format wasn't followed
                naturalizedText = responseContent;
            }

            document.getElementById("outputText").value = naturalizedText;
            localStorage.setItem("outputText", naturalizedText);

            // Display the natural score
            document.getElementById("scoreValue").textContent = naturalScore || "?";
            document.getElementById("naturalScore").classList.remove("hidden");

            updateOutputStats();
            showToast("Text naturalized successfully", "success");

        } catch (error) {
            console.error("Error:", error);
            showToast("An error occurred while naturalizing the text. Please try again.", "error");
        } finally {
            button.disabled = false;
            loadingOverlay.classList.add("hidden");
        }
    }

    // Text clearing
    function clearText() {
        document.getElementById("inputText").value = "";
        document.getElementById("outputText").value = "";
        document.getElementById("naturalScore").classList.add("hidden");
        document.getElementById("outputStats").classList.add("hidden");
        updateWordCount();
        localStorage.removeItem("inputText");
        localStorage.removeItem("outputText");
        showToast("Text cleared", "info");
    }

    // Example text handling
    function handleExampleClick(event) {
        const exampleDiv = event.target.closest('[data-example]');
        if (!exampleDiv) return;

        const exampleType = exampleDiv.getAttribute('data-example');
        const textElement = exampleDiv.querySelector('p');

        if (textElement) {
            document.getElementById("inputText").value = textElement.textContent;
            updateWordCount();
            closeExamplesModal();
            showToast("Example text loaded", "info");
        }
    }

    function openExamplesModal() {
        document.getElementById("examplesModal").classList.remove("hidden");
    }

    function closeExamplesModal() {
        document.getElementById("examplesModal").classList.add("hidden");
    }

    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
        initTheme();
        updatePresetList();

        // Load saved text if available
        const savedInputText = localStorage.getItem("inputText");
        if (savedInputText) {
            document.getElementById("inputText").value = savedInputText;
            updateWordCount();
        }

        const savedOutputText = localStorage.getItem("outputText");
        if (savedOutputText) {
            document.getElementById("outputText").value = savedOutputText;
            updateOutputStats();

            // Simulate natural score for loaded output
            const naturalScore = Math.floor(Math.random() * 4) + 7;
            document.getElementById("scoreValue").textContent = naturalScore;
            document.getElementById("naturalScore").classList.remove("hidden");
        }

        // Set up event listeners
        document.getElementById("inputText").addEventListener("input", updateWordCount);
        document.getElementById("presetSelect").addEventListener("change", loadPreset);
        document.getElementById("themeToggle").addEventListener("click", toggleTheme);
        document.getElementById("exampleBtn").addEventListener("click", openExamplesModal);
        document.getElementById("closeExamplesBtn").addEventListener("click", closeExamplesModal);

        // Example click handling
        document.querySelectorAll('[data-example]').forEach(example => {
            example.addEventListener('click', handleExampleClick);
        });
    });
</script>
</body>
</html>