<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="description" content="Compare the true sizes of animals from tiny ants to massive blue whales. Interactive visual tool with accurate measurements and proportional scaling for 50+ creatures.">
    <meta name="keywords" content="animal size comparison,animal sizes,blue whale size,elephant size,compare animals,animal measurements,interactive animal tool,size comparison tool">
    <meta name="author" content="Claude Sonnet 4.5 prompted by Tobias M√ºller">
    <meta property="og:title" content="Animal Size Comparison - Interactive Visual Tool">
    <meta property="og:description" content="Compare the true sizes of animals from tiny ants to massive blue whales. Interactive visual tool with accurate measurements and proportional scaling for 50+ creatures.">
    <meta property="og:image" content="https://www.gptgames.dev/screenshots/screenshot_222.webp">
    <meta property="og:url" content="https://www.gptgames.dev/tools/animal_size_comparison.html">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Animal Size Comparison - Interactive Visual Tool">
    <meta name="twitter:description" content="Compare the true sizes of animals from tiny ants to massive blue whales. Interactive visual tool with accurate measurements and proportional scaling for 50+ creatures.">
    <meta name="twitter:image" content="https://www.gptgames.dev/screenshots/screenshot_222.webp">
    <link rel="canonical" href="https://www.gptgames.dev/tools/animal_size_comparison.html">
    <title>Animal Size Comparison</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,sans-serif;background:#f5f7fa;min-height:100vh;padding:16px;color:#1a1a2e;}
        .container{max-width:1400px;margin:0 auto;}
        header{text-align:center;margin-bottom:24px;padding:32px 20px;background:#1a5f2a;border-radius:12px;color:#fff;}
        h1{font-size:2.2rem;margin-bottom:6px;font-weight:700;}
        .subtitle{font-size:1rem;opacity:0.9;}
        .controls{background:#fff;padding:16px;border-radius:10px;margin-bottom:16px;border:1px solid #e2e8f0;}
        .controls-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
        .controls-row:not(:last-child){margin-bottom:12px;}
        .filter-btn{padding:7px 14px;border:2px solid #e2e8f0;background:#fff;color:#475569;border-radius:6px;cursor:pointer;font-size:0.85rem;font-weight:600;transition:all 0.15s;}
        .filter-btn:hover{border-color:#1a5f2a;color:#1a5f2a;}
        .filter-btn.active{background:#1a5f2a;color:#fff;border-color:#1a5f2a;}
        .search-box{flex:1;min-width:180px;padding:9px 14px;border:2px solid #e2e8f0;border-radius:6px;font-size:0.9rem;transition:border-color 0.15s;}
        .search-box:focus{outline:none;border-color:#1a5f2a;}
        .toggle-label{display:flex;align-items:center;gap:6px;font-size:0.85rem;font-weight:500;color:#475569;cursor:pointer;padding:7px 10px;background:#f8fafc;border-radius:6px;border:1px solid #e2e8f0;user-select:none;}
        .toggle-label:hover{background:#f1f5f9;}
        .toggle-label input{width:15px;height:15px;accent-color:#1a5f2a;}
        .unit-toggle{display:flex;background:#f8fafc;border-radius:6px;border:1px solid #e2e8f0;overflow:hidden;}
        .unit-btn{padding:7px 12px;border:none;background:transparent;color:#475569;cursor:pointer;font-size:0.8rem;font-weight:600;transition:all 0.15s;}
        .unit-btn.active{background:#1a5f2a;color:#fff;}
        .unit-btn:hover:not(.active){background:#e2e8f0;}
        .sort-select{padding:7px 10px;border:2px solid #e2e8f0;border-radius:6px;font-size:0.85rem;font-weight:500;color:#475569;background:#fff;cursor:pointer;}
        .sort-select:focus{outline:none;border-color:#1a5f2a;}
        .quick-picks{background:#fff;padding:12px 16px;border-radius:10px;margin-bottom:16px;border:1px solid #e2e8f0;}
        .quick-picks-title{font-size:0.8rem;font-weight:600;color:#64748b;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px;}
        .quick-picks-row{display:flex;gap:8px;flex-wrap:wrap;}
        .quick-pick-btn{padding:6px 12px;border:1px solid #e2e8f0;background:#f8fafc;color:#334155;border-radius:20px;cursor:pointer;font-size:0.8rem;font-weight:500;transition:all 0.15s;}
        .quick-pick-btn:hover{background:#f0fff4;border-color:#86efac;}
        .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin-bottom:20px;max-height:450px;overflow-y:auto;}
        .animal-card{background:#fff;padding:14px 10px;border-radius:8px;text-align:center;cursor:pointer;transition:all 0.2s;border:2px solid #e8ecf1;position:relative;user-select:none;}
        .animal-card:hover{transform:translateY(-2px);border-color:#1a5f2a;box-shadow:0 4px 12px rgba(0,0,0,0.06);}
        .animal-card.selected{border-color:#1a5f2a;background:#f0fff4;}
        .card-info-btn{position:absolute;top:6px;right:6px;width:20px;height:20px;border-radius:50%;background:#e8ecf1;border:none;cursor:pointer;font-size:11px;font-weight:700;color:#64748b;display:flex;align-items:center;justify-content:center;transition:all 0.15s;z-index:2;}
        .card-info-btn:hover{background:#1a5f2a;color:#fff;transform:scale(1.1);}
        .emoji{font-size:2.4rem;margin-bottom:6px;display:block;pointer-events:none;}
        .animal-name{font-weight:700;font-size:0.88rem;margin-bottom:3px;color:#1a1a2e;pointer-events:none;}
        .animal-stats{font-size:0.75rem;color:#64748b;line-height:1.3;pointer-events:none;}
        .comparison{background:#fff;padding:20px;border-radius:10px;border:1px solid #e2e8f0;min-height:380px;}
        .comparison-header{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:12px;margin-bottom:16px;}
        .comparison-title{font-size:1.4rem;color:#1a1a2e;font-weight:700;}
        .comparison-subtitle{color:#64748b;font-size:0.85rem;margin-top:3px;}
        .selected-pills{display:flex;gap:6px;flex-wrap:wrap;}
        .selected-pill{display:flex;align-items:center;gap:5px;background:#f0fff4;border:1px solid #86efac;padding:5px 9px;border-radius:16px;font-size:0.8rem;font-weight:500;}
        .selected-pill .pill-emoji{font-size:1rem;}
        .selected-pill .remove-pill{background:none;border:none;color:#dc2626;cursor:pointer;font-size:0.95rem;line-height:1;padding:0 0 0 3px;font-weight:bold;}
        .selected-pill .remove-pill:hover{color:#991b1b;}
        .visual-wrapper{position:relative;background:#7ec8e3;border-radius:8px;overflow:hidden;margin-bottom:16px;}
        .ruler{position:absolute;left:0;top:0;bottom:36px;width:46px;background:rgba(255,255,255,0.95);border-right:2px solid #cbd5e1;z-index:10;}
        .ruler-tick{position:absolute;right:0;display:flex;align-items:center;justify-content:flex-end;padding-right:5px;font-size:0.65rem;font-weight:600;color:#475569;height:18px;transform:translateY(50%);}
        .ruler-tick::after{content:'';position:absolute;right:0;width:6px;height:2px;background:#94a3b8;}
        .ruler-tick.major::after{width:12px;background:#475569;}
        .ruler-title{position:absolute;top:6px;left:50%;transform:translateX(-50%) rotate(-90deg);transform-origin:center;font-size:0.6rem;color:#64748b;font-weight:600;white-space:nowrap;letter-spacing:0.5px;}
        .visual-area{position:relative;min-height:340px;padding:24px 24px 0 54px;display:flex;align-items:flex-end;justify-content:center;gap:40px;}
        .ground{position:absolute;bottom:0;left:0;right:0;height:36px;background:#5d4e37;}
        .grass{position:absolute;bottom:36px;left:0;right:0;height:6px;background:#3d8c40;}
        .animal-display{display:flex;flex-direction:column;align-items:center;position:relative;z-index:5;}
        .animal-display.reference{opacity:0.5;}
        .animal-display.reference .bracket-label{background:#64748b;}
        .animal-display.reference .bracket-left,.animal-display.reference .bracket-right{border-color:#64748b;}
        .bracket-container{position:relative;display:flex;align-items:center;justify-content:center;}
        .bracket-left,.bracket-right{position:absolute;top:0;bottom:0;width:6px;border:2px solid #1e3a5f;pointer-events:none;}
        .bracket-left{left:-10px;border-right:none;border-radius:3px 0 0 3px;}
        .bracket-right{right:-10px;border-left:none;border-radius:0 3px 3px 0;}
        .bracket-label{position:absolute;left:-42px;top:50%;transform:translateY(-50%) rotate(-90deg);background:#1e3a5f;color:#fff;padding:2px 6px;border-radius:3px;font-size:0.65rem;font-weight:600;white-space:nowrap;box-shadow:0 2px 4px rgba(0,0,0,0.2);}
        .visual-emoji{filter:drop-shadow(0 3px 6px rgba(0,0,0,0.2));line-height:1;display:block;}
        .visual-name{background:#fff;padding:3px 8px;border-radius:3px;margin-top:5px;font-weight:600;font-size:0.75rem;box-shadow:0 2px 4px rgba(0,0,0,0.1);white-space:nowrap;z-index:1;}
        .scale-info{position:absolute;top:10px;right:10px;background:rgba(255,255,255,0.95);padding:6px 10px;border-radius:5px;font-size:0.75rem;color:#475569;font-weight:500;display:flex;align-items:center;gap:5px;}
        .scale-info.warning{background:#fef3c7;color:#92400e;}
        .dim-label{font-size:0.6rem;color:rgba(255,255,255,0.8);font-weight:400;margin-left:2px;}
        .details{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:10px;}
        .detail-card{background:#f8fafc;padding:14px;border-radius:6px;border-left:3px solid #1a5f2a;}
        .detail-title{font-weight:700;color:#1a5f2a;margin-bottom:6px;font-size:0.95rem;display:flex;align-items:center;gap:6px;flex-wrap:wrap;}
        .detail-content{color:#475569;line-height:1.5;font-size:0.82rem;}
        .detail-content strong{color:#1a1a2e;}
        .ratio-badge{background:#fef3c7;color:#78350f;padding:2px 5px;border-radius:3px;font-size:0.7rem;font-weight:600;}
        .empty-state{text-align:center;padding:50px 20px;color:#9ca3af;}
        .empty-state .big-emoji{font-size:3.5rem;margin-bottom:12px;opacity:0.5;}
        .empty-state h3{color:#4b5563;margin-bottom:6px;font-weight:600;}
        .source-note{font-size:0.7rem;color:#9ca3af;text-align:center;margin-top:12px;font-style:italic;}
        .source-note a{color:#64748b;}
        .info-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:100;display:flex;align-items:center;justify-content:center;padding:16px;opacity:0;pointer-events:none;transition:opacity 0.2s;}
        .info-overlay.active{opacity:1;pointer-events:auto;}
        .info-modal{background:#fff;border-radius:12px;max-width:380px;width:100%;max-height:80vh;overflow-y:auto;position:relative;transform:scale(0.95);transition:transform 0.2s;}
        .info-overlay.active .info-modal{transform:scale(1);}
        .info-modal-header{padding:18px 18px 12px;text-align:center;border-bottom:1px solid #e8ecf1;}
        .info-modal-emoji{font-size:3.5rem;margin-bottom:8px;}
        .info-modal-name{font-size:1.3rem;font-weight:700;color:#1a1a2e;}
        .info-modal-category{font-size:0.75rem;color:#64748b;text-transform:uppercase;letter-spacing:1px;margin-top:3px;}
        .info-modal-body{padding:16px;}
        .info-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f0f0f0;}
        .info-row:last-child{border-bottom:none;}
        .info-label{color:#64748b;font-size:0.85rem;}
        .info-value{font-weight:600;color:#1a1a2e;font-size:0.85rem;}
        .info-fact{background:#f0fff4;padding:10px;border-radius:6px;margin-top:12px;font-size:0.85rem;color:#166534;line-height:1.4;}
        .info-fact::before{content:'üí° ';}
        .info-close{position:absolute;top:10px;right:10px;width:28px;height:28px;border-radius:50%;background:#f0f0f0;border:none;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;color:#64748b;transition:all 0.15s;}
        .info-close:hover{background:#e0e0e0;color:#333;}
        .stats-row{display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap;}
        .stat-card{flex:1;min-width:120px;background:#f8fafc;padding:10px 12px;border-radius:6px;text-align:center;border:1px solid #e2e8f0;}
        .stat-value{font-size:1.3rem;font-weight:700;color:#1a5f2a;}
        .stat-label{font-size:0.7rem;color:#64748b;text-transform:uppercase;letter-spacing:0.5px;}
        @media (max-width:768px){
            h1{font-size:1.6rem;}
            .grid{grid-template-columns:repeat(auto-fill,minmax(115px,1fr));}
            .visual-area{padding:20px 16px 0 50px;gap:24px;min-height:300px;flex-wrap:wrap;}
            .comparison{padding:14px;}
            .ruler{width:42px;}
            .comparison-header{flex-direction:column;}
            .bracket-label{font-size:0.55rem;left:-38px;padding:2px 5px;}
            .bracket-left{left:-8px;}
            .bracket-right{right:-8px;}
            .quick-picks{display:none;}
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>üåç Animal Size Comparison</h1>
        <p class="subtitle">Explore the true scale of Earth's creatures ‚Äî 50+ species</p>
    </header>
    <div class="controls">
        <div class="controls-row" id="filterBar">
            <button class="filter-btn active" data-category="all">All</button>
            <button class="filter-btn" data-category="land">üåç Land</button>
            <button class="filter-btn" data-category="sea">üåä Sea</button>
            <button class="filter-btn" data-category="air">ü¶Ö Air</button>
            <button class="filter-btn" data-category="small">üê≠ Small</button>
            <button class="filter-btn" data-category="reptile">ü¶é Reptile</button>
            <input type="text" class="search-box" id="searchBox" placeholder="Search animals...">
        </div>
        <div class="controls-row">
            <label class="toggle-label"><input type="checkbox" id="humanRef" checked>Human for scale</label>
            <div class="unit-toggle">
                <button class="unit-btn active" data-unit="metric">Metric</button>
                <button class="unit-btn" data-unit="imperial">Imperial</button>
            </div>
            <select class="sort-select" id="sortSelect">
                <option value="name">Sort: A‚ÄìZ</option>
                <option value="name-desc">Sort: Z‚ÄìA</option>
                <option value="size-desc">Sort: Largest</option>
                <option value="size-asc">Sort: Smallest</option>
                <option value="weight-desc">Sort: Heaviest</option>
                <option value="weight-asc">Sort: Lightest</option>
            </select>
        </div>
    </div>
    <div class="quick-picks">
        <div class="quick-picks-title">Popular Comparisons</div>
        <div class="quick-picks-row">
            <button class="quick-pick-btn" data-animals="Blue Whale,African Elephant,Human">üêã Whale vs Elephant</button>
            <button class="quick-pick-btn" data-animals="Lion,Tiger,Wolf">ü¶Å Big Cats vs Wolf</button>
            <button class="quick-pick-btn" data-animals="Great White Shark,Dolphin,Human">ü¶à Shark vs Dolphin</button>
            <button class="quick-pick-btn" data-animals="Giraffe,African Elephant,Human">ü¶í Tallest Animals</button>
            <button class="quick-pick-btn" data-animals="Ant,Bee,Mouse,Cat">üêú Tiny to Small</button>
            <button class="quick-pick-btn" data-animals="Crocodile,Komodo Dragon,Green Turtle">üêä Reptiles</button>
        </div>
    </div>
    <div class="grid" id="animalGrid"></div>
    <div class="comparison" id="comparison"></div>
</div>
<div class="info-overlay" id="infoOverlay">
    <div class="info-modal">
        <button class="info-close" id="infoClose">√ó</button>
        <div class="info-modal-header">
            <div class="info-modal-emoji" id="modalEmoji"></div>
            <div class="info-modal-name" id="modalName"></div>
            <div class="info-modal-category" id="modalCategory"></div>
        </div>
        <div class="info-modal-body" id="modalBody"></div>
    </div>
</div>
<script>
    (function(){

        const animals = [
            // Sea Animals
            {
                name: "Blue Whale",
                emoji: "üêã",
                length: 28,
                weight: 140000,
                height: 4.5,
                category: "sea",
                facts: "Largest animal ever. Heart weighs ~180kg, tongue weighs as much as an elephant."
            },
            {
                name: "Orca",
                emoji: "üêã",
                length: 8,
                weight: 5000,
                height: 2,
                category: "sea",
                facts: "Apex ocean predator. Highly intelligent with distinct family dialects."
            },
            {
                name: "Great White Shark",
                emoji: "ü¶à",
                length: 5,
                weight: 1100,
                height: 1.2,
                category: "sea",
                facts: "Can detect one drop of blood in 100 liters of water from miles away."
            },
            {
                name: "Dolphin",
                emoji: "üê¨",
                length: 2.5,
                weight: 150,
                height: 0.5,
                category: "sea",
                facts: "Sleeps with half their brain awake. Uses echolocation to navigate."
            },
            {
                name: "Seal",
                emoji: "ü¶≠",
                length: 1.7,
                weight: 130,
                height: 0.6,
                category: "sea",
                facts: "Can hold breath for up to 2 hours. Whiskers detect vibrations in water."
            },
            {
                name: "Octopus",
                emoji: "üêô",
                length: 0.5,
                weight: 5,
                height: 0.3,
                category: "sea",
                facts: "Has three hearts and blue blood. Can change color in milliseconds."
            },
            {
                name: "Squid",
                emoji: "ü¶ë",
                length: 0.6,
                weight: 3,
                height: 0.2,
                category: "sea",
                facts: "Giant squid can grow to 13m. Has the largest eyes in the animal kingdom."
            },
            {
                name: "Lobster",
                emoji: "ü¶û",
                length: 0.5,
                weight: 1,
                height: 0.15,
                category: "sea",
                facts: "Can live over 100 years. Continues growing throughout its life."
            },
            {
                name: "Crab",
                emoji: "ü¶Ä",
                length: 0.2,
                weight: 0.5,
                height: 0.1,
                category: "sea",
                facts: "Walks sideways due to leg joint structure. Can regenerate lost claws."
            },
            {
                name: "Shrimp",
                emoji: "ü¶ê",
                length: 0.15,
                weight: 0.02,
                height: 0.03,
                category: "small",
                facts: "Heart is in its head. Can snap claws loud enough to stun prey."
            },
            {
                name: "Green Turtle",
                emoji: "üê¢",
                length: 1.1,
                weight: 150,
                height: 0.4,
                category: "sea",
                facts: "Can live 80+ years. Returns to same beach where it hatched to nest."
            },

            // Land Mammals - Large
            {
                name: "African Elephant",
                emoji: "üêò",
                length: 5,
                weight: 5500,
                height: 3.3,
                category: "land",
                facts: "Largest land animal. Trunk has 40,000 muscles and can lift 350kg."
            },
            {
                name: "Giraffe",
                emoji: "ü¶í",
                length: 4.5,
                weight: 1100,
                height: 5.5,
                category: "land",
                facts: "Tallest land animal at up to 6m. Has same number of neck vertebrae as humans (7)."
            },
            {
                name: "Rhino",
                emoji: "ü¶è",
                length: 3.8,
                weight: 2200,
                height: 1.8,
                category: "land",
                facts: "Horn is made of keratin (like hair). Can run up to 50 km/h."
            },
            {
                name: "Hippo",
                emoji: "ü¶õ",
                length: 4,
                weight: 1800,
                height: 1.5,
                category: "land",
                facts: "Spends 16 hours per day in water. Secretes natural sunscreen."
            },
            {
                name: "Bison",
                emoji: "ü¶¨",
                length: 3.5,
                weight: 900,
                height: 1.9,
                category: "land",
                facts: "Largest land animal in North America. Can run up to 56 km/h."
            },
            {
                name: "Moose",
                emoji: "ü´é",
                length: 3.0,
                weight: 600,
                height: 2.1,
                category: "land",
                facts: "Largest deer species. Antlers can span 1.8m and weigh 35kg."
            },
            {
                name: "Camel",
                emoji: "üê´",
                length: 3.0,
                weight: 650,
                height: 2.1,
                category: "land",
                facts: "Can drink 100L of water in 10 minutes. Humps store fat, not water."
            },

            // Land Mammals - Medium
            {
                name: "Polar Bear",
                emoji: "üêª‚Äç‚ùÑÔ∏è",
                length: 2.4,
                weight: 450,
                height: 1.3,
                category: "land",
                facts: "Largest land carnivore. Fur is actually transparent, not white."
            },
            {
                name: "Grizzly Bear",
                emoji: "üêª",
                length: 2.2,
                weight: 320,
                height: 1.2,
                category: "land",
                facts: "Can run up to 56 km/h. Hibernates for 5-7 months each year."
            },
            {
                name: "Lion",
                emoji: "ü¶Å",
                length: 2.0,
                weight: 190,
                height: 1.1,
                category: "land",
                facts: "King of the savanna. A lion's roar can be heard up to 8 km away."
            },
            {
                name: "Tiger",
                emoji: "üêÖ",
                length: 2.8,
                weight: 220,
                height: 1.1,
                category: "land",
                facts: "Largest wild cat species. Each tiger has unique stripe pattern like fingerprints."
            },
            {
                name: "Gorilla",
                emoji: "ü¶ç",
                length: 1.8,
                weight: 160,
                height: 1.7,
                category: "land",
                facts: "Shares 98% DNA with humans. Despite their size, mostly gentle herbivores."
            },
            {
                name: "Horse",
                emoji: "üê¥",
                length: 2.4,
                weight: 500,
                height: 1.6,
                category: "land",
                facts: "Can sleep standing up. Has nearly 360-degree vision."
            },
            {
                name: "Zebra",
                emoji: "ü¶ì",
                length: 2.3,
                weight: 350,
                height: 1.4,
                category: "land",
                facts: "No two zebras have identical stripes. Stripes may confuse predators."
            },
            {
                name: "Cow",
                emoji: "üêÑ",
                length: 2.5,
                weight: 700,
                height: 1.5,
                category: "land",
                facts: "Has 4 stomach compartments. Can recognize and remember 50+ individuals."
            },
            {
                name: "Donkey",
                emoji: "ü´è",
                length: 2.0,
                weight: 250,
                height: 1.2,
                category: "land",
                facts: "Stronger pound-for-pound than horses. Can live 40+ years."
            },
            {
                name: "Llama",
                emoji: "ü¶ô",
                length: 1.8,
                weight: 130,
                height: 1.8,
                category: "land",
                facts: "Social animals that hum to communicate. Used as guard animals for sheep."
            },
            {
                name: "Deer",
                emoji: "ü¶å",
                length: 1.6,
                weight: 100,
                height: 1.1,
                category: "land",
                facts: "Antlers are fastest growing tissue in any mammal. Shed and regrow yearly."
            },
            {
                name: "Kangaroo",
                emoji: "ü¶ò",
                length: 1.6,
                weight: 70,
                height: 1.8,
                category: "land",
                facts: "Can leap 9m in a single bound. Cannot walk backwards."
            },
            {
                name: "Wolf",
                emoji: "üê∫",
                length: 1.5,
                weight: 45,
                height: 0.85,
                category: "land",
                facts: "Can run at 60 km/h. Howls can be heard up to 16 km away."
            },
            {
                name: "Pig",
                emoji: "üê∑",
                length: 1.5,
                weight: 150,
                height: 0.7,
                category: "land",
                facts: "Smarter than dogs. Can be trained to play video games."
            },
            {
                name: "Boar",
                emoji: "üêó",
                length: 1.6,
                weight: 100,
                height: 0.9,
                category: "land",
                facts: "Ancestor of domestic pigs. Tusks grow continuously throughout life."
            },
            {
                name: "Goat",
                emoji: "üêê",
                length: 1.3,
                weight: 60,
                height: 0.7,
                category: "land",
                facts: "Rectangular pupils give 340¬∞ vision. Can climb nearly vertical surfaces."
            },
            {
                name: "Sheep",
                emoji: "üêë",
                length: 1.2,
                weight: 80,
                height: 0.8,
                category: "land",
                facts: "Excellent memory for faces. Can remember 50 sheep and 10 humans for years."
            },

            // Land Mammals - Small-Medium
            {
                name: "Human",
                emoji: "üßç",
                length: 1.7,
                weight: 70,
                height: 1.7,
                category: "land",
                facts: "Average adult. Only species using complex language and advanced tools."
            },
            {
                name: "Orangutan",
                emoji: "ü¶ß",
                length: 1.4,
                weight: 75,
                height: 1.4,
                category: "land",
                facts: "Shares 97% DNA with humans. Uses tools and can learn sign language."
            },
            {
                name: "Chimpanzee",
                emoji: "üêí",
                length: 1.2,
                weight: 50,
                height: 1.2,
                category: "land",
                facts: "Our closest living relative. Uses tools and can solve complex problems."
            },
            {
                name: "Dog",
                emoji: "üêï",
                length: 0.9,
                weight: 30,
                height: 0.6,
                category: "land",
                facts: "Man's best friend. Has ~300 million smell receptors (humans have 6 million)."
            },
            {
                name: "Fox",
                emoji: "ü¶ä",
                length: 0.7,
                weight: 6,
                height: 0.4,
                category: "land",
                facts: "Uses Earth's magnetic field to hunt. Can hear a mouse under snow."
            },
            {
                name: "Raccoon",
                emoji: "ü¶ù",
                length: 0.65,
                weight: 9,
                height: 0.3,
                category: "land",
                facts: "Has extremely sensitive front paws. Can remember solutions for 3+ years."
            },
            {
                name: "Cat",
                emoji: "üêà",
                length: 0.45,
                weight: 4.5,
                height: 0.25,
                category: "land",
                facts: "Sleeps 12-16 hours daily. Can rotate ears 180¬∞ independently."
            },
            {
                name: "Koala",
                emoji: "üê®",
                length: 0.72,
                weight: 10,
                height: 0.45,
                category: "land",
                facts: "Sleeps 22 hours a day. Fingerprints are nearly identical to humans."
            },
            {
                name: "Sloth",
                emoji: "ü¶•",
                length: 0.65,
                weight: 6,
                height: 0.3,
                category: "land",
                facts: "Moves so slowly algae grows on fur. Takes 2 weeks to digest one meal."
            },
            {
                name: "Panda",
                emoji: "üêº",
                length: 1.5,
                weight: 100,
                height: 0.9,
                category: "land",
                facts: "Spends 12+ hours daily eating bamboo. Has a pseudo-thumb for gripping."
            },
            {
                name: "Hedgehog",
                emoji: "ü¶î",
                length: 0.25,
                weight: 1,
                height: 0.12,
                category: "small",
                facts: "Has about 5,000 spines. Can roll into a ball for protection."
            },

            // Small Animals
            {
                name: "Rabbit",
                emoji: "üêá",
                length: 0.4,
                weight: 2,
                height: 0.2,
                category: "small",
                facts: "Can see nearly 360¬∞ without turning head. Ears rotate independently."
            },
            {
                name: "Squirrel",
                emoji: "üêøÔ∏è",
                length: 0.25,
                weight: 0.5,
                height: 0.12,
                category: "small",
                facts: "Can find buried nuts by smell through 30cm of snow. Plants millions of trees yearly by forgetting where they buried nuts."
            },
            {
                name: "Mouse",
                emoji: "üêÅ",
                length: 0.08,
                weight: 0.03,
                height: 0.04,
                category: "small",
                facts: "Heart beats ~600 times per minute. Can squeeze through 6mm gaps."
            },
            {
                name: "Hamster",
                emoji: "üêπ",
                length: 0.13,
                weight: 0.12,
                height: 0.06,
                category: "small",
                facts: "Cheek pouches can expand to triple head size. Runs 8km on wheel nightly."
            },
            {
                name: "Bat",
                emoji: "ü¶á",
                length: 0.12,
                weight: 0.025,
                height: 0.05,
                category: "air",
                facts: "Only mammal capable of true flight. Uses echolocation to navigate in darkness."
            },
            {
                name: "Frog",
                emoji: "üê∏",
                length: 0.1,
                weight: 0.025,
                height: 0.05,
                category: "small",
                facts: "Can breathe and absorb water through skin. Some can survive being frozen."
            },
            {
                name: "Snail",
                emoji: "üêå",
                length: 0.08,
                weight: 0.01,
                height: 0.04,
                category: "small",
                facts: "Has up to 20,000 teeth. Can sleep for 3 years during drought."
            },

            // Insects & Tiny
            {
                name: "Butterfly",
                emoji: "ü¶ã",
                length: 0.06,
                weight: 0.0005,
                height: 0.03,
                category: "small",
                facts: "Tastes with feet. Some migrate 4,800km. Can see UV light."
            },
            {
                name: "Bee",
                emoji: "üêù",
                length: 0.015,
                weight: 0.0001,
                height: 0.01,
                category: "small",
                facts: "Wings beat 200 times per second. Can recognize human faces."
            },
            {
                name: "Ladybug",
                emoji: "üêû",
                length: 0.008,
                weight: 0.00002,
                height: 0.004,
                category: "small",
                facts: "Can eat 5,000 aphids in lifetime. Bright colors warn predators of bad taste."
            },
            {
                name: "Ant",
                emoji: "üêú",
                length: 0.003,
                weight: 0.000002,
                height: 0.002,
                category: "small",
                facts: "Can lift 50x body weight. ~20 quadrillion ants on Earth."
            },

            // Birds
            {
                name: "Ostrich",
                emoji: "ü¶§",
                length: 2.1,
                weight: 140,
                height: 2.5,
                category: "air",
                facts: "Largest living bird. Eyes are bigger than its brain. Can run 70 km/h."
            },
            {
                name: "Penguin",
                emoji: "üêß",
                length: 1.15,
                weight: 35,
                height: 1.1,
                category: "air",
                facts: "Emperor penguins can dive to 500m and hold breath for 22 minutes."
            },
            {
                name: "Swan",
                emoji: "ü¶¢",
                length: 1.5,
                weight: 12,
                height: 1.2,
                category: "air",
                facts: "Mates for life. Can have wingspan of 3m. Very protective of young."
            },
            {
                name: "Flamingo",
                emoji: "ü¶©",
                length: 1.3,
                weight: 3,
                height: 1.4,
                category: "air",
                facts: "Gets pink color from shrimp diet. Stands on one leg to conserve heat."
            },
            {
                name: "Peacock",
                emoji: "ü¶ö",
                length: 1.0,
                weight: 5,
                height: 1.0,
                category: "air",
                facts: "Tail feathers can be 1.5m long. Has 'eyes' on feathers to deter predators."
            },
            {
                name: "Eagle",
                emoji: "ü¶Ö",
                length: 0.9,
                weight: 5,
                height: 0.75,
                category: "air",
                facts: "Vision is 8x sharper than humans. Can spot prey from 3 km away."
            },
            {
                name: "Owl",
                emoji: "ü¶â",
                length: 0.6,
                weight: 2,
                height: 0.5,
                category: "air",
                facts: "Can rotate head 270¬∞. Has asymmetrical ears for precise sound location."
            },
            {
                name: "Parrot",
                emoji: "ü¶ú",
                length: 0.35,
                weight: 0.4,
                height: 0.3,
                category: "air",
                facts: "Can live 80+ years. Some species have vocabulary of 1,000+ words."
            },
            {
                name: "Duck",
                emoji: "ü¶Ü",
                length: 0.6,
                weight: 1.2,
                height: 0.35,
                category: "air",
                facts: "Waterproof feathers. Sleeps with one eye open to watch for predators."
            },
            {
                name: "Turkey",
                emoji: "ü¶É",
                length: 1.0,
                weight: 8,
                height: 0.9,
                category: "air",
                facts: "Wild turkeys can fly up to 88 km/h. Benjamin Franklin wanted it as US symbol."
            },

            // Reptiles
            {
                name: "Crocodile",
                emoji: "üêä",
                length: 5,
                weight: 500,
                height: 0.5,
                category: "reptile",
                facts: "Can live 70+ years. Bite force of 16,000 newtons‚Äîstrongest of any animal."
            },
            {
                name: "Komodo Dragon",
                emoji: "ü¶é",
                length: 2.6,
                weight: 70,
                height: 0.3,
                category: "reptile",
                facts: "Largest living lizard. Venomous saliva prevents blood clotting."
            },
            {
                name: "Snake",
                emoji: "üêç",
                length: 1.5,
                weight: 1.5,
                height: 0.08,
                category: "reptile",
                facts: "Can sense heat through pits. Some species can go a year without eating."
            },
            {
                name: "Scorpion",
                emoji: "ü¶Ç",
                length: 0.12,
                weight: 0.03,
                height: 0.04,
                category: "small",
                facts: "Glows under UV light. Can survive a year without food."
            },

            {name:"Beaver",emoji:"ü¶´",length:1.0,weight:20,height:0.4,category:"land",facts:"Nature's engineer. Can fell a 15cm tree in minutes. Dams create vital wetland ecosystems."},
            {name:"Sea Otter",emoji:"ü¶¶",length:1.2,weight:30,height:0.3,category:"sea",facts:"Densest fur of any mammal with up to 1 million hairs per square inch. Uses rocks as tools."},
            {name:"Badger",emoji:"ü¶°",length:0.75,weight:11,height:0.3,category:"land",facts:"Powerful diggers with strong jaws. Lives in complex underground tunnel systems called setts."},
            {name:"Skunk",emoji:"ü¶®",length:0.55,weight:4,height:0.2,category:"small",facts:"Can spray musk up to 4.5 meters with pinpoint accuracy. Gives warning by stomping feet first."},
            {name:"Water Buffalo",emoji:"üêÉ",length:2.7,weight:900,height:1.6,category:"land",facts:"Called the 'living tractor of the East.' Horns can span over 2 meters. Loves wallowing in mud."},
            {name:"Goose",emoji:"ü™ø",length:0.9,weight:5,height:0.7,category:"air",facts:"Mates for life. Flies in V-formation to reduce wind resistance. Can live over 30 years."},
            {name:"Rooster",emoji:"üêì",length:0.5,weight:3.5,height:0.45,category:"air",facts:"Crows to establish territory. Has internal clock accurate to minutes. Can recognize over 100 faces."},
            {name:"Jellyfish",emoji:"ü™º",length:0.35,weight:0.03,height:0.25,category:"sea",facts:"95% water with no brain, heart or blood. Some species are immortal and can reverse aging."},
            {name:"Rat",emoji:"üêÄ",length:0.4,weight:0.35,height:0.08,category:"small",facts:"Highly intelligent and social. Can laugh when tickled. Teeth never stop growing."},
            {name:"Spider",emoji:"üï∑Ô∏è",length:0.02,weight:0.00004,height:0.008,category:"small",facts:"Produces silk stronger than steel by weight. Most have 8 eyes but poor vision."},
            {name:"Cricket",emoji:"ü¶ó",length:0.025,weight:0.0005,height:0.01,category:"small",facts:"Chirps by rubbing wings together. Ears are located on front legs. Temperature affects chirp rate."},
            {name:"Cockroach",emoji:"ü™≥",length:0.04,weight:0.03,height:0.01,category:"small",facts:"Can survive a week without its head. Has existed for 300 million years. Can hold breath 40 minutes."},
            {name:"Fly",emoji:"ü™∞",length:0.007,weight:0.000012,height:0.003,category:"small",facts:"Has 360-degree vision. Tastes with feet. Can walk upside down using sticky pads."},
            {name:"Mosquito",emoji:"ü¶ü",length:0.006,weight:0.0000025,height:0.003,category:"small",facts:"Only females bite. Can detect CO2 from 50 meters away. Deadliest animal to humans via disease."},
            {name:"Beetle",emoji:"ü™≤",length:0.015,weight:0.0003,height:0.008,category:"small",facts:"Most diverse order of insects with 400,000+ species. Some can lift 1,100 times their body weight."},
            {name:"Worm",emoji:"ü™±",length:0.15,weight:0.005,height:0.008,category:"small",facts:"Has 5 hearts. Can regenerate lost segments. Aerates soil and recycles nutrients."},
            {name:"Pufferfish",emoji:"üê°",length:0.3,weight:0.5,height:0.2,category:"sea",facts:"Inflates to 3x size when threatened. Contains tetrodotoxin, 1,200x more deadly than cyanide."},
            {name:"Tropical Fish",emoji:"üê†",length:0.1,weight:0.02,height:0.05,category:"sea",facts:"Clownfish can change sex. Lives symbiotically with anemones. Immune to their stings."},
            {name:"Bluebird",emoji:"üê¶",length:0.17,weight:0.03,height:0.1,category:"air",facts:"Symbol of happiness in many cultures. Can see ultraviolet light invisible to humans."},
            {name:"Dove",emoji:"üïäÔ∏è",length:0.3,weight:0.15,height:0.2,category:"air",facts:"Symbol of peace worldwide. Exceptional navigators using Earth's magnetic field. Mates for life."},
            {name:"Humpback Whale",emoji:"üê≥",length:15,weight:30000,height:4,category:"sea",facts:"Famous for complex songs lasting hours. Migrates 25,000 km yearly. Breaches completely out of water."},
            {name:"Capybara",emoji:"ü¶´",length:1.3,weight:55,height:0.6,category:"land",facts:"World's largest rodent. Highly social and calm. Can hold breath for 5 minutes underwater."},

            {name:"Leopard",emoji:"üêÜ",length:1.4,weight:50,height:0.65,category:"land",facts:"Most adaptable big cat. Can carry prey twice its weight up trees. Rosette spots are unique like fingerprints."},
            {name:"Chipmunk",emoji:"üêøÔ∏è",length:0.25,weight:0.1,height:0.05,category:"small",facts:"Cheeks can expand to 3x head size. Stores up to 165 acorns per day. Burrows can be 10m long."},
            {name:"Jaguar",emoji:"üêÜ",length:1.7,weight:100,height:0.75,category:"land",facts:"Strongest bite of all big cats. Name means 'he who kills with one leap.' Only big cat in Americas."},
            {name:"Ram",emoji:"üêè",length:1.7,weight:120,height:1.0,category:"land",facts:"Horns can weigh 14kg. Clashes at 60 km/h can be heard a mile away. Horns grow throughout life."},
            {name:"Mammoth",emoji:"ü¶£",length:4.0,weight:6000,height:3.4,category:"land",facts:"Extinct ~4000 years ago. Had 5m long curved tusks. Adapted to ice age with thick fur and small ears."},
            {name:"Dodo",emoji:"ü¶§",length:1.0,weight:15,height:0.7,category:"air",facts:"Extinct since 1681. Flightless bird from Mauritius. Had no natural predators until humans arrived."},
            {name:"T-Rex",emoji:"ü¶ñ",length:12,weight:8000,height:4,category:"land",facts:"Extinct 66 million years ago. Had bite force of 6 tons. Arms were actually quite muscular despite size."},
            {name:"Sauropod",emoji:"ü¶ï",length:25,weight:50000,height:12,category:"land",facts:"Largest land animals ever. Some species over 30m long. Needed to eat constantly to fuel massive bodies."},
            {name:"Microbe",emoji:"ü¶†",length:0.000002,weight:0.000000000001,height:0.000001,category:"small",facts:"Trillions live in your body. First life on Earth. Can survive in extreme environments including space."},
            {name:"Ox",emoji:"üêÇ",length:2.5,weight:700,height:1.5,category:"land",facts:"Domesticated for 6000+ years. Can pull loads 1.5x their weight. Work animals across many cultures."},
            {name:"Unicorn",emoji:"ü¶Ñ",length:2.4,weight:500,height:1.6,category:"land",facts:"Mythical horse with single horn. Symbol of purity in medieval lore. National animal of Scotland."},
            {name:"Dragon",emoji:"üêâ",length:15,weight:3000,height:5,category:"land",facts:"Mythical creature across cultures. Eastern dragons symbolize wisdom. Western dragons guard treasure."},
        ];

        animals.forEach(function(a){
            a.size = Math.max(a.height, a.length);
            a.sizeType = a.height >= a.length ? 'height' : 'length';
        });

        var humanAnimal = animals.find(function(a){ return a.name === "Human"; });
        var selected = [];
        var currentFilter = 'all';
        var searchTerm = '';
        var showHumanRef = true;
        var useMetric = true;
        var sortBy = 'name';
        var M_TO_FT = 3.28084;
        var KG_TO_LB = 2.20462;
        var gridEl = document.getElementById('animalGrid');
        var comparisonEl = document.getElementById('comparison');
        var filterBar = document.getElementById('filterBar');
        var searchBox = document.getElementById('searchBox');
        var humanRefToggle = document.getElementById('humanRef');
        var infoOverlay = document.getElementById('infoOverlay');
        var sortSelect = document.getElementById('sortSelect');

        function fmtLen(val, short){
            if(short === undefined) short = true;
            if(useMetric){
                if(val >= 1) return short ? val.toFixed(1)+'m' : val.toFixed(1)+' meters';
                if(val >= 0.01) return short ? (val*100).toFixed(0)+'cm' : (val*100).toFixed(1)+' cm';
                return short ? (val*1000).toFixed(1)+'mm' : (val*1000).toFixed(1)+' mm';
            } else {
                var ft = val * M_TO_FT;
                if(ft >= 1){
                    var feet = Math.floor(ft);
                    var inches = Math.round((ft - feet)*12);
                    return short ? (inches > 0 ? feet+"'"+inches+'"' : feet+"'") : (inches > 0 ? feet+'ft '+inches+'in' : feet+' feet');
                }
                return short ? (ft*12).toFixed(1)+'"' : (ft*12).toFixed(1)+' inches';
            }
        }

        function fmtWt(w, short){
            if(short === undefined) short = true;
            if(useMetric){
                if(w >= 1000) return short ? (w/1000).toFixed(1)+'t' : (w/1000).toFixed(1)+' tonnes';
                if(w >= 1) return short ? Math.round(w)+'kg' : Math.round(w)+' kg';
                if(w >= 0.001) return short ? (w*1000).toFixed(0)+'g' : (w*1000).toFixed(0)+' grams';
                return short ? (w*1e6).toFixed(0)+'mg' : (w*1e6).toFixed(0)+' mg';
            } else {
                var lb = w * KG_TO_LB;
                if(lb >= 2000) return short ? (lb/2000).toFixed(1)+' tons' : (lb/2000).toFixed(1)+' tons';
                if(lb >= 1) return short ? Math.round(lb)+' lb' : Math.round(lb).toLocaleString()+' lb';
                return short ? (lb*16).toFixed(1)+' oz' : (lb*16).toFixed(1)+' oz';
            }
        }

        function isSelected(name){ return selected.some(function(s){ return s.name === name; }); }
        function findAnimal(name){ return animals.find(function(a){ return a.name === name; }); }

        function toggleAnimal(name){
            var animal = findAnimal(name);
            if(!animal) return;
            var idx = selected.findIndex(function(s){ return s.name === name; });
            if(idx > -1) selected.splice(idx, 1);
            else if(selected.length < 4) selected.push(animal);
            render();
        }

        function removeAnimal(name){
            var idx = selected.findIndex(function(s){ return s.name === name; });
            if(idx > -1){ selected.splice(idx, 1); render(); }
        }

        function showInfo(name){
            var a = findAnimal(name);
            if(!a) return;
            document.getElementById('modalEmoji').textContent = a.emoji;
            document.getElementById('modalName').textContent = a.name;
            var catLabels = {land:'Land Animal',sea:'Marine Animal',air:'Bird',small:'Small Creature',reptile:'Reptile'};
            document.getElementById('modalCategory').textContent = catLabels[a.category] || a.category;
            document.getElementById('modalBody').innerHTML =
                '<div class="info-row"><span class="info-label">Height ‚Üï</span><span class="info-value">' + fmtLen(a.height, false) + '</span></div>' +
                '<div class="info-row"><span class="info-label">Length ‚Üî</span><span class="info-value">' + fmtLen(a.length, false) + '</span></div>' +
                '<div class="info-row"><span class="info-label">Weight</span><span class="info-value">' + fmtWt(a.weight, false) + '</span></div>' +
                '<div class="info-fact">' + a.facts + '</div>';
            infoOverlay.classList.add('active');
        }

        function hideInfo(){ infoOverlay.classList.remove('active'); }

        function sortAnimals(arr){
            var sorted = arr.slice();
            switch(sortBy){
                case 'name': return sorted.sort(function(a,b){ return a.name.localeCompare(b.name); });
                case 'name-desc': return sorted.sort(function(a,b){ return b.name.localeCompare(a.name); });
                case 'size-desc': return sorted.sort(function(a,b){ return b.size - a.size; });
                case 'size-asc': return sorted.sort(function(a,b){ return a.size - b.size; });
                case 'weight-desc': return sorted.sort(function(a,b){ return b.weight - a.weight; });
                case 'weight-asc': return sorted.sort(function(a,b){ return a.weight - b.weight; });
                default: return sorted;
            }
        }

        function renderGrid(){
            var filtered = animals.filter(function(a){
                var matchCat = currentFilter === 'all' || a.category === currentFilter;
                var matchSearch = a.name.toLowerCase().includes(searchTerm.toLowerCase());
                return matchCat && matchSearch;
            });
            filtered = sortAnimals(filtered);
            gridEl.innerHTML = filtered.map(function(a){
                var dimIcon = a.sizeType === 'height' ? 'H‚Üï' : 'L‚Üî';
                return '<div class="animal-card' + (isSelected(a.name) ? ' selected' : '') + '" data-name="' + a.name + '">' +
                    '<button class="card-info-btn" data-info="' + a.name + '" title="View details">i</button>' +
                    '<span class="emoji">' + a.emoji + '</span>' +
                    '<div class="animal-name">' + a.name + '</div>' +
                    '<div class="animal-stats">' + dimIcon + ' ' + fmtLen(a.size) + ' ¬∑ ' + fmtWt(a.weight) + '</div></div>';
            }).join('');
        }

        function getDisplayAnimals(){
            var display = selected.slice();
            if(showHumanRef && !isSelected('Human') && humanAnimal) display.push(Object.assign({}, humanAnimal, {isRef: true}));
            return display;
        }

        function renderComparison(){
            var display = getDisplayAnimals();
            if(display.length === 0){
                comparisonEl.innerHTML = '<div class="empty-state"><div class="big-emoji">üìè</div><h3>Select animals to compare</h3><p>Click cards above or enable "Human for scale"</p></div>';
                return;
            }

            var html = '<div class="comparison-header"><div><h2 class="comparison-title">Size Comparison</h2>';
            if(selected.length > 1){
                var heights = selected.map(function(a){ return a.height; });
                var lengths = selected.map(function(a){ return a.length; });
                var weights = selected.map(function(a){ return a.weight; });
                var hRatio = (Math.max.apply(null, heights) / Math.min.apply(null, heights)).toFixed(1);
                var lRatio = (Math.max.apply(null, lengths) / Math.min.apply(null, lengths)).toFixed(1);
                var wRatio = (Math.max.apply(null, weights) / Math.min.apply(null, weights)).toFixed(1);
                html += '<p class="comparison-subtitle">Height: ' + hRatio + '√ó ¬∑ Length: ' + lRatio + '√ó ¬∑ Weight: ' + wRatio + '√ó</p>';
            }
            html += '</div><div class="selected-pills">';
            selected.forEach(function(a){
                html += '<span class="selected-pill"><span class="pill-emoji">' + a.emoji + '</span>' + a.name +
                    '<button class="remove-pill" data-name="' + a.name + '">√ó</button></span>';
            });
            html += '</div></div>';

            if(selected.length > 0){
                var totalWeight = selected.reduce(function(sum, a){ return sum + a.weight; }, 0);
                var avgSize = selected.reduce(function(sum, a){ return sum + a.size; }, 0) / selected.length;
                html += '<div class="stats-row">' +
                    '<div class="stat-card"><div class="stat-value">' + selected.length + '</div><div class="stat-label">Animals</div></div>' +
                    '<div class="stat-card"><div class="stat-value">' + fmtWt(totalWeight) + '</div><div class="stat-label">Total Weight</div></div>' +
                    '<div class="stat-card"><div class="stat-value">' + fmtLen(avgSize) + '</div><div class="stat-label">Avg Size</div></div></div>';
            }

            var maxS = Math.max.apply(null, display.map(function(a){ return a.size; }));
            var minS = Math.min.apply(null, display.map(function(a){ return a.size; }));
            var ratio = maxS / minS;
            var useLog = ratio > 100;
            var availablePx = 280;
            var minPx = 22;

            function getSize(s){
                if(useLog){
                    var logMin = Math.log10(minS);
                    var logMax = Math.log10(maxS);
                    var norm = (Math.log10(s) - logMin) / (logMax - logMin);
                    return minPx + norm * norm * (availablePx - minPx);
                }
                return Math.max(minPx, (s / maxS) * availablePx);
            }

            html += '<div class="visual-wrapper"><div class="ruler"><span class="ruler-title">SCALE</span>';

            var ticks = [];
            if(useLog){
                var p = Math.floor(Math.log10(minS));
                while(Math.pow(10, p) <= maxS * 1.1){
                    var v = Math.pow(10, p);
                    if(v >= minS * 0.9 && v <= maxS * 1.1){
                        ticks.push({v: v, pos: getSize(v), major: true});
                    }
                    p++;
                }
            } else {
                var step = 0.5;
                if(maxS > 3) step = 1;
                if(maxS > 10) step = 2;
                if(maxS < 0.5) step = 0.1;
                if(maxS < 0.1) step = 0.02;
                for(var v = step; v <= maxS * 1.05; v += step){
                    ticks.push({v: v, pos: getSize(v), major: v % 1 === 0 || step >= 1});
                }
            }
            ticks.forEach(function(t){
                html += '<div class="ruler-tick' + (t.major ? ' major' : '') + '" style="bottom:' + t.pos + 'px">' + fmtLen(t.v) + '</div>';
            });

            html += '</div><div class="visual-area" style="min-height:' + (availablePx + 70) + 'px">';
            html += '<div class="grass"></div><div class="ground"></div>';
            html += '<div class="scale-info' + (useLog ? ' warning' : '') + '">' + (useLog ? '‚ö†Ô∏è Log scale' : 'üìè Proportional') + '</div>';

            display.forEach(function(a){
                var sizePx = getSize(a.size);
                var refClass = a.isRef ? ' reference' : '';
                var dimIcon = a.sizeType === 'height' ? '‚Üî' : '‚Üï';

                html += '<div class="animal-display' + refClass + '">' +
                    '<div class="bracket-container" style="height:' + sizePx + 'px">' +
                    '<div class="bracket-left"></div><div class="bracket-right"></div>' +
                    '<span class="bracket-label">' + fmtLen(a.size) + '<span class="dim-label"> ' + dimIcon + '</span></span>' +
                    '<span class="visual-emoji" style="font-size:' + sizePx + 'px">' + a.emoji + '</span>' +
                    '</div><span class="visual-name">' + a.name + '</span></div>';
            });

            html += '</div></div>';

            if(selected.length > 0){
                html += '<div class="details">';
                var minH = Math.min.apply(null, selected.map(function(a){ return a.height; }));
                var minL = Math.min.apply(null, selected.map(function(a){ return a.length; }));
                selected.forEach(function(a){
                    var relH = (a.height / minH).toFixed(1);
                    var relL = (a.length / minL).toFixed(1);
                    html += '<div class="detail-card"><div class="detail-title">' + a.emoji + ' ' + a.name;
                    if(selected.length > 1){
                        if(relH > 1.01) html += ' <span class="ratio-badge">' + relH + '√ó taller</span>';
                        if(relL > 1.01) html += ' <span class="ratio-badge">' + relL + '√ó longer</span>';
                    }
                    html += '</div><div class="detail-content">' +
                        '<strong>Height ‚Üï:</strong> ' + fmtLen(a.height, false) + '<br>' +
                        '<strong>Length ‚Üî:</strong> ' + fmtLen(a.length, false) + '<br>' +
                        '<strong>Weight:</strong> ' + fmtWt(a.weight, false) + '<br>' +
                        '<strong>üí°</strong> ' + a.facts + '</div></div>';
                });
                html += '</div>';
            }

            html += '<p class="source-note">‚Üï = height, ‚Üî = length. Data validated against ' +
                '<a href="https://www.wikipedia.org/" target="_blank">Wikipedia</a>, ' +
                '<a href="https://www.dimensions.com/" target="_blank">Dimensions.com</a>, ' +
                '<a href="https://sizegraf.com/tools/animal-size-comparison-tool/" target="_blank">SizeGraf</a> (way better than this tool), ' +
                '<a href="https://www.britannica.com/" target="_blank">Britannica</a>, ' +
                '<a href="https://www.noaa.gov/" target="_blank">NOAA</a></p>';

            comparisonEl.innerHTML = html;
        }

        function render(){ renderGrid(); renderComparison(); }

        gridEl.addEventListener('click', function(e){
            if(e.target.classList.contains('card-info-btn')){
                e.stopPropagation();
                showInfo(e.target.dataset.info);
                return;
            }
            var card = e.target.closest('.animal-card');
            if(card && card.dataset.name) toggleAnimal(card.dataset.name);
        });

        comparisonEl.addEventListener('click', function(e){
            if(e.target.classList.contains('remove-pill')){
                e.preventDefault();
                removeAnimal(e.target.dataset.name);
            }
        });

        filterBar.addEventListener('click', function(e){
            if(e.target.classList.contains('filter-btn')){
                filterBar.querySelectorAll('.filter-btn').forEach(function(b){ b.classList.remove('active'); });
                e.target.classList.add('active');
                currentFilter = e.target.dataset.category;
                render();
            }
        });

        document.querySelectorAll('.unit-btn').forEach(function(btn){
            btn.addEventListener('click', function(){
                document.querySelectorAll('.unit-btn').forEach(function(b){ b.classList.remove('active'); });
                btn.classList.add('active');
                useMetric = btn.dataset.unit === 'metric';
                render();
            });
        });

        searchBox.addEventListener('input', function(e){ searchTerm = e.target.value; render(); });
        humanRefToggle.addEventListener('change', function(e){ showHumanRef = e.target.checked; render(); });
        sortSelect.addEventListener('change', function(e){ sortBy = e.target.value; render(); });

        document.querySelectorAll('.quick-pick-btn').forEach(function(btn){
            btn.addEventListener('click', function(){
                var names = btn.dataset.animals.split(',');
                selected = names.map(function(n){ return findAnimal(n.trim()); }).filter(Boolean);
                render();
            });
        });

        infoOverlay.addEventListener('click', function(e){ if(e.target === infoOverlay) hideInfo(); });
        document.getElementById('infoClose').addEventListener('click', hideInfo);
        document.addEventListener('keydown', function(e){ if(e.key === 'Escape') hideInfo(); });

        render();
    })();
</script>
<script src="../logo.js"></script>
</body>
</html>