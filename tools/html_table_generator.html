<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📊</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Table Generator</title>
    <meta name="description" content="Create beautiful HTML tables with this easy-to-use generator. Customize styles, colors, and download the code.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: {'gray-750': '#2a2f3a'}
            }
        }
    }</script>
    <style>
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .copy-animation {
            animation: copy-pulse 1s;
        }
        @keyframes copy-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .tg-loader {
            border: 3px solid rgba(0,0,0,0.1);
            border-radius: 50%;
            border-top: 3px solid #3498db;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .dark .tg-loader {
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid #3498db;
        }
        .hljs-container pre {
            tab-size: 2;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans transition-colors duration-200 dark:bg-gray-900 dark:text-gray-200">
<div class="container mx-auto px-4 py-8 max-w-6xl">
    <header class="flex justify-between items-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-blue-600 dark:text-blue-400">Table Generator</h1>
        <div class="flex items-center space-x-2">
            <button id="theme-toggle" aria-label="Toggle dark mode" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                <svg id="light-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"></path></svg>
                <svg id="dark-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
            </button>
        </div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
        <!-- Left panel: Configuration -->
        <div class="lg:col-span-2">
            <form id="table-form" class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                <div class="tabs flex border-b border-gray-200 dark:border-gray-700">
                    <button type="button" class="tab-btn active px-4 py-3 text-blue-600 dark:text-blue-400 border-b-2 border-blue-500 focus:outline-none" data-tab="basic">Basic</button>
                    <button type="button" class="tab-btn px-4 py-3 text-gray-600 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-300 focus:outline-none" data-tab="style">Style</button>
                    <button type="button" class="tab-btn px-4 py-3 text-gray-600 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-300 focus:outline-none" data-tab="advanced">Advanced</button>
                    <button type="button" class="tab-btn px-4 py-3 text-gray-600 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-300 focus:outline-none" data-tab="templates">Templates</button>
                </div>

                <!-- Basic Tab -->
                <div id="basic-tab" class="tab-content p-6 space-y-6">
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Structure</h2>
                            <div class="tooltip">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                <span class="tooltip-text">Set the number of rows and columns for your table structure</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="rows">Rows</label>
                                <input class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="rows" type="number" min="1" max="50" value="3">
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="columns">Columns</label>
                                <input class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="columns" type="number" min="1" max="20" value="3">
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Dimensions</h2>
                            <div class="tooltip">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                <span class="tooltip-text">Set size and spacing of table cells</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="cell-width">Cell Width (px)</label>
                                <input class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="cell-width" type="number" min="0" max="500" value="100">
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="cell-height">Cell Height (px)</label>
                                <input class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="cell-height" type="number" min="0" max="200" value="50">
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="border-width">Border Width (px)</label>
                                <input class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="border-width" type="number" min="0" max="10" value="1">
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="padding">Cell Padding (px)</label>
                                <input class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="padding" type="number" min="0" max="30" value="8">
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Options</h2>
                            <div class="tooltip">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                <span class="tooltip-text">Configure basic table elements</span>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input id="header" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600" checked>
                                <label for="header" class="ml-2 text-gray-700 dark:text-gray-300">Include Header Row</label>
                            </div>
                            <div class="flex items-center">
                                <input id="caption" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600">
                                <label for="caption" class="ml-2 text-gray-700 dark:text-gray-300">Add Table Caption</label>
                            </div>
                            <div id="caption-text-container" class="ml-6 hidden">
                                <input class="mt-1 shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="caption-text" type="text" placeholder="Table Caption" value="Table Caption">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Style Tab -->
                <div id="style-tab" class="tab-content p-6 space-y-6 hidden">
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Colors</h2>
                            <div class="tooltip">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                <span class="tooltip-text">Customize colors for your table elements</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="border-color">Border Color</label>
                                <div class="flex">
                                    <input class="w-12 h-10 rounded-l-md border border-gray-300 dark:border-gray-600" type="color" id="border-color" value="#dddddd">
                                    <input class="flex-1 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 py-2 px-3 text-gray-700 dark:text-gray-200" type="text" id="border-color-text" value="#dddddd">
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="bg-color">Background Color</label>
                                <div class="flex">
                                    <input class="w-12 h-10 rounded-l-md border border-gray-300 dark:border-gray-600" type="color" id="bg-color" value="#ffffff">
                                    <input class="flex-1 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 py-2 px-3 text-gray-700 dark:text-gray-200" type="text" id="bg-color-text" value="#ffffff">
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="text-color">Text Color</label>
                                <div class="flex">
                                    <input class="w-12 h-10 rounded-l-md border border-gray-300 dark:border-gray-600" type="color" id="text-color" value="#333333">
                                    <input class="flex-1 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 py-2 px-3 text-gray-700 dark:text-gray-200" type="text" id="text-color-text" value="#333333">
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="header-bg-color">Header BG Color</label>
                                <div class="flex">
                                    <input class="w-12 h-10 rounded-l-md border border-gray-300 dark:border-gray-600" type="color" id="header-bg-color" value="#f3f4f6">
                                    <input class="flex-1 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 py-2 px-3 text-gray-700 dark:text-gray-200" type="text" id="header-bg-color-text" value="#f3f4f6">
                                </div>
                            </div>
                        </div>

                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input id="striped" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600">
                                <label for="striped" class="ml-2 text-gray-700 dark:text-gray-300">Striped Rows</label>
                            </div>
                            <div id="stripe-color-container" class="ml-6 hidden">
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="stripe-color">Stripe Color</label>
                                <div class="flex">
                                    <input class="w-12 h-10 rounded-l-md border border-gray-300 dark:border-gray-600" type="color" id="stripe-color" value="#f9fafb">
                                    <input class="flex-1 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 py-2 px-3 text-gray-700 dark:text-gray-200" type="text" id="stripe-color-text" value="#f9fafb">
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Typography</h2>
                            <div class="tooltip">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                <span class="tooltip-text">Adjust font settings</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="font-family">Font Family</label>
                                <select class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="font-family">
                                    <option value="system-ui, sans-serif">System UI</option>
                                    <option value="Arial, sans-serif">Arial</option>
                                    <option value="Helvetica, sans-serif">Helvetica</option>
                                    <option value="Times New Roman, serif">Times New Roman</option>
                                    <option value="Georgia, serif">Georgia</option>
                                    <option value="Courier New, monospace">Courier New</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="font-size">Font Size (px)</label>
                                <input class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="font-size" type="number" min="8" max="36" value="14">
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Borders & Alignment</h2>
                            <div class="tooltip">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                <span class="tooltip-text">Configure border styles and text alignment</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="border-style">Border Style</label>
                                <select class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="border-style">
                                    <option value="solid">Solid</option>
                                    <option value="dashed">Dashed</option>
                                    <option value="dotted">Dotted</option>
                                    <option value="double">Double</option>
                                    <option value="none">None</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="text-align">Text Alignment</label>
                                <select class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="text-align">
                                    <option value="left">Left</option>
                                    <option value="center">Center</option>
                                    <option value="right">Right</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Tab -->
                <div id="advanced-tab" class="tab-content p-6 space-y-6 hidden">
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Effects & Behavior</h2>
                            <div class="tooltip">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                <span class="tooltip-text">Add interactive elements and responsive behavior</span>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input id="hover-effect" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600">
                                <label for="hover-effect" class="ml-2 text-gray-700 dark:text-gray-300">Row Hover Effect</label>
                            </div>
                            <div id="hover-color-container" class="ml-6 hidden">
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="hover-color">Hover Color</label>
                                <div class="flex">
                                    <input class="w-12 h-10 rounded-l-md border border-gray-300 dark:border-gray-600" type="color" id="hover-color" value="#f0f4f8">
                                    <input class="flex-1 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 py-2 px-3 text-gray-700 dark:text-gray-200" type="text" id="hover-color-text" value="#f0f4f8">
                                </div>
                            </div>
                            <div class="flex items-center mt-2">
                                <input id="responsive" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600">
                                <label for="responsive" class="ml-2 text-gray-700 dark:text-gray-300">Responsive Table</label>
                            </div>
                            <div class="flex items-center mt-2">
                                <input id="auto-update" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600" checked>
                                <label for="auto-update" class="ml-2 text-gray-700 dark:text-gray-300">Auto-update Preview</label>
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Accessibility</h2>
                            <div class="tooltip">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                <span class="tooltip-text">Improve accessibility for screen readers and assistive technologies</span>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2" for="table-summary">Table Summary <span class="text-xs text-gray-500">(for screen readers)</span></label>
                                <input class="shadow-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md w-full py-2 px-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" id="table-summary" type="text" placeholder="Brief description of table contents">
                            </div>
                            <div class="flex items-center mt-2">
                                <input id="scope-headers" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600" checked>
                                <label for="scope-headers" class="ml-2 text-gray-700 dark:text-gray-300">Add scope attribute to headers</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Templates Tab -->
                <div id="templates-tab" class="tab-content p-6 space-y-4 hidden">
                    <div class="flex items-center justify-between">
                        <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Table Templates</h2>
                        <div class="tooltip">
                            <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                            <span class="tooltip-text">Pre-designed table styles for quick use</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Click on a template to apply its settings instantly</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="template-card cursor-pointer p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors" data-template="simple">
                            <h3 class="font-medium mb-1">Simple</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Clean minimal design</p>
                        </div>
                        <div class="template-card cursor-pointer p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors" data-template="modern">
                            <h3 class="font-medium mb-1">Modern</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Contemporary style with hover effects</p>
                        </div>
                        <div class="template-card cursor-pointer p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors" data-template="professional">
                            <h3 class="font-medium mb-1">Professional</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Business-ready formatting</p>
                        </div>
                        <div class="template-card cursor-pointer p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors" data-template="colorful">
                            <h3 class="font-medium mb-1">Colorful</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Vibrant design with accent colors</p>
                        </div>
                        <div class="template-card cursor-pointer p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors" data-template="accessible">
                            <h3 class="font-medium mb-1">Accessible</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400">High contrast, WCAG compliant</p>
                        </div>
                        <div class="template-card cursor-pointer p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors" data-template="compact">
                            <h3 class="font-medium mb-1">Compact</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Dense layout for data-heavy tables</p>
                        </div>
                    </div>
                </div>

                <div class="px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600">
                    <button id="generate-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors" type="button">
                        Generate Table
                    </button>
                </div>
            </form>
        </div>

        <!-- Right panel: Preview and Code -->
        <div class="lg:col-span-3 space-y-6">
            <!-- Preview Section -->
            <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                <div class="flex justify-between items-center border-b border-gray-200 dark:border-gray-700">
                    <div class="px-6 py-3 font-medium">Live Preview</div>
                    <div class="flex items-center space-x-2 px-6 py-3">
                        <span id="preview-status" class="text-sm text-gray-500 dark:text-gray-400"></span>
                        <button id="refresh-preview" class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors text-sm">
                            Refresh
                        </button>
                    </div>
                </div>
                <div class="p-6 overflow-x-auto">
                    <div id="table-preview" class="min-h-[200px]"></div>
                </div>
            </div>

            <!-- Code Section -->
            <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
                <div class="flex justify-between items-center border-b border-gray-200 dark:border-gray-700">
                    <div class="px-6 py-3 font-medium">Generated HTML</div>
                    <div class="px-6 py-3 flex space-x-3">
                        <button id="format-btn" class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors text-sm">
                            Format
                        </button>
                        <button id="minify-btn" class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors text-sm">
                            Minify
                        </button>
                    </div>
                </div>
                <div class="p-6 bg-gray-50 dark:bg-gray-750 overflow-x-auto hljs-container">
                    <pre class="text-sm m-0"><code id="generated-code" class="language-html"></code></pre>
                </div>
                <div class="px-6 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3">
                    <button id="copy-btn" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors flex items-center">
                        <span>Copy HTML</span>
                    </button>
                    <button id="download-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors">
                        Download HTML
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="mt-12 py-6 border-t border-gray-200 dark:border-gray-700">
    <div class="container mx-auto px-4 text-center text-gray-500 dark:text-gray-400 text-sm">
        <p>HTML Table Generator — Created with ❤️ for web developers</p>
    </div>
</footer>

<!-- PrismJS core and plugins -->
<script>
    // PRISM HIGHLIGHT REPLACEMENT
    // This is a simplified version of syntax highlighting for our HTML
    const hljs = {
        highlight: function(text, language) {
            if (language !== 'html') return text;

            // Simple HTML syntax highlighting
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/("[^"]*")/g, '<span style="color:#669900">$1</span>') // attributes
                .replace(/(&lt;[\/]?[a-z0-9]+)/gi, '<span style="color:#0077aa">$1</span>') // tags
                .replace(/(&lt;style.*?&gt;)(.*?)(&lt;\/style&gt;)/gs, function(match, p1, p2, p3) {
                    // Handle CSS in style tags
                    const highlightedCSS = p2.replace(/([a-z\-]+):/g, '<span style="color:#669900">$1</span>:');
                    return '<span style="color:#0077aa">' + p1 + '</span>' + highlightedCSS + '<span style="color:#0077aa">' + p3 + '</span>';
                });
        }
    };

    // Templates
    const templates = {
        simple: {
            rows: 3, columns: 3, cellWidth: 100, cellHeight: 50, borderWidth: 1, padding: 8, header: true, striped: false, caption: false,
            borderColor: "#dddddd", bgColor: "#ffffff", textColor: "#333333", headerBgColor: "#f8f9fa", stripeColor: "#f3f4f6",
            fontFamily: "Arial, sans-serif", fontSize: 14, borderStyle: "solid", textAlign: "left", hoverEffect: false,
            hoverColor: "#f9fafb", responsive: false, tableSummary: "", scopeHeaders: true
        },
        modern: {
            rows: 4, columns: 4, cellWidth: 120, cellHeight: 60, borderWidth: 1, padding: 12, header: true, striped: true, caption: true,
            borderColor: "#e5e7eb", bgColor: "#ffffff", textColor: "#374151", headerBgColor: "#f9fafb", stripeColor: "#f3f4f6",
            fontFamily: "system-ui, sans-serif", fontSize: 14, borderStyle: "solid", textAlign: "left", hoverEffect: true,
            hoverColor: "#eef2ff", responsive: true, tableSummary: "Modern table design with responsive features", scopeHeaders: true,
            captionText: "Modern Table Example"
        },
        professional: {
            rows: 5, columns: 4, cellWidth: 150, cellHeight: 50, borderWidth: 1, padding: 10, header: true, striped: true, caption: true,
            borderColor: "#cbd5e1", bgColor: "#ffffff", textColor: "#334155", headerBgColor: "#f1f5f9", stripeColor: "#f8fafc",
            fontFamily: "Arial, sans-serif", fontSize: 14, borderStyle: "solid", textAlign: "left", hoverEffect: true,
            hoverColor: "#f1f5f9", responsive: true, tableSummary: "Professional data table", scopeHeaders: true,
            captionText: "Professional Data Table"
        },
        colorful: {
            rows: 4, columns: 4, cellWidth: 120, cellHeight: 60, borderWidth: 1, padding: 10, header: true, striped: true, caption: true,
            borderColor: "#8b5cf6", bgColor: "#ffffff", textColor: "#4c1d95", headerBgColor: "#c4b5fd", stripeColor: "#ede9fe",
            fontFamily: "system-ui, sans-serif", fontSize: 14, borderStyle: "solid", textAlign: "center", hoverEffect: true,
            hoverColor: "#ddd6fe", responsive: false, tableSummary: "Colorful presentation table", scopeHeaders: true,
            captionText: "Colorful Presentation"
        },
        accessible: {
            rows: 4, columns: 3, cellWidth: 120, cellHeight: 60, borderWidth: 2, padding: 12, header: true, striped: true, caption: true,
            borderColor: "#1e40af", bgColor: "#ffffff", textColor: "#1e3a8a", headerBgColor: "#dbeafe", stripeColor: "#eff6ff",
            fontFamily: "Arial, sans-serif", fontSize: 16, borderStyle: "solid", textAlign: "left", hoverEffect: true,
            hoverColor: "#bfdbfe", responsive: true, tableSummary: "Accessible table with high contrast colors", scopeHeaders: true,
            captionText: "Accessible Data Table"
        },
        compact: {
            rows: 6, columns: 5, cellWidth: 90, cellHeight: 40, borderWidth: 1, padding: 6, header: true, striped: true, caption: false,
            borderColor: "#e2e8f0", bgColor: "#ffffff", textColor: "#475569", headerBgColor: "#f1f5f9", stripeColor: "#f8fafc",
            fontFamily: "system-ui, sans-serif", fontSize: 12, borderStyle: "solid", textAlign: "center", hoverEffect: false,
            hoverColor: "#f1f5f9", responsive: false, tableSummary: "Compact data table for dense information", scopeHeaders: true
        }
    };

    // State management
    const state = {
        lastGeneratedTable: '',
        currentFormat: 'formatted',
        loading: false
    };

    // Initialize app on load
    document.addEventListener('DOMContentLoaded', () => {
        setupEventListeners();
        initializeApp();
    });

    // DOM Elements
    function getElement(id) {
        const el = document.getElementById(id);
        if (!el) console.warn(`Element with ID "${id}" not found`);
        return el;
    }

    function getElements(selector) {
        return document.querySelectorAll(selector);
    }

    // Setup initial state of the application
    function initializeApp() {
        // Set initial tab
        getElements('.tab-btn')[0].click();

        // Generate initial table preview
        generateTableAndUpdate();

        // Setup conditional displays based on initial values
        toggleConditionalDisplay('striped', 'stripe-color-container');
        toggleConditionalDisplay('caption', 'caption-text-container');
        toggleConditionalDisplay('hover-effect', 'hover-color-container');

        // Set theme based on system preference or saved preference
        initializeTheme();
    }

    // Initialize theme based on preferences
    function initializeTheme() {
        if (localStorage.getItem('theme') === 'dark' ||
            (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            getElement('light-icon').classList.add('hidden');
            getElement('dark-icon').classList.remove('hidden');
        }
    }

    // Setup event listeners
    function setupEventListeners() {
        // Tab Navigation
        getElements('.tab-btn').forEach(button => {
            button.addEventListener('click', () => switchTab(button));
        });

        // Theme Toggle
        getElement('theme-toggle').addEventListener('click', toggleTheme);

        // Conditional display toggles
        setupToggleEvents();

        // Color input syncing
        setupColorInputSync('border-color');
        setupColorInputSync('bg-color');
        setupColorInputSync('text-color');
        setupColorInputSync('header-bg-color');
        setupColorInputSync('stripe-color');
        setupColorInputSync('hover-color');

        // Templates
        getElements('.template-card').forEach(card => {
            card.addEventListener('click', () => applyTemplate(card.getAttribute('data-template')));
        });

        // Form input change events for live preview
        setupFormChangeEvents();

        // Buttons
        getElement('generate-btn').addEventListener('click', generateTableAndUpdate);
        getElement('refresh-preview').addEventListener('click', generateTableAndUpdate);
        getElement('copy-btn').addEventListener('click', copyHtmlToClipboard);
        getElement('download-btn').addEventListener('click', downloadHtml);
        getElement('format-btn').addEventListener('click', () => formatCode('formatted'));
        getElement('minify-btn').addEventListener('click', () => formatCode('minified'));
    }

    // Setup toggle events for conditional displays
    function setupToggleEvents() {
        const toggles = [
            { toggle: 'striped', target: 'stripe-color-container' },
            { toggle: 'caption', target: 'caption-text-container' },
            { toggle: 'hover-effect', target: 'hover-color-container' }
        ];

        toggles.forEach(item => {
            const toggleEl = getElement(item.toggle);
            if (toggleEl) {
                toggleEl.addEventListener('change', e => {
                    toggleConditionalDisplay(item.toggle, item.target);
                    updatePreviewIfEnabled();
                });
            }
        });
    }

    // Toggle conditional display containers
    function toggleConditionalDisplay(toggleId, targetId) {
        const toggleEl = getElement(toggleId);
        const targetEl = getElement(targetId);

        if (toggleEl && targetEl) {
            targetEl.classList.toggle('hidden', !toggleEl.checked);
        }
    }

    // Setup form change events
    function setupFormChangeEvents() {
        const formInputs = getElements('#table-form input, #table-form select');
        formInputs.forEach(input => {
            input.addEventListener('input', debounce(updatePreviewIfEnabled, 300));
        });
    }

    // Switch active tab
    function switchTab(button) {
        getElements('.tab-btn').forEach(btn => {
            btn.classList.remove('active', 'text-blue-600', 'dark:text-blue-400', 'border-b-2', 'border-blue-500');
            btn.classList.add('text-gray-600', 'dark:text-gray-400', 'hover:text-blue-500', 'dark:hover:text-blue-300');
        });

        button.classList.remove('text-gray-600', 'dark:text-gray-400', 'hover:text-blue-500', 'dark:hover:text-blue-300');
        button.classList.add('active', 'text-blue-600', 'dark:text-blue-400', 'border-b-2', 'border-blue-500');

        const tabName = button.getAttribute('data-tab');
        getElements('.tab-content').forEach(content => {
            content.classList.add('hidden');
            if (content.id === `${tabName}-tab`) {
                content.classList.remove('hidden');
            }
        });
    }

    // Toggle theme between light and dark
    function toggleTheme() {
        if (document.documentElement.classList.contains('dark')) {
            document.documentElement.classList.remove('dark');
            localStorage.setItem('theme', 'light');
            getElement('light-icon').classList.remove('hidden');
            getElement('dark-icon').classList.add('hidden');
        } else {
            document.documentElement.classList.add('dark');
            localStorage.setItem('theme', 'dark');
            getElement('light-icon').classList.add('hidden');
            getElement('dark-icon').classList.remove('hidden');
        }
    }

    // Setup color input sync between color picker and hex text input
    function setupColorInputSync(baseId) {
        const colorInput = getElement(baseId);
        const textInput = getElement(`${baseId}-text`);

        if (colorInput && textInput) {
            colorInput.addEventListener('input', () => {
                textInput.value = colorInput.value;
                updatePreviewIfEnabled();
            });

            textInput.addEventListener('input', () => {
                // Validate hex color format
                if (/^#([0-9A-F]{3}){1,2}$/i.test(textInput.value)) {
                    colorInput.value = textInput.value;
                    updatePreviewIfEnabled();
                }
            });
        }
    }

    // Apply a template to the form
    function applyTemplate(templateName) {
        const template = templates[templateName];
        if (!template) {
            showNotification(`Template "${templateName}" not found`, 'error');
            return;
        }

        try {
            // Apply values to form inputs
            Object.keys(template).forEach(key => {
                const element = getElement(key);
                if (!element) return;

                if (element.type === 'checkbox') {
                    element.checked = template[key];
                    // Trigger change event for conditional displays
                    const event = new Event('change');
                    element.dispatchEvent(event);
                } else if (element.type === 'color' || element.type === 'text' || element.type === 'number' || element.tagName === 'SELECT') {
                    element.value = template[key];
                    // Update color text inputs if needed
                    if (element.type === 'color') {
                        const textInput = getElement(`${key}-text`);
                        if (textInput) textInput.value = template[key];
                    }
                }
            });

            // Show conditional elements if needed
            toggleConditionalDisplay('striped', 'stripe-color-container');
            toggleConditionalDisplay('caption', 'caption-text-container');
            toggleConditionalDisplay('hover-effect', 'hover-color-container');

            // Generate table preview
            generateTableAndUpdate();

            showNotification(`Applied template: ${templateName}`);
        } catch (error) {
            console.error('Error applying template:', error);
            showNotification('Failed to apply template', 'error');
        }
    }

    // Generate table HTML and update preview
    function generateTableAndUpdate() {
        setLoading(true);

        try {
            const tableHtml = generateTable();
            state.lastGeneratedTable = tableHtml;

            // Update code display with syntax highlighting
            const generatedCode = getElement('generated-code');
            generatedCode.innerHTML = hljs.highlight(tableHtml, 'html');

            // Update preview
            getElement('table-preview').innerHTML = tableHtml;

            updatePreviewStatus('Preview updated');
            setLoading(false);
        } catch (error) {
            console.error('Error generating table:', error);
            showNotification('Error generating table. Check your inputs.', 'error');
            setLoading(false);
        }
    }

    // Update preview if auto-update is enabled
    function updatePreviewIfEnabled() {
        const autoUpdateEnabled = getElement('auto-update')?.checked ?? true;
        if (autoUpdateEnabled) {
            updatePreviewStatus('Updating preview...');
            generateTableAndUpdate();
        } else {
            updatePreviewStatus('Auto-update disabled');
        }
    }

    // Update preview status message
    function updatePreviewStatus(message) {
        const statusEl = getElement('preview-status');
        if (statusEl) {
            statusEl.textContent = message;
            // Clear message after a delay
            setTimeout(() => {
                if (statusEl.textContent === message) {
                    statusEl.textContent = '';
                }
            }, 2000);
        }
    }

    // Set loading state
    function setLoading(isLoading) {
        state.loading = isLoading;
        const copyBtn = getElement('copy-btn');
        const generateBtn = getElement('generate-btn');

        if (isLoading) {
            if (copyBtn) {
                copyBtn.innerHTML = '<span class="tg-loader mr-2"></span> Generating...';
                copyBtn.disabled = true;
            }
            if (generateBtn) {
                generateBtn.innerHTML = '<span class="tg-loader mr-2"></span> Generating...';
                generateBtn.disabled = true;
            }
        } else {
            if (copyBtn) {
                copyBtn.innerHTML = '<span>Copy HTML</span>';
                copyBtn.disabled = false;
            }
            if (generateBtn) {
                generateBtn.innerHTML = 'Generate Table';
                generateBtn.disabled = false;
            }
        }
    }

    // Generate the HTML table code
    function generateTable() {
        // Validate form values before proceeding
        validateFormInputs();

        // Get all form values
        const formValues = getFormValues();

        // Start building the HTML
        let html = '<table';

        // Add table attributes
        if (formValues.tableSummary) {
            html += ` summary="${escapeHtml(formValues.tableSummary)}"`;
        }

        // Add table styles
        html += ` style="border-collapse: collapse; width: 100%; font-family: ${formValues.fontFamily}; font-size: ${formValues.fontSize}px;">`;

        // Add caption if enabled
        if (formValues.caption) {
            html += `\n  <caption style="padding: 10px; font-weight: bold; text-align: ${formValues.textAlign}; color: ${formValues.textColor};">${escapeHtml(formValues.captionText)}</caption>`;
        }

        // Table header
        if (formValues.header) {
            html += '\n  <thead>';
            html += `\n    <tr style="background-color: ${formValues.headerBgColor};">`;
            for (let i = 0; i < formValues.cols; i++) {
                const scopeAttr = formValues.scopeHeaders ? ' scope="col"' : '';
                html += `\n      <th${scopeAttr} style="border: ${formValues.borderWidth}px ${formValues.borderStyle} ${formValues.borderColor}; padding: ${formValues.padding}px; text-align: ${formValues.textAlign}; color: ${formValues.textColor}; width: ${formValues.cellWidth}px; height: ${formValues.cellHeight}px;">Header ${i + 1}</th>`;
            }
            html += '\n    </tr>';
            html += '\n  </thead>';
        }

        // Table body
        html += '\n  <tbody>';
        for (let i = 0; i < formValues.rows; i++) {
            const rowBgColor = formValues.striped && i % 2 !== 0 ? formValues.stripeColor : formValues.bgColor;
            html += `\n    <tr style="background-color: ${rowBgColor};">`;

            for (let j = 0; j < formValues.cols; j++) {
                const cellContent = formValues.header ? `Cell ${i + 1},${j + 1}` : `Cell ${i},${j + 1}`;
                const dataLabel = formValues.responsive ? ` data-label="Header ${j + 1}"` : '';

                html += `\n      <td${dataLabel} style="border: ${formValues.borderWidth}px ${formValues.borderStyle} ${formValues.borderColor}; padding: ${formValues.padding}px; text-align: ${formValues.textAlign}; color: ${formValues.textColor}; width: ${formValues.cellWidth}px; height: ${formValues.cellHeight}px;">${cellContent}</td>`;
            }

            html += '\n    </tr>';
        }
        html += '\n  </tbody>';
        html += '\n</table>';

        // Add CSS for hover effect and responsive design if needed
        if (formValues.hoverEffect || formValues.responsive) {
            let css = '<style>\n';

            if (formValues.hoverEffect) {
                css += `  table tbody tr:hover { background-color: ${formValues.hoverColor} !important; transition: background-color 0.2s; }\n`;
            }

            if (formValues.responsive) {
                css += '  @media screen and (max-width: 600px) {\n';
                css += '    table, thead, tbody, th, td, tr { display: block; }\n';
                css += '    thead tr { position: absolute; top: -9999px; left: -9999px; }\n';
                css += '    tr { margin-bottom: 15px; border: 1px solid #ccc; }\n';
                css += '    td { border: none; border-bottom: 1px solid #eee; position: relative; padding-left: 50% !important; text-align: left !important; }\n';
                css += '    td:before { position: absolute; left: 6px; width: 45%; padding-right: 10px; white-space: nowrap; content: attr(data-label); font-weight: bold; }\n';
                css += '  }\n';
            }

            if (css.includes('<style>')) {
                css += '</style>\n\n';
            }

            if (css !== '<style>\n') {
                html = css + html;
            }
        }

        return html;
    }

    // Get all form values
    function getFormValues() {
        return {
            rows: safeParseInt(getElement('rows').value, 3),
            cols: safeParseInt(getElement('columns').value, 3),
            cellWidth: safeParseInt(getElement('cell-width').value, 100),
            cellHeight: safeParseInt(getElement('cell-height').value, 50),
            borderWidth: safeParseInt(getElement('border-width').value, 1),
            padding: safeParseInt(getElement('padding').value, 8),
            header: getElement('header').checked,
            caption: getElement('caption').checked,
            captionText: getElement('caption-text')?.value || 'Table Caption',
            striped: getElement('striped').checked,
            borderColor: getElement('border-color').value,
            bgColor: getElement('bg-color').value,
            textColor: getElement('text-color').value,
            headerBgColor: getElement('header-bg-color').value,
            stripeColor: getElement('stripe-color').value,
            fontFamily: getElement('font-family').value,
            fontSize: safeParseInt(getElement('font-size').value, 14),
            borderStyle: getElement('border-style').value,
            textAlign: getElement('text-align').value,
            hoverEffect: getElement('hover-effect').checked,
            hoverColor: getElement('hover-color').value,
            responsive: getElement('responsive').checked,
            tableSummary: getElement('table-summary')?.value || '',
            scopeHeaders: getElement('scope-headers')?.checked ?? true
        };
    }

    // Validate form inputs
    function validateFormInputs() {
        // Check for max values to prevent browser crashes
        const rowsEl = getElement('rows');
        const colsEl = getElement('columns');

        if (safeParseInt(rowsEl.value, 0) > 50) {
            rowsEl.value = 50;
            showNotification('Maximum 50 rows allowed', 'error');
        }

        if (safeParseInt(colsEl.value, 0) > 20) {
            colsEl.value = 20;
            showNotification('Maximum 20 columns allowed', 'error');
        }
    }

    // Format code (formatted with indentation or minified)
    function formatCode(format) {
        if (!state.lastGeneratedTable) return;

        try {
            if (format === 'formatted' && state.currentFormat !== 'formatted') {
                // Already formatted in the generateTable function
                getElement('generated-code').innerHTML = hljs.highlight(state.lastGeneratedTable, 'html');
                state.currentFormat = 'formatted';
                showNotification('Code formatted');
            } else if (format === 'minified' && state.currentFormat !== 'minified') {
                // Minify the HTML by removing whitespace, newlines, and indentation
                const minified = state.lastGeneratedTable
                    .replace(/\n\s*/g, '')
                    .replace(/>\s+</g, '><')
                    .trim();

                getElement('generated-code').innerHTML = hljs.highlight(minified, 'html');
                state.currentFormat = 'minified';
                showNotification('Code minified');
            }
        } catch (error) {
            console.error('Error formatting code:', error);
            showNotification('Error formatting code', 'error');
        }
    }

    // Copy HTML to clipboard
    function copyHtmlToClipboard() {
        const copyBtn = getElement('copy-btn');
        const textToCopy = getElement('generated-code').textContent;

        if (!textToCopy) {
            showNotification('No HTML to copy', 'error');
            return;
        }

        try {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(textToCopy)
                    .then(() => {
                        showNotification('HTML copied to clipboard!');
                        copyBtn.classList.add('copy-animation');
                        setTimeout(() => copyBtn.classList.remove('copy-animation'), 1000);
                    })
                    .catch(err => {
                        console.error('Failed to copy: ', err);
                        fallbackCopy();
                    });
            } else {
                fallbackCopy();
            }
        } catch (error) {
            console.error('Copy failed:', error);
            showNotification('Failed to copy HTML', 'error');
        }

        function fallbackCopy() {
            const textarea = document.createElement('textarea');
            textarea.value = textToCopy;
            textarea.style.position = 'fixed';
            document.body.appendChild(textarea);
            textarea.select();

            try {
                document.execCommand('copy');
                showNotification('HTML copied to clipboard!');
                copyBtn.classList.add('copy-animation');
                setTimeout(() => copyBtn.classList.remove('copy-animation'), 1000);
            } catch (err) {
                console.error('Failed to copy: ', err);
                showNotification('Failed to copy HTML', 'error');
            }

            document.body.removeChild(textarea);
        }
    }

    // Download HTML as a file
    function downloadHtml() {
        try {
            const html = getElement('generated-code').textContent;

            if (!html) {
                showNotification('No HTML to download', 'error');
                return;
            }

            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');

            a.href = url;
            a.download = 'table.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showNotification('HTML file downloaded!');
        } catch (error) {
            console.error('Download failed:', error);
            showNotification('Failed to download HTML', 'error');
        }
    }

    // Show a temporary notification
    function showNotification(message, type = 'success') {
        // Remove any existing notifications
        const existingNotifications = document.querySelectorAll('.tg-notification');
        existingNotifications.forEach(note => {
            document.body.removeChild(note);
        });

        const notification = document.createElement('div');
        notification.className = `tg-notification fixed bottom-4 right-4 px-4 py-3 rounded-md text-white
      ${type === 'success' ? 'bg-green-600' : 'bg-red-600'}
      shadow-lg z-50 transition-opacity duration-300 flex items-center`;

        const icon = document.createElement('span');
        icon.className = 'mr-2';
        icon.innerHTML = type === 'success'
            ? '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'
            : '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>';

        notification.appendChild(icon);
        notification.appendChild(document.createTextNode(message));

        document.body.appendChild(notification);

        // Fade out and remove after 3 seconds
        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }

    // Utility function to safely parse integers
    function safeParseInt(value, fallback) {
        const parsed = parseInt(value);
        return isNaN(parsed) ? fallback : parsed;
    }

    // Utility function to escape HTML special characters
    function escapeHtml(text) {
        return text
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
    }

    // Debounce function to limit how often a function can fire
    function debounce(func, wait) {
        let timeout;
        return function(...args) {
            const context = this;
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(context, args), wait);
        };
    }
</script>
<script src="../logo.js"></script>
</body>
</html>