<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🗜️</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="description" content="Minify and optimize your SQL queries with this easy-to-use tool.">
    <title>SQL Minifier</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql-formatter/4.0.2/sql-formatter.min.js"></script>
</head>
<body class="bg-gray-100 font-sans">
<div class="container mx-auto px-4 py-8"><h1 class="text-3xl font-bold text-center mb-6">SQL Minifier</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div><textarea id="input" rows="10" class="w-full p-2 border rounded"
                       placeholder="Paste your SQL query here..."></textarea></div>
        <div><textarea id="output" rows="10" class="w-full p-2 border rounded" readonly></textarea></div>
    </div>
    <div class="flex justify-center mt-4 space-x-4">
        <button id="minify" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">Minify</button>
        <button id="format" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">Format
        </button>
        <button id="copy" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">Copy</button>
    </div>
    <div class="mt-4"><label class="block mb-2"><input type="checkbox" id="removeComments" class="mr-2">Remove comments</label><label
            class="block mb-2"><input type="checkbox" id="removeNewlines" class="mr-2">Remove newlines</label></div>
    <div id="stats" class="mt-4 text-center font-semibold"></div>
</div>
<script>const input = document.getElementById('input');
const output = document.getElementById('output');
const minifyBtn = document.getElementById('minify');
const formatBtn = document.getElementById('format');
const copyBtn = document.getElementById('copy');
const removeCommentsCheck = document.getElementById('removeComments');
const removeNewlinesCheck = document.getElementById('removeNewlines');
const stats = document.getElementById('stats');

function minifySQL(sql) {
    let minified = sql.replace(/\s+/g, ' ').trim();
    if (removeCommentsCheck.checked) {
        minified = minified.replace(/--.*$/gm, '').replace(/\/\*[\s\S]*?\*\//g, '');
    }
    if (removeNewlinesCheck.checked) {
        minified = minified.replace(/\n/g, ' ');
    }
    return minified;
}

function updateStats() {
    const inputLength = input.value.length;
    const outputLength = output.value.length;
    const reduction = ((inputLength - outputLength) / inputLength * 100).toFixed(2);
    stats.textContent = `Original: ${inputLength} chars | Minified: ${outputLength} chars | Reduction: ${reduction}%`;
}

minifyBtn.addEventListener('click', () => {
    output.value = minifySQL(input.value);
    updateStats();
});
formatBtn.addEventListener('click', () => {
    output.value = sqlFormatter.format(input.value, {uppercase: true});
    updateStats();
});
copyBtn.addEventListener('click', () => {
    output.select();
    document.execCommand('copy');
    alert('Copied to clipboard!');
});
input.addEventListener('input', () => {
    output.value = '';
    stats.textContent = '';
});</script>
<script src="../sidebar.js"></script>
</body>
</html>