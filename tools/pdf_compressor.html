<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Compress PDF files directly in your browser. No uploads, no server processing â€” fast, private, and free. Adjust image quality, resolution, and grayscale settings.">
    <meta name="keywords" content="PDF compressor, compress PDF, reduce PDF size, PDF optimizer, browser PDF tool, offline PDF compression, free PDF compressor">
    <meta name="author" content="Claude Opus 4.6 prompted by Tobias MÃ¼ller">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.gptgames.dev/tools/pdf_compressor.html">
    <meta property="og:title" content="PDF Compressor â€” Free Browser-Based PDF Compression">
    <meta property="og:description" content="Compress PDF files entirely in your browser. No uploads, no server processing â€” fast, private, and free.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.gptgames.dev/tools/pdf_compressor.html">
    <meta property="og:image" content="https://www.gptgames.dev/screenshots/screenshot_247.webp">
    <meta property="og:locale" content="en_US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PDF Compressor â€” Free Browser-Based PDF Compression">
    <meta name="twitter:description" content="Compress PDF files entirely in your browser. No uploads, no server processing â€” fast, private, and free.">
    <meta name="twitter:image" content="https://www.gptgames.dev/screenshots/screenshot_247.webp">
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebApplication","name":"PDF Compressor","url":"https://www.gptgames.dev/tools/pdf_compressor.html","description":"Compress PDF files directly in your browser with adjustable quality settings. No uploads required.","applicationCategory":"UtilityApplication","operatingSystem":"Any","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"author":{"@type":"Person","name":"Tobias MÃ¼ller"},"image":"https://www.gptgames.dev/screenshots/screenshot_247.webp"}</script>
    <title>PDF Compressor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.0.3/jspdf.umd.min.js"></script>
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        :root {
            --bg: #f5f5f7;
            --surface: #fff;
            --surface2: #f0f1f3;
            --text: #111827;
            --text2: #6b7280;
            --text3: #9ca3af;
            --border: #e5e7eb;
            --accent: #2563eb;
            --accent-h: #1d4ed8;
            --accent-bg: #eff6ff;
            --red: #ef4444;
            --green: #16a34a;
            --green-bg: #f0fdf4;
            --radius: 12px;
            --shadow: 0 1px 3px rgba(0, 0, 0, .06)
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #0f0f13;
                --surface: #1a1a22;
                --surface2: #252530;
                --text: #f0f0f5;
                --text2: #9ca3af;
                --text3: #6b7280;
                --border: #2d2d3a;
                --accent: #3b82f6;
                --accent-h: #60a5fa;
                --accent-bg: #1e293b;
                --green-bg: #052e16;
                --shadow: 0 1px 3px rgba(0, 0, 0, .3)
            }
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center
        }

        header {
            width: 100%;
            padding: 24px 16px;
            text-align: center;
            background: var(--surface);
            border-bottom: 1px solid var(--border)
        }

        header h1 {
            font-size: 1.35rem;
            font-weight: 700;
            letter-spacing: -.02em
        }

        header h1 span {
            color: var(--accent)
        }

        header p {
            font-size: .8rem;
            color: var(--text2);
            margin-top: 4px
        }

        .container {
            width: 100%;
            max-width: 640px;
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            gap: 16px
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow)
        }

        .section {
            display: none
        }

        .section.active {
            display: flex;
            flex-direction: column;
            gap: 16px;
            animation: fadeUp .3s ease-out
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(10px)
            }
            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        /* Dropzone */
        .dropzone {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 56px 24px;
            text-align: center;
            cursor: pointer;
            transition: border-color .2s, background .2s;
            background: var(--surface)
        }

        .dropzone:hover, .dropzone.over {
            border-color: var(--accent);
            background: var(--accent-bg)
        }

        .dropzone-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block
        }

        .dropzone h3 {
            font-size: .95rem;
            font-weight: 600;
            margin-bottom: 4px
        }

        .dropzone p {
            font-size: .78rem;
            color: var(--text2)
        }

        /* File preview */
        .file-header {
            display: flex;
            align-items: center;
            gap: 14px
        }

        .file-thumb {
            width: 56px;
            min-width: 56px;
            height: 72px;
            border-radius: 6px;
            border: 1px solid var(--border);
            object-fit: contain;
            background: var(--surface2);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden
        }

        .file-thumb canvas {
            width: 100%;
            height: 100%;
            object-fit: contain
        }

        .file-thumb .placeholder {
            font-size: 1.4rem;
            color: var(--text3)
        }

        .file-meta {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            gap: 3px
        }

        .file-name {
            font-size: .9rem;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis
        }

        .file-details {
            font-size: .78rem;
            color: var(--text2)
        }

        .remove-btn {
            background: none;
            border: none;
            color: var(--text3);
            cursor: pointer;
            font-size: 1rem;
            padding: 4px 8px;
            border-radius: 6px;
            transition: color .15s, background .15s;
            flex-shrink: 0
        }

        .remove-btn:hover {
            color: var(--red);
            background: rgba(239, 68, 68, .08)
        }

        /* Settings */
        .settings-grid {
            display: flex;
            flex-direction: column;
            gap: 18px
        }

        .setting-label {
            font-size: .72rem;
            font-weight: 600;
            color: var(--text2);
            text-transform: uppercase;
            letter-spacing: .05em;
            margin-bottom: 6px
        }

        .presets {
            display: grid;
            grid-template-columns:repeat(4, 1fr);
            gap: 6px
        }

        .presets button {
            padding: 10px 4px 8px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg);
            color: var(--text);
            cursor: pointer;
            transition: all .15s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px
        }

        .presets button .p-label {
            font-size: .8rem;
            font-weight: 600
        }

        .presets button .p-desc {
            font-size: .65rem;
            color: var(--text3);
            font-weight: 400
        }

        .presets button:hover {
            border-color: var(--accent)
        }

        .presets button.active {
            background: var(--accent);
            color: #fff;
            border-color: var(--accent)
        }

        .presets button.active .p-desc {
            color: rgba(255, 255, 255, .75)
        }

        .slider-group {
            display: flex;
            flex-direction: column;
            gap: 4px
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline
        }

        .slider-header span {
            font-size: .78rem;
            color: var(--text2)
        }

        .slider-header strong {
            font-size: .85rem;
            font-weight: 600
        }

        input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 99px;
            background: var(--surface2);
            outline: none;
            cursor: pointer
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent);
            border: 2px solid var(--surface);
            box-shadow: 0 1px 4px rgba(0, 0, 0, .15);
            cursor: pointer;
            transition: transform .1s
        }

        input[type=range]::-webkit-slider-thumb:hover {
            transform: scale(1.15)
        }

        input[type=range]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent);
            border: 2px solid var(--surface);
            box-shadow: 0 1px 4px rgba(0, 0, 0, .15);
            cursor: pointer
        }

        .option-row {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            background: var(--surface2);
            border-radius: 8px;
            cursor: pointer;
            font-size: .85rem;
            user-select: none
        }

        .option-row input[type=checkbox] {
            accent-color: var(--accent);
            width: 16px;
            height: 16px;
            cursor: pointer
        }

        .option-row .opt-desc {
            font-size: .75rem;
            color: var(--text2);
            margin-top: 1px
        }

        /* Buttons */
        .btn-primary {
            width: 100%;
            padding: 13px;
            background: var(--accent);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: .9rem;
            font-weight: 600;
            cursor: pointer;
            transition: background .15s
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--accent-h)
        }

        .btn-primary:disabled {
            opacity: .45;
            cursor: not-allowed
        }

        .btn-download {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 13px;
            background: var(--green);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: .9rem;
            font-weight: 600;
            cursor: pointer;
            transition: opacity .15s;
            text-decoration: none
        }

        .btn-download:hover {
            opacity: .9
        }

        .btn-outline {
            padding: 10px;
            background: none;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: .82rem;
            color: var(--text2);
            cursor: pointer;
            transition: all .15s;
            flex: 1
        }

        .btn-outline:hover {
            border-color: var(--accent);
            color: var(--text)
        }

        /* Progress */
        .progress-area {
            display: none;
            flex-direction: column;
            gap: 8px
        }

        .progress-area.active {
            display: flex
        }

        .progress-track {
            height: 6px;
            background: var(--surface2);
            border-radius: 99px;
            overflow: hidden
        }

        .progress-fill {
            height: 100%;
            width: 0;
            background: var(--accent);
            border-radius: 99px;
            transition: width .3s
        }

        .progress-label {
            font-size: .78rem;
            color: var(--text2);
            text-align: center
        }

        /* Results */
        .comparison {
            display: flex;
            flex-direction: column;
            gap: 14px;
            margin-bottom: 16px
        }

        .comp-row {
            display: flex;
            align-items: center;
            gap: 12px
        }

        .comp-label {
            font-size: .75rem;
            font-weight: 600;
            color: var(--text2);
            min-width: 80px;
            text-transform: uppercase;
            letter-spacing: .03em
        }

        .comp-bar {
            flex: 1;
            height: 10px;
            background: var(--surface2);
            border-radius: 99px;
            overflow: hidden
        }

        .comp-fill {
            height: 100%;
            border-radius: 99px;
            transition: width .6s ease-out
        }

        .comp-fill.original {
            background: var(--text3)
        }

        .comp-fill.compressed {
            background: var(--accent)
        }

        .comp-size {
            font-size: .85rem;
            font-weight: 600;
            min-width: 64px;
            text-align: right
        }

        .result-badge {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            font-size: .85rem;
            font-weight: 600
        }

        .result-badge.good {
            color: var(--green);
            background: var(--green-bg)
        }

        .result-badge.warn {
            color: var(--red);
            background: rgba(239, 68, 68, .08)
        }

        .result-actions {
            display: flex;
            gap: 8px
        }

        footer {
            margin-top: auto;
            padding: 20px;
            text-align: center;
            font-size: .72rem;
            color: var(--text3)
        }

        @media (max-width: 480px) {
            .presets {
                grid-template-columns:repeat(2, 1fr)
            }

            .comp-label {
                min-width: 60px;
                font-size: .7rem
            }

            .container {
                padding: 16px 12px
            }
        }
    </style>
</head>
<body>
<header><h1>PDF <span>Compressor</span></h1>
    <p>Compress PDFs entirely in your browser â€” nothing uploaded</p></header>
<div class="container">
    <div class="section active" id="secUpload">
        <div class="dropzone" id="dropzone" tabindex="0" role="button" aria-label="Upload PDF file">
            <span class="dropzone-icon">ðŸ“„</span>
            <h3>Drop your PDF here</h3>
            <p>or click to browse Â· Max 100 MB</p>
            <input type="file" id="fileInput" accept=".pdf,application/pdf" hidden>
        </div>
    </div>
    <div class="section" id="secFile">
        <div class="card">
            <div class="file-header">
                <div class="file-thumb" id="thumbWrap"><span class="placeholder">ðŸ“„</span></div>
                <div class="file-meta"><span class="file-name" id="fileName"></span><span class="file-details"
                                                                                          id="fileDetails"></span></div>
                <button class="remove-btn" id="removeBtn" title="Remove file">âœ•</button>
            </div>
        </div>
        <div class="card" id="settingsCard">
            <div class="settings-grid">
                <div>
                    <div class="setting-label">Compression preset</div>
                    <div class="presets" id="presets">
                        <button data-q="35" data-s="0.75"><span class="p-label">Light</span><span class="p-desc">Smallest file</span>
                        </button>
                        <button data-q="55" data-s="1" class="active"><span class="p-label">Balanced</span><span
                                class="p-desc">Recommended</span></button>
                        <button data-q="80" data-s="1.5"><span class="p-label">Quality</span><span class="p-desc">Best visuals</span>
                        </button>
                        <button data-q="" data-s=""><span class="p-label">Custom</span><span
                                class="p-desc">Manual</span></button>
                    </div>
                </div>
                <div class="slider-group">
                    <div class="slider-header"><span>Image quality</span><strong id="qVal">55%</strong></div>
                    <input type="range" id="qualitySlider" min="10" max="95" value="55" step="5">
                </div>
                <div class="slider-group">
                    <div class="slider-header"><span>Resolution scale</span><strong id="sVal">1Ã—</strong></div>
                    <input type="range" id="scaleSlider" min="0.5" max="2" value="1" step="0.25">
                </div>
                <label class="option-row"><input type="checkbox" id="grayscale">
                    <div>
                        <div>Convert to grayscale</div>
                        <div class="opt-desc">Removes color â€” good for text-heavy documents</div>
                    </div>
                </label>
                <button class="btn-primary" id="compressBtn">Compress PDF</button>
                <div class="progress-area" id="progress">
                    <div class="progress-track">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-label" id="progressLabel">Preparingâ€¦</div>
                </div>
            </div>
        </div>
    </div>
    <div class="section" id="secResults">
        <div class="card">
            <div class="comparison">
                <div class="comp-row"><span class="comp-label">Original</span>
                    <div class="comp-bar">
                        <div class="comp-fill original" id="barOrig"></div>
                    </div>
                    <span class="comp-size" id="sizeOrig"></span></div>
                <div class="comp-row"><span class="comp-label">Compressed</span>
                    <div class="comp-bar">
                        <div class="comp-fill compressed" id="barComp"></div>
                    </div>
                    <span class="comp-size" id="sizeComp"></span></div>
            </div>
            <div class="result-badge" id="resultBadge"></div>
        </div>
        <a class="btn-download" id="downloadBtn">â†“ Download compressed PDF</a>
        <div class="result-actions">
            <button class="btn-outline" id="recompressBtn">Adjust & re-compress</button>
            <button class="btn-outline" id="newFileBtn">New file</button>
        </div>
    </div>
</div>
<footer>All processing happens locally. Files never leave your device.</footer>
<script type="module">
    import *as pdfjsLib from 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.9.155/pdf.min.mjs';

    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.9.155/pdf.worker.min.mjs';
    const {jsPDF} = window.jspdf;
    const $ = s => document.querySelector(s);
    const dropzone = $('#dropzone'), fileInput = $('#fileInput'),
        secUpload = $('#secUpload'), secFile = $('#secFile'), secResults = $('#secResults'),
        fileName = $('#fileName'), fileDetails = $('#fileDetails'), thumbWrap = $('#thumbWrap'),
        presets = $('#presets'), qualitySlider = $('#qualitySlider'), scaleSlider = $('#scaleSlider'),
        qVal = $('#qVal'), sVal = $('#sVal'), grayscale = $('#grayscale'),
        compressBtn = $('#compressBtn'), progress = $('#progress'), progressFill = $('#progressFill'),
        progressLabel = $('#progressLabel'), barOrig = $('#barOrig'), barComp = $('#barComp'),
        sizeOrig = $('#sizeOrig'), sizeComp = $('#sizeComp'), resultBadge = $('#resultBadge'),
        downloadBtn = $('#downloadBtn'), settingsCard = $('#settingsCard');
    let pdfFile = null, cachedPdf = null, compressedBlob = null;

    function fmt(b) {
        if (b < 1024) return b + ' B';
        if (b < 1048576) return (b / 1024).toFixed(1) + ' KB';
        return (b / 1048576).toFixed(2) + ' MB'
    }

    function show(sec) {
        [secUpload, secFile, secResults].forEach(s => s.classList.remove('active'));
        sec.classList.add('active')
    }

    /* File loading */
    async function loadFile(f) {
        if (!f || f.type !== 'application/pdf') {
            alert('Please select a PDF file.');
            return
        }
        if (f.size > 104857600) {
            alert('File exceeds 100 MB limit.');
            return
        }
        pdfFile = f;
        fileName.textContent = f.name;
        fileDetails.textContent = fmt(f.size) + ' Â· loadingâ€¦';
        show(secFile);
        compressBtn.disabled = false;
        progress.classList.remove('active');
        try {
            const data = await f.arrayBuffer();
            cachedPdf = await pdfjsLib.getDocument({data}).promise;
            fileDetails.textContent = fmt(f.size) + ' Â· ' + cachedPdf.numPages + (cachedPdf.numPages === 1 ? ' page' : ' pages');
            const page = await cachedPdf.getPage(1);
            const vp = page.getViewport({scale: 0.4});
            const c = document.createElement('canvas');
            c.width = vp.width;
            c.height = vp.height;
            const ctx = c.getContext('2d');
            await page.render({canvasContext: ctx, viewport: vp}).promise;
            thumbWrap.innerHTML = '';
            thumbWrap.appendChild(c);
            page.cleanup();
        } catch (e) {
            fileDetails.textContent = fmt(f.size);
            thumbWrap.innerHTML = '<span class="placeholder">ðŸ“„</span>';
            console.warn('Preview failed:', e);
        }
    }

    /* Dropzone events */
    dropzone.addEventListener('click', () => fileInput.click());
    dropzone.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            fileInput.click()
        }
    });
    fileInput.addEventListener('change', e => {
        if (e.target.files[0]) loadFile(e.target.files[0])
    });
    dropzone.addEventListener('dragover', e => {
        e.preventDefault();
        dropzone.classList.add('over')
    });
    dropzone.addEventListener('dragleave', () => dropzone.classList.remove('over'));
    dropzone.addEventListener('drop', e => {
        e.preventDefault();
        dropzone.classList.remove('over');
        if (e.dataTransfer.files[0]) loadFile(e.dataTransfer.files[0])
    });

    /* Reset */
    function resetAll() {
        pdfFile = null;
        cachedPdf = null;
        compressedBlob = null;
        fileInput.value = '';
        thumbWrap.innerHTML = '<span class="placeholder">ðŸ“„</span>';
        show(secUpload);
    }

    $('#removeBtn').addEventListener('click', resetAll);
    $('#newFileBtn').addEventListener('click', resetAll);
    $('#recompressBtn').addEventListener('click', () => {
        show(secFile);
        progress.classList.remove('active');
        compressBtn.disabled = false
    });
    /* Presets */
    presets.addEventListener('click', e => {
        const btn = e.target.closest('button');
        if (!btn || !btn.dataset.q) return;
        presets.querySelectorAll('button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        if (btn.dataset.q && btn.dataset.s) {
            qualitySlider.value = btn.dataset.q;
            scaleSlider.value = btn.dataset.s;
            updateLabels()
        }
    });

    function updateLabels() {
        qVal.textContent = qualitySlider.value + '%';
        sVal.textContent = parseFloat(scaleSlider.value) + 'Ã—'
    }

    function activateCustom() {
        const btns = presets.querySelectorAll('button');
        btns.forEach(b => b.classList.remove('active'));
        btns[btns.length - 1].classList.add('active')
    }

    qualitySlider.addEventListener('input', () => {
        updateLabels();
        activateCustom()
    });
    scaleSlider.addEventListener('input', () => {
        updateLabels();
        activateCustom()
    });
    /* Compression */
    compressBtn.addEventListener('click', compress);

    async function compress() {
        if (!pdfFile) return;
        compressBtn.disabled = true;
        progress.classList.add('active');
        progressFill.style.width = '0%';
        progressLabel.textContent = 'Loading PDFâ€¦';
        const t0 = performance.now();
        try {
            let pdf = cachedPdf;
            if (!pdf) {
                const data = await pdfFile.arrayBuffer();
                pdf = await pdfjsLib.getDocument({data}).promise;
                cachedPdf = pdf;
            }
            const n = pdf.numPages;
            const scale = parseFloat(scaleSlider.value);
            const quality = parseInt(qualitySlider.value) / 100;
            const gs = grayscale.checked;
            const pages = [];
            for (let i = 1; i <= n; i++) {
                progressLabel.textContent = `Rendering page ${i} of ${n}â€¦`;
                progressFill.style.width = ((i - 1) / n * 80) + '%';
                const page = await pdf.getPage(i);
                const vp = page.getViewport({scale});
                const c = document.createElement('canvas');
                c.width = vp.width;
                c.height = vp.height;
                const ctx = c.getContext('2d');
                if (gs) ctx.filter = 'grayscale(100%)';
                await page.render({canvasContext: ctx, viewport: vp}).promise;
                if (gs) ctx.filter = 'none';
                pages.push({w: vp.width, h: vp.height, img: c.toDataURL('image/jpeg', quality)});
                page.cleanup();
            }
            progressLabel.textContent = 'Building PDFâ€¦';
            progressFill.style.width = '88%';
            await new Promise(r => setTimeout(r, 30));
            const first = pages[0];
            const doc = new jsPDF({unit: 'px', format: [first.w, first.h], compress: true, hotfixes: ['px_scaling']});
            for (let i = 0; i < pages.length; i++) {
                const p = pages[i];
                if (i > 0) doc.addPage([p.w, p.h]);
                doc.addImage(p.img, 'JPEG', 0, 0, p.w, p.h, undefined, 'FAST');
            }
            progressFill.style.width = '96%';
            await new Promise(r => setTimeout(r, 30));
            compressedBlob = doc.output('blob');
            const elapsed = ((performance.now() - t0) / 1000).toFixed(1);
            const origB = pdfFile.size, compB = compressedBlob.size;
            const pct = origB > 0 ? Math.round((1 - compB / origB) * 100) : 0;
            /* Populate results */
            sizeOrig.textContent = fmt(origB);
            sizeComp.textContent = fmt(compB);
            const ratio = origB > 0 ? Math.min(compB / origB, 1) : 1;
            barOrig.style.width = '100%';
            barComp.style.width = '0%';
            if (pct > 0) {
                resultBadge.className = 'result-badge good';
                resultBadge.textContent = pct + '% smaller Â· ' + elapsed + 's';
            } else {
                resultBadge.className = 'result-badge warn';
                resultBadge.textContent = 'File grew by ' + Math.abs(pct) + '% â€” try lower quality settings';
            }
            const url = URL.createObjectURL(compressedBlob);
            downloadBtn.href = url;
            downloadBtn.download = pdfFile.name.replace(/\.pdf$/i, '') + '_compressed.pdf';
            progressFill.style.width = '100%';
            progressLabel.textContent = 'Done!';
            setTimeout(() => {
                show(secResults);
                requestAnimationFrame(() => {
                    barComp.style.width = Math.round(ratio * 100) + '%'
                });
            }, 350);
        } catch (err) {
            console.error(err);
            progressLabel.textContent = 'Error: ' + err.message;
            compressBtn.disabled = false;
        }
    }

    updateLabels();
</script>
<script src="../logo.js"></script>
</body>
</html>