<!DOCTYPE html>
<html>
<head>
    <title>WordSage</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìö</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {--primary: #4a6fa5; --accent: #6b8cae; --text: #333; --bg: #f5f5f5; --card-bg: #fff; --input-bg: #f8f9fa; --border: #ced4da; --shadow: rgba(0,0,0,0.1);}
        @media (prefers-color-scheme: dark) {:root {--primary: #6b8cae; --accent: #4a6fa5; --text: #e1e1e1; --bg: #222; --card-bg: #333; --input-bg: #444; --border: #555; --shadow: rgba(0,0,0,0.3);}}
        body {font-family: 'Roboto', sans-serif; background-color: var(--bg); color: var(--text); line-height: 1.6; margin: 0; padding: 20px; transition: all 0.3s;}
        #app {max-width: 800px; margin: 0 auto; padding: 1.5em; background-color: var(--card-bg); border-radius: 10px; box-shadow: 0 0 20px var(--shadow);}
        h1, h2 {text-align: center; color: var(--text); margin-top: 0;}
        h2 {font-size: 1.2em; margin-bottom: 20px;}
        form {display: flex; flex-direction: column; gap: 15px; padding: 20px; background-color: var(--input-bg); border-radius: 10px; margin-bottom: 20px;}
        input, select, button {padding: 12px; font-size: 1em; border-radius: 5px; border: 1px solid var(--border); background-color: var(--card-bg); color: var(--text); transition: all 0.3s;}
        input:focus, select:focus {outline: none; border-color: var(--primary); box-shadow: 0 0 0 2px rgba(74, 111, 165, 0.2);}
        button {cursor: pointer; background-color: var(--primary); color: white; border: none; font-weight: 500;}
        button:hover {background-color: var(--accent); transform: translateY(-2px);}
        button:disabled {opacity: 0.7; cursor: not-allowed; transform: none;}
        .options-group {display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between;}
        .option-card {flex: 1 1 calc(50% - 10px); min-width: 200px;}
        @media (max-width: 600px) {.option-card {flex: 1 1 100%;}}
        .option-title {font-weight: 700; margin-bottom: 8px;}
        .radio-group {display: flex; flex-wrap: wrap; gap: 10px;}
        .radio-option {display: flex; align-items: center; gap: 5px;}
        .clear-button-container {width: 100%; text-align: right; margin: 10px 0;}
        #explanationResult {padding: 20px; background-color: var(--input-bg); border-radius: 10px; margin: 20px 0; white-space: pre-wrap;}
        .explanation-header {display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-wrap: wrap; gap: 10px;}
        .action-buttons {display: flex; gap: 10px;}
        .action-button {padding: 8px 12px; font-size: 0.9em; background-color: var(--primary); color: white;}
        .saved-item {display: flex; justify-content: space-between; align-items: center; padding: 15px; background-color: var(--input-bg); border-radius: 5px; margin: 10px 0; cursor: pointer; transition: all 0.3s;}
        .saved-item:hover {transform: translateY(-2px); box-shadow: 0 5px 15px var(--shadow);}
        .item-word {font-weight: 700;}
        .item-level {color: var(--accent); font-size: 0.9em;}
        .item-buttons {display: flex; gap: 5px;}
        .item-button {background: none; border: none; color: var(--primary); cursor: pointer; padding: 5px; font-size: 1.2em;}
        #howToUse {margin-top: 40px; padding: 20px; background-color: var(--input-bg); border-radius: 10px; box-shadow: 0 0 20px var(--shadow);}
        .loading {display: flex; justify-content: center; align-items: center; padding: 20px;}
        .spinner {border: 4px solid rgba(0, 0, 0, 0.1); border-radius: 50%; border-top: 4px solid var(--primary); width: 40px; height: 40px; animation: spin 1s linear infinite;}
        @keyframes spin {0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);}}
        .toggle-section {cursor: pointer; padding: 10px; background-color: var(--primary); color: white; border-radius: 5px; text-align: center; margin: 20px 0 10px;}
        ul {margin-top: 5px;}
    </style>
</head>
<body>
<div id="app">
    <h1>WordSage</h1>
    <h2>AI-Powered Word Explanation Tool</h2>

    <form @submit.prevent="generateExplanation">
        <label for="word">Enter a word:</label>
        <input type="text" v-model="word" id="word" placeholder="Enter any word you want to understand" required>

        <div class="options-group">
            <div class="option-card">
                <div class="option-title">Educational Level:</div>
                <div class="radio-group">
                    <label class="radio-option"><input type="radio" v-model="educationalLevel" value="elementary"> Elementary</label>
                    <label class="radio-option"><input type="radio" v-model="educationalLevel" value="middle"> Middle School</label>
                    <label class="radio-option"><input type="radio" v-model="educationalLevel" value="high"> High School</label>
                    <label class="radio-option"><input type="radio" v-model="educationalLevel" value="college"> College</label>
                    <label class="radio-option"><input type="radio" v-model="educationalLevel" value="academic"> Academic</label>
                </div>
            </div>

            <div class="option-card">
                <div class="option-title">Explanation Type:</div>
                <div class="radio-group">
                    <label class="radio-option"><input type="radio" v-model="explanationType" value="definition"> Definition-focused</label>
                    <label class="radio-option"><input type="radio" v-model="explanationType" value="example"> Example-based</label>
                    <label class="radio-option"><input type="radio" v-model="explanationType" value="etymology"> Etymology-focused</label>
                    <label class="radio-option"><input type="radio" v-model="explanationType" value="visual"> Visual/Metaphor-based</label>
                </div>
            </div>
        </div>

        <div class="option-title">Explanation Length:</div>
        <div class="radio-group">
            <label class="radio-option"><input type="radio" v-model="explanationLength" value="brief"> Brief (1-2 sentences)</label>
            <label class="radio-option"><input type="radio" v-model="explanationLength" value="standard"> Standard (paragraph)</label>
            <label class="radio-option"><input type="radio" v-model="explanationLength" value="detailed"> Detailed (multiple paragraphs)</label>
        </div>

        <button type="submit" :disabled="isLoading">{{ isLoading ? 'Generating...' : 'Explain This Word' }}</button>
    </form>

    <div class="clear-button-container">
        <button @click="clearForm">Clear Form</button>
    </div>

    <div v-if="isLoading" class="loading"><div class="spinner"></div></div>

    <div v-if="currentExplanation" id="explanationResult">
        <div class="explanation-header">
            <h3>Explanation for: {{ currentExplanationData.word }}</h3>
            <div class="action-buttons">
                <button class="action-button" @click="copyToClipboard(currentExplanation)">Copy</button>
                <button class="action-button" @click="saveAsFavorite(currentExplanationData)">
                    {{ isFavorite(currentExplanationData) ? 'Remove from Favorites' : 'Add to Favorites' }}
                </button>
            </div>
        </div>
        <p>{{ currentExplanation }}</p>
    </div>

    <div v-if="history.length > 0">
        <div class="toggle-section" @click="showHistory = !showHistory">
            {{ showHistory ? 'Hide History' : 'Show History' }} ({{ history.length }})
        </div>
        <div v-if="showHistory">
            <div v-for="(item, index) in history" :key="'history-' + index" class="saved-item" @click="loadExplanation(item)">
                <div>
                    <span class="item-word">{{ item.word }}</span>
                    <span class="item-level"> - {{ getLevelLabel(item.educationalLevel) }}</span>
                </div>
                <div class="item-buttons">
                    <button class="item-button" @click.stop="saveAsFavorite(item)">{{ isFavorite(item) ? '‚ù§Ô∏è' : 'ü§ç' }}</button>
                    <button class="item-button" @click.stop="removeFromHistory(index)">üóëÔ∏è</button>
                </div>
            </div>
        </div>
    </div>

    <div v-if="favorites.length > 0">
        <div class="toggle-section" @click="showFavorites = !showFavorites">
            {{ showFavorites ? 'Hide Favorites' : 'Show Favorites' }} ({{ favorites.length }})
        </div>
        <div v-if="showFavorites">
            <div v-for="(item, index) in favorites" :key="'favorite-' + index" class="saved-item" @click="loadExplanation(item)">
                <div>
                    <span class="item-word">{{ item.word }}</span>
                    <span class="item-level"> - {{ getLevelLabel(item.educationalLevel) }}</span>
                </div>
                <div class="item-buttons">
                    <button class="item-button" @click.stop="removeFromFavorites(index)">üóëÔ∏è</button>
                </div>
            </div>
        </div>
    </div>

    <div id="howToUse">
        <h2>How to Use WordSage</h2>
        <p>1. Enter any word you want to understand in the input field.</p>
        <p>2. Select the educational level that matches your needs:</p>
        <ul>
            <li>Elementary: Simple explanations for young children (ages 6-10)</li>
            <li>Middle School: Clear explanations for pre-teens (ages 11-13)</li>
            <li>High School: More detailed explanations for teenagers (ages 14-18)</li>
            <li>College: Comprehensive explanations for college students</li>
            <li>Academic: Scholarly level explanations with technical details</li>
        </ul>
        <p>3. Choose an explanation type:</p>
        <ul>
            <li>Definition-focused: Clear meaning and usage</li>
            <li>Example-based: Explanations with real-world examples</li>
            <li>Etymology-focused: Word origins and historical development</li>
            <li>Visual/Metaphor-based: Using imagery and comparisons to explain</li>
        </ul>
        <p>4. Select your preferred explanation length.</p>
        <p>5. Click "Explain This Word" to generate the explanation.</p>
        <p>6. Use the action buttons to copy the explanation or save it to your favorites.</p>
        <p>7. Access your history or favorites to quickly revisit previous explanations.</p>
    </div>
</div>

<script src="https://unpkg.com/vue@3.4.7/dist/vue.global.js"></script>
<script>
    const app = Vue.createApp({
        data() {
            return {
                word: '',
                educationalLevel: 'middle',
                explanationType: 'definition',
                explanationLength: 'standard',
                currentExplanation: '',
                currentExplanationData: {},
                isLoading: false,
                favorites: [],
                history: [],
                showHistory: false,
                showFavorites: false
            };
        },
        methods: {
            async generateExplanation() {
                this.isLoading = true;
                const API_ENDPOINT = 'https://chatgpt.tobiasmue91.workers.dev/';

                const systemMessage = `You are WordSage, an AI tool for explaining words at different educational levels. Your goal is to provide clear, accurate, and appropriate explanations based on the user's specified parameters.`;

                let userMessage = `Please explain the word "${this.word}" with the following parameters:
- Educational Level: ${this.educationalLevel} (${this.getLevelDescription(this.educationalLevel)})
- Explanation Type: ${this.explanationType} (${this.getTypeDescription(this.explanationType)})
- Length: ${this.explanationLength} (${this.getLengthDescription(this.explanationLength)})

Provide only the explanation text without any additional commentary, headings, or formatting.`;

                try {
                    const response = await fetch(API_ENDPOINT, {
                        method: 'POST',
                        headers: {"Content-Type": "application/json", "Accept": "*/*"},
                        body: JSON.stringify({
                            model: "gpt-3.5-turbo",
                            max_tokens: 800,
                            messages: [
                                { role: "system", content: systemMessage },
                                { role: "user", content: userMessage }
                            ],
                        }),
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.currentExplanation = data.choices[0].message.content.trim();

                        this.currentExplanationData = {
                            word: this.word,
                            educationalLevel: this.educationalLevel,
                            explanationType: this.explanationType,
                            explanationLength: this.explanationLength,
                            explanation: this.currentExplanation,
                            timestamp: new Date().toISOString()
                        };

                        this.addToHistory(this.currentExplanationData);
                    } else {
                        alert('Error occurred while generating the explanation. Please try again.');
                    }
                } catch (e) {
                    alert('Error occurred while generating the explanation. Please try again.');
                    console.error(e);
                } finally {
                    this.isLoading = false;
                }
            },

            clearForm() {
                this.word = '';
                this.educationalLevel = 'middle';
                this.explanationType = 'definition';
                this.explanationLength = 'standard';
                this.currentExplanation = '';
                this.currentExplanationData = {};
            },

            copyToClipboard(text) {
                navigator.clipboard.writeText(text);
                alert('Explanation copied to clipboard!');
            },

            saveAsFavorite(item) {
                const existingIndex = this.favorites.findIndex(f => f.word === item.word && f.educationalLevel === item.educationalLevel && f.explanationType === item.explanationType);

                if (existingIndex >= 0) {
                    this.favorites.splice(existingIndex, 1);
                } else {
                    this.favorites.push({...item});
                }

                localStorage.setItem('wordSageFavorites', JSON.stringify(this.favorites));
            },

            isFavorite(item) {
                return this.favorites.some(f => f.word === item.word && f.educationalLevel === item.educationalLevel && f.explanationType === item.explanationType);
            },

            addToHistory(item) {
                const existingIndex = this.history.findIndex(h => h.word === item.word && h.educationalLevel === item.educationalLevel && h.explanationType === item.explanationType);

                if (existingIndex >= 0) {
                    this.history.splice(existingIndex, 1);
                }

                this.history.unshift({...item});

                if (this.history.length > 20) {
                    this.history.pop();
                }

                localStorage.setItem('wordSageHistory', JSON.stringify(this.history));
            },

            loadExplanation(item) {
                this.word = item.word;
                this.educationalLevel = item.educationalLevel;
                this.explanationType = item.explanationType;
                this.explanationLength = item.explanationLength;
                this.currentExplanation = item.explanation;
                this.currentExplanationData = {...item};

                setTimeout(() => {
                    document.getElementById('explanationResult').scrollIntoView({ behavior: 'smooth' });
                }, 100);
            },

            removeFromHistory(index) {
                this.history.splice(index, 1);
                localStorage.setItem('wordSageHistory', JSON.stringify(this.history));
            },

            removeFromFavorites(index) {
                this.favorites.splice(index, 1);
                localStorage.setItem('wordSageFavorites', JSON.stringify(this.favorites));
            },

            getLevelLabel(level) {
                const labels = {
                    'elementary': 'Elementary',
                    'middle': 'Middle School',
                    'high': 'High School',
                    'college': 'College',
                    'academic': 'Academic'
                };
                return labels[level] || level;
            },

            getLevelDescription(level) {
                const descriptions = {
                    'elementary': 'For young children (ages 6-10)',
                    'middle': 'For pre-teens (ages 11-13)',
                    'high': 'For teenagers (ages 14-18)',
                    'college': 'For college students',
                    'academic': 'Scholarly level with technical details'
                };
                return descriptions[level] || '';
            },

            getTypeDescription(type) {
                const descriptions = {
                    'definition': 'Focus on clear meaning and usage',
                    'example': 'Include real-world examples',
                    'etymology': 'Focus on word origins and historical development',
                    'visual': 'Use imagery and comparisons to explain'
                };
                return descriptions[type] || '';
            },

            getLengthDescription(length) {
                const descriptions = {
                    'brief': '1-2 sentences',
                    'standard': 'A paragraph',
                    'detailed': 'Multiple paragraphs'
                };
                return descriptions[length] || '';
            }
        },
        mounted() {
            const savedFavorites = localStorage.getItem('wordSageFavorites');
            if (savedFavorites) {
                this.favorites = JSON.parse(savedFavorites);
            }

            const savedHistory = localStorage.getItem('wordSageHistory');
            if (savedHistory) {
                this.history = JSON.parse(savedHistory);
            }
        }
    });

    app.mount('#app');
</script>
<script src="../logo.js"></script>
</body>
</html>