<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Tag Stripper - Remove HTML Tags Online | Free Web Tool</title>
    <meta name="description"
          content="Free online HTML tag stripper tool. Remove HTML tags, decode entities, preserve formatting. Clean text extraction from HTML content with real-time preview and file support.">
    <meta name="keywords"
          content="HTML tag stripper, remove HTML tags, HTML to text, clean HTML, strip tags, HTML entity decoder, text extractor, web development tools">
    <meta name="author" content="GPTGames.dev">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://gptgames.dev/tools/html_tag_stripper.html">
    <meta name="theme-color" content="#3b82f6">
    <meta name="color-scheme" content="light dark">
    <meta name="format-detection" content="telephone=no">
    <meta name="og:title" content="HTML Tag Stripper - Remove HTML Tags Online | Free Web Tool">
    <meta name="og:description"
          content="Free online HTML tag stripper tool. Remove HTML tags, decode entities, preserve formatting. Clean text extraction from HTML content with real-time preview and file support.">
    <meta name="og:image" content="https://gptgames.dev/screenshots/screenshot_218.webp">
    <meta name="og:image:alt" content="HTML Tag Stripper Tool Interface">
    <meta name="og:image:width" content="1200">
    <meta name="og:image:height" content="630">
    <meta name="og:url" content="https://gptgames.dev/tools/html_tag_stripper.html">
    <meta name="og:type" content="website">
    <meta name="og:site_name" content="GPTGames.dev">
    <meta name="og:locale" content="en_US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="HTML Tag Stripper - Remove HTML Tags Online">
    <meta name="twitter:description"
          content="Free online HTML tag stripper tool. Remove HTML tags, decode entities, preserve formatting. Clean text extraction from HTML content.">
    <meta name="twitter:image" content="https://gptgames.dev/screenshots/screenshot_218.webp">
    <meta name="twitter:image:alt" content="HTML Tag Stripper Tool Interface">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
          rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebApplication",
            "name": "HTML Tag Stripper",
            "description": "Free online tool to remove HTML tags and extract clean text from HTML content",
            "url": "https://gptgames.dev/tools/html_tag_stripper.html",
            "applicationCategory": "DeveloperApplication",
            "operatingSystem": "Any",
            "permissions": "browser",
            "isAccessibleForFree": true,
            "creator": {
                "@type": "Organization",
                "name": "GPTGames.dev",
                "url": "https://gptgames.dev"
            },
            "featureList": [
                "Remove HTML tags from text",
                "Decode HTML entities",
                "Preserve line breaks and formatting",
                "Real-time processing",
                "File upload and download support",
                "Copy to clipboard",
                "Dark/light theme",
                "Character and word count statistics"
            ],
            "screenshot": "https://gptgames.dev/screenshots/screenshot_218.webp",
            "softwareVersion": "1.0",
            "datePublished": "2025-08-31",
            "browserRequirements": "Requires JavaScript. Works with Chrome, Firefox, Safari, Edge.",
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "USD"
            }
        }
    </script>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --accent-color: #3b82f6;
            --accent-hover: #2563eb;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --border-radius: 0.75rem;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --bg-primary: #020617;
            --bg-secondary: #0f172a;
            --bg-tertiary: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #64748b;
            --border-color: #334155;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: var(--transition);
            overflow: hidden;
            height: 100vh;
            line-height: 1.5;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem 2rem;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-secondary);
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 100;
        }

        .header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            opacity: 0.5;
            z-index: -1;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 2rem;
            height: 2rem;
            background: var(--accent-color);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.25rem;
            white-space: nowrap;
        }

        .header h1 {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--text-primary), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background: var(--bg-primary);
            color: var(--text-primary);
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.1));
            opacity: 0;
            transition: var(--transition);
        }

        .btn:hover {
            background: var(--bg-tertiary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn.primary {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-hover));
            color: white;
            border-color: var(--accent-color);
        }

        .btn.primary:hover {
            background: linear-gradient(135deg, var(--accent-hover), var(--accent-color));
        }

        .btn.icon-only {
            padding: 0.75rem;
        }

        .main {
            display: flex;
            flex: 1;
            overflow: hidden;
            background: var(--bg-primary);
        }

        .panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            background: var(--bg-primary);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .panel:first-child {
            margin-right: 0.5rem;
        }

        .panel:last-child {
            margin-left: 0.5rem;
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-secondary);
            backdrop-filter: blur(10px);
        }

        .panel-title {
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .panel-actions {
            display: flex;
            gap: 0.5rem;
        }

        .textarea {
            flex: 1;
            padding: 2rem;
            border: none;
            outline: none;
            resize: none;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            line-height: 1.7;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: var(--transition);
        }

        .textarea::placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .textarea:focus {
            background: var(--bg-secondary);
        }

        .divider {
            width: 6px;
            background: linear-gradient(180deg, var(--border-color), var(--accent-color));
            cursor: col-resize;
            position: relative;
            border-radius: 3px;
            margin: 1rem 0;
        }

        .divider:hover {
            background: linear-gradient(180deg, var(--accent-color), var(--accent-hover));
            transform: scaleX(1.2);
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 60px;
            background: transparent;
        }

        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem 2rem;
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
            backdrop-filter: blur(10px);
        }

        .toolbar-left, .toolbar-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .checkbox-group:hover {
            background: var(--bg-tertiary);
        }

        .checkbox {
            width: 1.125rem;
            height: 1.125rem;
            accent-color: var(--accent-color);
            cursor: pointer;
        }

        .checkbox-group label {
            cursor: pointer;
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .stats {
            display: flex;
            gap: 2rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border-radius: var(--border-radius);
        }

        .drop-zone {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(59, 130, 246, 0.05);
            border: 3px dashed var(--accent-color);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 50;
        }

        .drop-zone.active {
            opacity: 1;
            visibility: visible;
        }

        .drop-zone-content {
            text-align: center;
            padding: 2rem;
        }

        .drop-zone-content i {
            font-size: 4rem;
            color: var(--accent-color);
            margin-bottom: 1rem;
        }

        .drop-zone-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .drop-zone-content p {
            color: var(--text-secondary);
        }

        .toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            background: var(--success-color);
            color: white;
            box-shadow: var(--shadow-lg);
            transform: translateX(calc(100% + 2rem));
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: var(--danger-color);
        }

        .toast.warning {
            background: var(--warning-color);
        }

        .loading {
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-top: 2px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: translate(-50%, -50%) rotate(0deg);
            }
            100% {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 1024px) {
            .main {
                flex-direction: column;
            }

            .panel:first-child {
                margin-right: 0;
                margin-bottom: 0.5rem;
            }

            .panel:last-child {
                margin-left: 0;
                margin-top: 0.5rem;
            }

            .divider {
                height: 6px;
                width: 100%;
                cursor: row-resize;
                margin: 0 1rem;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .header-actions {
                justify-content: center;
            }

            .panel-header, .toolbar {
                padding: 1rem;
            }

            .textarea {
                padding: 1.5rem;
                font-size: 0.8rem;
            }

            .toolbar {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            .toolbar-left, .toolbar-right {
                justify-content: center;
                flex-wrap: wrap;
            }

            .stats {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <header class="header">
        <div>
            <div class="logo">
                <div class="logo-icon">&lt;/&gt;</div>
                <div>
                    <h1>HTML Tag Stripper</h1>
                    <div class="header-subtitle">Remove HTML tags and extract clean text</div>
                </div>
            </div>
        </div>
        <div class="header-actions">
            <button class="btn icon-only" id="themeToggle" title="Toggle theme (Alt+T)"
                    aria-label="Toggle dark/light theme">
                <i data-lucide="sun" aria-hidden="true"></i>
            </button>
            <input type="file" id="fileInput" accept=".html,.htm,.txt,.xml" style="display:none"
                   aria-label="Upload HTML file">
            <button class="btn" onclick="document.getElementById('fileInput').click()"
                    title="Upload HTML file (Ctrl+O)">
                <i data-lucide="upload" aria-hidden="true"></i> Upload File
            </button>
            <button class="btn primary" id="processBtn" title="Process HTML (Ctrl+Enter)">
                <i data-lucide="play" aria-hidden="true"></i> Process
            </button>
        </div>
    </header>

    <main class="main">
        <div class="panel fade-in">
            <div class="panel-header">
                <div class="panel-title">
                    <i data-lucide="code" aria-hidden="true"></i>
                    HTML Input
                </div>
                <div class="panel-actions">
                    <button class="btn icon-only" id="clearInput" title="Clear input (Escape)" aria-label="Clear input">
                        <i data-lucide="trash-2" aria-hidden="true"></i>
                    </button>
                    <button class="btn icon-only" id="pasteInput" title="Paste from clipboard (Ctrl+V)"
                            aria-label="Paste from clipboard">
                        <i data-lucide="clipboard" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
            <textarea class="textarea" id="htmlInput" placeholder="Paste your HTML content here...

Example:
&lt;div class=&quot;container&quot;&gt;
  &lt;h1&gt;Welcome to our website&lt;/h1&gt;
  &lt;p&gt;This is a &lt;strong&gt;sample&lt;/strong&gt; paragraph with &lt;a href=&quot;#&quot;&gt;links&lt;/a&gt; and &lt;em&gt;emphasis&lt;/em&gt;.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;Feature 1&lt;/li&gt;
    &lt;li&gt;Feature 2&lt;/li&gt;
    &lt;li&gt;Feature 3&lt;/li&gt;
  &lt;/ul&gt;
  &lt;p&gt;Contact us at: &lt;a href=&quot;mailto:info@example.com&quot;&gt;info@example.com&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;" aria-label="HTML input area" spellcheck="false"></textarea>
            <div class="drop-zone" id="dropZone">
                <div class="drop-zone-content">
                    <i data-lucide="upload-cloud" aria-hidden="true"></i>
                    <h3>Drop HTML files here</h3>
                    <p>Supports HTML, HTM, TXT, and XML files</p>
                </div>
            </div>
        </div>

        <div class="divider" id="divider" role="separator" aria-label="Resize panels"></div>

        <div class="panel fade-in">
            <div class="panel-header">
                <div class="panel-title">
                    <i data-lucide="file-text" aria-hidden="true"></i>
                    Clean Text Output
                </div>
                <div class="panel-actions">
                    <button class="btn icon-only" id="copyOutput" title="Copy to clipboard (Ctrl+C)"
                            aria-label="Copy output to clipboard">
                        <i data-lucide="copy" aria-hidden="true"></i>
                    </button>
                    <button class="btn icon-only" id="downloadOutput" title="Download as text file (Ctrl+S)"
                            aria-label="Download as text file">
                        <i data-lucide="download" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
            <textarea class="textarea" id="textOutput" readonly
                      placeholder="Clean text will appear here after processing..." aria-label="Text output area"
                      spellcheck="false"></textarea>
        </div>
    </main>

    <div class="toolbar">
        <div class="toolbar-left">
            <div class="checkbox-group" role="group" aria-labelledby="options-label">
                <input type="checkbox" id="preserveLineBreaks" class="checkbox" checked
                       aria-describedby="preserve-desc">
                <label for="preserveLineBreaks">Preserve line breaks</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="decodeEntities" class="checkbox" checked aria-describedby="decode-desc">
                <label for="decodeEntities">Decode HTML entities</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="normalizeWhitespace" class="checkbox" aria-describedby="normalize-desc">
                <label for="normalizeWhitespace">Normalize whitespace</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="preserveLinks" class="checkbox" aria-describedby="links-desc">
                <label for="preserveLinks">Preserve link URLs</label>
            </div>
        </div>
        <div class="toolbar-right">
            <div class="stats" role="status" aria-live="polite">
                <div class="stat">
                    <i data-lucide="hash" aria-hidden="true"></i>
                    <span>Input: <span id="inputChars">0</span> chars, <span id="inputWords">0</span> words</span>
                </div>
                <div class="stat">
                    <i data-lucide="type" aria-hidden="true"></i>
                    <span>Output: <span id="outputChars">0</span> chars, <span id="outputWords">0</span> words</span>
                </div>
                <div class="stat">
                    <i data-lucide="zap" aria-hidden="true"></i>
                    <span>Reduction: <span id="reductionPercent">0</span>%</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="toast" id="toast" role="alert" aria-live="assertive"></div>

<script>
    class HTMLTagStripper {
        constructor() {
            this.elements = {
                htmlInput: document.getElementById('htmlInput'),
                textOutput: document.getElementById('textOutput'),
                preserveLineBreaks: document.getElementById('preserveLineBreaks'),
                decodeEntities: document.getElementById('decodeEntities'),
                normalizeWhitespace: document.getElementById('normalizeWhitespace'),
                preserveLinks: document.getElementById('preserveLinks'),
                fileInput: document.getElementById('fileInput'),
                dropZone: document.getElementById('dropZone'),
                toast: document.getElementById('toast'),
                processBtn: document.getElementById('processBtn')
            };

            this.state = {
                debounceTimer: null,
                isProcessing: false,
                currentTheme: localStorage.getItem('theme') || 'light',
                dragCounter: 0
            };

            this.init();
        }

        init() {
            this.setupEventListeners();
            this.setupTheme();
            this.setupResizer();
            this.setupKeyboardShortcuts();
            this.setupAccessibility();
            this.initializeIcons();
            this.processHTML();

            // Analytics ready
            if (typeof gtag !== 'undefined') {
                gtag('event', 'tool_loaded', {tool_name: 'html_tag_stripper'});
            }
        }

        initializeIcons() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        setupEventListeners() {
            // Input processing
            this.elements.htmlInput.addEventListener('input', () => this.debounceProcess());
            this.elements.htmlInput.addEventListener('paste', () => setTimeout(() => this.debounceProcess(), 100));

            // Options
            Object.values(this.elements).forEach(el => {
                if (el && el.type === 'checkbox') {
                    el.addEventListener('change', () => this.processHTML());
                }
            });

            // File handling
            this.elements.fileInput.addEventListener('change', (e) => this.handleFileUpload(e));

            // Drag and drop
            this.setupDragAndDrop();

            // Button actions
            const actions = {
                clearInput: () => this.clearInput(),
                pasteInput: () => this.pasteFromClipboard(),
                copyOutput: () => this.copyToClipboard(),
                downloadOutput: () => this.downloadOutput(),
                themeToggle: () => this.toggleTheme(),
                processBtn: () => this.processHTML()
            };

            Object.entries(actions).forEach(([id, handler]) => {
                const element = document.getElementById(id);
                if (element) element.addEventListener('click', handler);
            });
        }

        setupDragAndDrop() {
            const events = ['dragenter', 'dragleave', 'dragover', 'drop'];
            events.forEach(event => {
                document.addEventListener(event, (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                });
            });

            document.addEventListener('dragenter', () => {
                this.state.dragCounter++;
                this.elements.dropZone.classList.add('active');
            });

            document.addEventListener('dragleave', () => {
                this.state.dragCounter--;
                if (this.state.dragCounter === 0) {
                    this.elements.dropZone.classList.remove('active');
                }
            });

            document.addEventListener('drop', (e) => {
                this.state.dragCounter = 0;
                this.elements.dropZone.classList.remove('active');

                const files = Array.from(e.dataTransfer.files);
                const supportedFile = files.find(file =>
                    /\.(html?|txt|xml)$/i.test(file.name) ||
                    ['text/html', 'text/plain', 'application/xml', 'text/xml'].includes(file.type)
                );

                if (supportedFile) {
                    this.readFile(supportedFile);
                } else {
                    this.showToast('Please drop a supported file (HTML, TXT, or XML)', 'error');
                }
            });
        }

        setupKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                const isCtrlOrCmd = e.ctrlKey || e.metaKey;
                const activeElement = document.activeElement;

                if (isCtrlOrCmd) {
                    switch (e.key) {
                        case 'Enter':
                            this.processHTML();
                            e.preventDefault();
                            break;
                        case 'o':
                            if (activeElement !== this.elements.htmlInput) {
                                this.elements.fileInput.click();
                                e.preventDefault();
                            }
                            break;
                        case 'c':
                            if (activeElement === this.elements.textOutput) {
                                this.copyToClipboard();
                                e.preventDefault();
                            }
                            break;
                        case 's':
                            this.downloadOutput();
                            e.preventDefault();
                            break;
                    }
                }

                if (e.altKey && e.key === 't') {
                    this.toggleTheme();
                    e.preventDefault();
                }

                if (e.key === 'Escape') {
                    this.clearInput();
                    e.preventDefault();
                }
            });
        }

        setupAccessibility() {
            // Add screen reader announcements for important state changes
            this.elements.htmlInput.addEventListener('focus', () => {
                this.announce('HTML input focused. Paste your HTML content here.');
            });

            this.elements.textOutput.addEventListener('focus', () => {
                this.announce('Text output focused. This is the cleaned text result.');
            });
        }

        announce(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'sr-only';
            announcement.style.cssText = 'position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden;';
            announcement.textContent = message;
            document.body.appendChild(announcement);
            setTimeout(() => document.body.removeChild(announcement), 1000);
        }

        setupResizer() {
            const divider = document.getElementById('divider');
            const main = document.querySelector('.main');
            let isResizing = false;

            divider.addEventListener('mousedown', (e) => {
                isResizing = true;
                document.body.style.cursor = 'col-resize';
                document.addEventListener('mousemove', handleResize);
                document.addEventListener('mouseup', stopResize);
            });

            const handleResize = (e) => {
                if (!isResizing) return;

                const rect = main.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const percentage = Math.max(20, Math.min(80, (x / rect.width) * 100));

                main.style.gridTemplateColumns = `${percentage}% 6px ${100 - percentage}%`;
            };

            const stopResize = () => {
                isResizing = false;
                document.body.style.cursor = '';
                document.removeEventListener('mousemove', handleResize);
                document.removeEventListener('mouseup', stopResize);
            };
        }

        setupTheme() {
            document.documentElement.setAttribute('data-theme', this.state.currentTheme);
            this.updateThemeIcon();
        }

        toggleTheme() {
            this.state.currentTheme = this.state.currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', this.state.currentTheme);
            localStorage.setItem('theme', this.state.currentTheme);
            this.updateThemeIcon();

            this.showToast(`Switched to ${this.state.currentTheme} theme`);

            if (typeof gtag !== 'undefined') {
                gtag('event', 'theme_toggle', {theme: this.state.currentTheme});
            }
        }

        updateThemeIcon() {
            const icon = document.querySelector('#themeToggle i');
            if (icon) {
                icon.setAttribute('data-lucide', this.state.currentTheme === 'light' ? 'moon' : 'sun');
                this.initializeIcons();
            }
        }

        debounceProcess() {
            clearTimeout(this.state.debounceTimer);
            this.state.debounceTimer = setTimeout(() => this.processHTML(), 300);
        }

        async processHTML() {
            if (this.state.isProcessing) return;

            this.state.isProcessing = true;
            this.elements.processBtn.classList.add('loading');

            try {
                const html = this.elements.htmlInput.value.trim();

                if (!html) {
                    this.elements.textOutput.value = '';
                    this.updateStats();
                    return;
                }

                let result = await this.stripHTMLTags(html);

                if (this.elements.decodeEntities.checked) {
                    result = this.decodeHTMLEntities(result);
                }

                if (this.elements.normalizeWhitespace.checked) {
                    result = this.normalizeWhitespace(result);
                }

                this.elements.textOutput.value = result;
                this.updateStats();

                if (typeof gtag !== 'undefined') {
                    gtag('event', 'html_processed', {
                        input_length: html.length,
                        output_length: result.length
                    });
                }

            } catch (error) {
                console.error('Processing error:', error);
                this.showToast('Error processing HTML content', 'error');
            } finally {
                this.state.isProcessing = false;
                this.elements.processBtn.classList.remove('loading');
            }
        }

        async stripHTMLTags(html) {
            return new Promise((resolve) => {
                try {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');

                    if (this.elements.preserveLinks.checked) {
                        // Replace links with "text (url)" format
                        const links = doc.querySelectorAll('a[href]');
                        links.forEach(link => {
                            const text = link.textContent.trim();
                            const href = link.getAttribute('href');
                            if (text && href && href !== '#') {
                                link.textContent = `${text} (${href})`;
                            }
                        });
                    }

                    let result = '';

                    if (this.elements.preserveLineBreaks.checked) {
                        // Add line breaks for block elements
                        const blockElements = doc.querySelectorAll('div, p, br, h1, h2, h3, h4, h5, h6, li, tr, td, th, section, article, header, footer, main, aside');
                        blockElements.forEach(el => {
                            if (el.tagName === 'BR') {
                                el.replaceWith('\n');
                            } else if (['LI'].includes(el.tagName)) {
                                el.insertAdjacentText('beforebegin', '• ');
                                el.insertAdjacentText('afterend', '\n');
                            } else {
                                el.insertAdjacentText('afterend', '\n');
                            }
                        });
                    }

                    result = doc.body ? (doc.body.textContent || doc.body.innerText || '') : (doc.textContent || doc.innerText || '');

                    // Clean up multiple newlines
                    if (this.elements.preserveLineBreaks.checked) {
                        result = result.replace(/\n\s*\n\s*\n/g, '\n\n');
                    }

                    resolve(result.trim());
                } catch (error) {
                    // Fallback: simple regex-based tag removal
                    let result = html.replace(/<[^>]*>/g, '');
                    resolve(result.trim());
                }
            });
        }

        decodeHTMLEntities(str) {
            const textarea = document.createElement('textarea');
            textarea.innerHTML = str;
            return textarea.value;
        }

        normalizeWhitespace(str) {
            return str.replace(/\s+/g, ' ').trim();
        }

        updateStats() {
            const input = this.elements.htmlInput.value;
            const output = this.elements.textOutput.value;

            const inputChars = input.length;
            const outputChars = output.length;
            const inputWords = this.countWords(input);
            const outputWords = this.countWords(output);
            const reduction = inputChars > 0 ? Math.round(((inputChars - outputChars) / inputChars) * 100) : 0;

            document.getElementById('inputChars').textContent = inputChars.toLocaleString();
            document.getElementById('inputWords').textContent = inputWords.toLocaleString();
            document.getElementById('outputChars').textContent = outputChars.toLocaleString();
            document.getElementById('outputWords').textContent = outputWords.toLocaleString();
            document.getElementById('reductionPercent').textContent = reduction;
        }

        countWords(str) {
            return str.trim() ? str.trim().split(/\s+/).length : 0;
        }

        handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                this.readFile(file);
            }
            event.target.value = ''; // Reset file input
        }

        readFile(file) {
            const maxSize = 10 * 1024 * 1024; // 10MB limit

            if (file.size > maxSize) {
                this.showToast('File too large. Maximum size is 10MB.', 'error');
                return;
            }

            const reader = new FileReader();

            reader.onload = (e) => {
                this.elements.htmlInput.value = e.target.result;
                this.processHTML();
                this.showToast(`File "${file.name}" loaded successfully`);

                if (typeof gtag !== 'undefined') {
                    gtag('event', 'file_uploaded', {
                        file_type: file.type,
                        file_size: file.size
                    });
                }
            };

            reader.onerror = () => {
                this.showToast('Error reading file', 'error');
            };

            reader.readAsText(file);
        }

        clearInput() {
            this.elements.htmlInput.value = '';
            this.elements.textOutput.value = '';
            this.updateStats();
            this.elements.htmlInput.focus();
            this.showToast('Input cleared');
        }

        async pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                this.elements.htmlInput.value = text;
                this.processHTML();
                this.showToast('Content pasted from clipboard');
            } catch (err) {
                this.showToast('Failed to paste from clipboard. Use Ctrl+V instead.', 'error');
            }
        }

        async copyToClipboard() {
            const text = this.elements.textOutput.value;

            if (!text) {
                this.showToast('Nothing to copy', 'warning');
                return;
            }

            try {
                await navigator.clipboard.writeText(text);
                this.showToast('Copied to clipboard');

                if (typeof gtag !== 'undefined') {
                    gtag('event', 'text_copied', {text_length: text.length});
                }
            } catch (err) {
                // Fallback for browsers without clipboard API
                this.elements.textOutput.select();
                const successful = document.execCommand('copy');
                if (successful) {
                    this.showToast('Copied to clipboard');
                } else {
                    this.showToast('Failed to copy to clipboard', 'error');
                }
            }
        }

        downloadOutput() {
            const text = this.elements.textOutput.value;

            if (!text) {
                this.showToast('Nothing to download', 'warning');
                return;
            }

            try {
                const blob = new Blob([text], {type: 'text/plain;charset=utf-8'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');

                a.href = url;
                a.download = `stripped-text-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.txt`;
                a.style.display = 'none';

                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                this.showToast('File downloaded');

                if (typeof gtag !== 'undefined') {
                    gtag('event', 'file_downloaded', {text_length: text.length});
                }
            } catch (error) {
                this.showToast('Failed to download file', 'error');
            }
        }

        showToast(message, type = 'success') {
            this.elements.toast.innerHTML = `
      <i data-lucide="${type === 'error' ? 'x-circle' : type === 'warning' ? 'alert-triangle' : 'check-circle'}" aria-hidden="true"></i>
      ${message}
    `;
            this.elements.toast.className = `toast ${type} show`;
            this.initializeIcons();

            setTimeout(() => {
                this.elements.toast.classList.remove('show');
            }, 4000);
        }
    }

    // Initialize the application
    document.addEventListener('DOMContentLoaded', () => {
        new HTMLTagStripper();
    });

    // Service Worker registration for PWA capabilities
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js').catch(() => {
                // Service worker registration failed - not critical
            });
        });
    }
</script>
<script src="../logo.js"></script>
</body>
</html>