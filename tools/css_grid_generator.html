<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåê</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Grid Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {--primary: #3b82f6; --primary-light: #93c5fd; --primary-dark: #1d4ed8; --gray-50: #f9fafb; --gray-100: #f3f4f6; --gray-200: #e5e7eb; --gray-300: #d1d5db; --gray-400: #9ca3af; --gray-500: #6b7280; --gray-600: #4b5563; --gray-700: #374151; --gray-800: #1f2937; --gray-900: #111827; --red-500: #ef4444; --green-500: #10b981; --radius: 0.375rem; --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.05); --shadow: 0 1px 3px 0 rgba(0,0,0,0.1), 0 1px 2px 0 rgba(0,0,0,0.06); --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);}
        * {margin: 0; padding: 0; box-sizing: border-box;}
        body {font-family: 'Inter', system-ui, sans-serif; background: var(--gray-100); color: var(--gray-800); line-height: 1.5; font-size: 0.875rem;}
        .app {width: 100%; margin: 0 auto; padding: 1rem;}
        .header {padding: 1.5rem 0; display: flex; align-items: center; border-bottom: 1px solid var(--gray-200); margin-bottom: 1.5rem;}
        .logo {display: flex; align-items: center; font-weight: 700; font-size: 1.25rem; color: var(--gray-900);}
        .logo svg {margin-right: 0.5rem; fill: var(--primary);}
        .layout {display: grid; grid-template-columns: 1fr; gap: 1.5rem;}
        @media (min-width: 768px) {.layout {grid-template-columns: 320px 1fr;}}
        @media (min-width: 1280px) {.layout {grid-template-columns: 320px 1fr 320px;}}
        .card {background: white; border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; margin-bottom: 1.5rem;}
        .card:last-child {margin-bottom: 0;}
        .card-header {padding: 0.75rem 1rem; background: var(--gray-50); border-bottom: 1px solid var(--gray-200); font-weight: 600; font-size: 0.875rem; display: flex; justify-content: space-between; align-items: center;}
        .card-body {padding: 1rem;}
        .form-group {margin-bottom: 1rem;}
        .form-label {display: block; margin-bottom: 0.375rem; font-weight: 500; font-size: 0.75rem; color: var(--gray-700);}
        .input {width: 100%; padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: var(--radius); font-size: 0.875rem; transition: border-color 0.15s, box-shadow 0.15s;}
        .input:focus {outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);}
        select.input {background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'%3E%3C/path%3E%3C/svg%3E"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1rem; padding-right: 2rem; -webkit-appearance: none; appearance: none;}
        .btn {display: inline-flex; align-items: center; justify-content: center; padding: 0.5rem 1rem; font-weight: 500; font-size: 0.875rem; border-radius: var(--radius); border: none; cursor: pointer; transition: background-color 0.15s, transform 0.05s;}
        .btn:active {transform: translateY(1px);}
        .btn-primary {background: var(--primary); color: white;}
        .btn-primary:hover {background: var(--primary-dark);}
        .btn-sm {padding: 0.25rem 0.5rem; font-size: 0.75rem;}
        .btn-success {background: var(--green-500); color: white;}
        .btn-success:hover {background: #059669;}
        .btn-danger {background: var(--red-500); color: white;}
        .btn-danger:hover {background: #dc2626;}
        .flex {display: flex;}
        .flex-col {flex-direction: column;}
        .space-x-2 > * + * {margin-left: 0.5rem;}
        .space-y-2 > * + * {margin-top: 0.5rem;}
        .gap-2 {gap: 0.5rem;}
        .mt-4 {margin-top: 1rem;}
        .mt-2 {margin-top: 0.5rem;}
        .mb-2 {margin-bottom: 0.5rem;}
        .mr-2 {margin-right: 0.5rem;}
        .grid-preview {min-height: 400px; border: 1px solid var(--gray-300); border-radius: var(--radius); position: relative; overflow: hidden; resize: both; background-color: var(--gray-50); background-image: linear-gradient(to right, var(--gray-200) 1px, transparent 1px), linear-gradient(to bottom, var(--gray-200) 1px, transparent 1px); background-size: 20px 20px;}
        .grid-item {background: white; border: 1px solid var(--gray-300); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: var(--gray-500); cursor: pointer; transition: all 0.2s;}
        .grid-item:hover {border-color: var(--primary); color: var(--gray-700);}
        .grid-item.selected {background: var(--primary-light); border-color: var(--primary); color: var(--primary-dark);}
        .tab-group {display: flex; border-bottom: 1px solid var(--gray-200);}
        .tab {padding: 0.5rem 1rem; cursor: pointer; font-size: 0.875rem; font-weight: 500; color: var(--gray-500); border-bottom: 2px solid transparent;}
        .tab.active {color: var(--primary); border-color: var(--primary);}
        .tab-content {display: none; padding: 1rem 0;}
        .tab-content.active {display: block;}
        .code-preview {font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; background: var(--gray-800); color: white; padding: 1rem; border-radius: var(--radius); overflow-x: auto; font-size: 0.75rem; line-height: 1.5;}
        .code-preview .highlight {color: var(--primary-light);}
        .grid-controls {display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 0.5rem;}
        .size-control {font-size: 0.75rem; color: var(--gray-600); cursor: pointer; padding: 0.375rem; border: 1px solid var(--gray-200); border-radius: var(--radius); display: flex; justify-content: space-between; align-items: center;}
        .size-control:hover {border-color: var(--primary-light);}
        .breakpoint {background: var(--gray-50); border: 1px solid var(--gray-200); border-radius: var(--radius); padding: 0.75rem; margin-bottom: 0.75rem;}
        .breakpoint-header {display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;}
        .toggle {position: relative; display: inline-block; width: 36px; height: 20px;}
        .toggle input {opacity: 0; width: 0; height: 0;}
        .toggle-slider {position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--gray-300); transition: .3s; border-radius: 34px;}
        .toggle-slider:before {position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .3s; border-radius: 50%;}
        input:checked + .toggle-slider {background-color: var(--primary);}
        input:checked + .toggle-slider:before {transform: translateX(16px);}
        .preset-grid {display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 0.5rem; margin-top: 0.5rem;}
        .preset {border: 1px solid var(--gray-200); border-radius: var(--radius); padding: 0.5rem; text-align: center; cursor: pointer; font-size: 0.75rem;}
        .preset:hover {border-color: var(--primary); background: var(--gray-50);}
        .preset-icon {display: flex; align-items: center; justify-content: center; margin-bottom: 0.25rem; height: 32px;}
        .alert {padding: 0.75rem; border-radius: var(--radius); background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2); color: var(--primary-dark); margin-bottom: 1rem; font-size: 0.75rem;}
        .range-output {margin-left: 0.5rem; font-size: 0.75rem; color: var(--gray-500); min-width: 2.5rem;}
        .range-container {display: flex; align-items: center;}
        .helper-text {font-size: 0.65rem; color: var(--gray-500); margin-top: 0.25rem;}
        .named-area {display: flex; align-items: center; padding: 0.5rem; border: 1px solid var(--gray-200); border-radius: var(--radius); margin-bottom: 0.5rem;}
        .named-area input {flex: 1; margin-right: 0.5rem;}
        .checkbox-group {display: flex; align-items: center; margin-bottom: 0.75rem;}
        .checkbox-group input[type="checkbox"] {margin-right: 0.5rem;}
    </style>
</head>
<body>
<div class="app">
    <header class="header">
        <div class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3 3h18v18H3V3zm1 1v4h4V4H4zm6 0v4h4V4h-4zm6 0v4h4V4h-4zM4 10v4h4v-4H4zm6 0v4h4v-4h-4zm6 0v4h4v-4h-4zM4 16v4h4v-4H4zm6 0v4h4v-4h-4zm6 0v4h4v-4h-4z"></path></svg>
            CSS Grid Generator
        </div>
    </header>

    <main class="layout">
        <!-- Left Column: Basic Controls -->
        <aside class="controls-left">
            <div class="card">
                <div class="card-header">Grid Settings</div>
                <div class="card-body">
                    <div class="flex gap-2">
                        <div class="form-group" style="flex: 1">
                            <label for="rows" class="form-label">Rows</label>
                            <input type="number" id="rows" class="input" value="2" min="1" max="12">
                        </div>
                        <div class="form-group" style="flex: 1">
                            <label for="columns" class="form-label">Columns</label>
                            <input type="number" id="columns" class="input" value="2" min="1" max="12">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="gap" class="form-label">Gap</label>
                        <div class="range-container">
                            <input type="range" id="gap" class="input" value="10" min="0" max="50" step="2">
                            <span id="gapOutput" class="range-output">10px</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="alignItems" class="form-label">Align Items</label>
                        <select id="alignItems" class="input">
                            <option value="stretch">stretch</option>
                            <option value="start">start</option>
                            <option value="center">center</option>
                            <option value="end">end</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="justifyContent" class="form-label">Justify Content</label>
                        <select id="justifyContent" class="input">
                            <option value="start">start</option>
                            <option value="center">center</option>
                            <option value="end">end</option>
                            <option value="space-between">space-between</option>
                            <option value="space-around">space-around</option>
                            <option value="space-evenly">space-evenly</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="gridAutoFlow" class="form-label">Grid Auto Flow</label>
                        <select id="gridAutoFlow" class="input">
                            <option value="row">row</option>
                            <option value="column">column</option>
                            <option value="row dense">row dense</option>
                            <option value="column dense">column dense</option>
                        </select>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="useNamedAreas">
                        <label for="useNamedAreas" class="form-label" style="margin-bottom: 0">Use Named Areas</label>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span>Sizes</span>
                    <button id="resetSizes" class="btn btn-sm btn-primary">Reset</button>
                </div>
                <div class="card-body">
                    <div id="sizeControls" class="flex-col space-y-2">
                        <div id="rowControls">
                            <label class="form-label">Row Heights</label>
                            <div id="rowSizes" class="flex-col space-y-2"></div>
                        </div>
                        <div id="columnControls" class="mt-2">
                            <label class="form-label">Column Widths</label>
                            <div id="columnSizes" class="flex-col space-y-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Middle Column: Grid Preview -->
        <section class="output">
            <div class="card">
                <div class="card-header">
                    <div class="tab-group">
                        <div class="tab active" data-tab="preview">Preview</div>
                        <div class="tab" data-tab="code">CSS Code</div>
                        <div class="tab" data-tab="areas">Named Areas</div>
                    </div>
                </div>
                <div class="card-body">
                    <div id="previewTab" class="tab-content active">
                        <div class="alert">Click on a grid item to configure its position and span.</div>
                        <div id="gridDisplay" class="grid-preview"></div>
                        <div id="itemControls" class="mt-4" style="display: none;">
                            <div class="card-header">Selected Item</div>
                            <div class="card-body">
                                <div class="flex gap-2">
                                    <div class="form-group" style="flex: 1">
                                        <label for="gridRowStart" class="form-label">Row Start</label>
                                        <input type="number" id="gridRowStart" class="input" value="1" min="1">
                                    </div>
                                    <div class="form-group" style="flex: 1">
                                        <label for="gridRowSpan" class="form-label">Row Span</label>
                                        <input type="number" id="gridRowSpan" class="input" value="1" min="1">
                                    </div>
                                </div>
                                <div class="flex gap-2">
                                    <div class="form-group" style="flex: 1">
                                        <label for="gridColumnStart" class="form-label">Column Start</label>
                                        <input type="number" id="gridColumnStart" class="input" value="1" min="1">
                                    </div>
                                    <div class="form-group" style="flex: 1">
                                        <label for="gridColumnSpan" class="form-label">Column Span</label>
                                        <input type="number" id="gridColumnSpan" class="input" value="1" min="1">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="gridArea" class="form-label">Grid Area (if using named areas)</label>
                                    <select id="gridArea" class="input"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="codeTab" class="tab-content">
                        <pre id="codePreview" class="code-preview"></pre>
                        <button id="copyCode" class="btn btn-success mt-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            Copy to Clipboard
                        </button>
                    </div>
                    <div id="areasTab" class="tab-content">
                        <div class="alert">Define named areas for your grid. These can be assigned to grid items.</div>
                        <div id="namedAreas" class="flex-col space-y-2"></div>
                        <button id="addNamedArea" class="btn btn-primary mt-2">Add Named Area</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Right Column: Presets and Breakpoints -->
        <aside class="controls-right">
            <div class="card">
                <div class="card-header">
                    <span>Presets</span>
                </div>
                <div class="card-body">
                    <div class="preset-grid">
                        <div class="preset" data-preset="basic-2x2">
                            <div class="preset-icon">2√ó2</div>
                            <div>Basic</div>
                        </div>
                        <div class="preset" data-preset="holy-grail">
                            <div class="preset-icon">‚åò</div>
                            <div>Holy Grail</div>
                        </div>
                        <div class="preset" data-preset="magazine">
                            <div class="preset-icon">üì∞</div>
                            <div>Magazine</div>
                        </div>
                        <div class="preset" data-preset="dashboard">
                            <div class="preset-icon">üìä</div>
                            <div>Dashboard</div>
                        </div>
                        <div class="preset" data-preset="gallery">
                            <div class="preset-icon">üñºÔ∏è</div>
                            <div>Gallery</div>
                        </div>
                        <div class="preset" data-preset="card-layout">
                            <div class="preset-icon">üÉè</div>
                            <div>Cards</div>
                        </div>
                        <div class="preset" data-preset="portfolio">
                            <div class="preset-icon">üíº</div>
                            <div>Portfolio</div>
                        </div>
                        <div class="preset" data-preset="blog">
                            <div class="preset-icon">üìù</div>
                            <div>Blog</div>
                        </div>
                        <div class="preset" data-preset="product">
                            <div class="preset-icon">üõçÔ∏è</div>
                            <div>Product</div>
                        </div>
                        <div class="preset" data-preset="masonry">
                            <div class="preset-icon">üß±</div>
                            <div>Masonry</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Advanced Features</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="autoFit" class="form-label">Auto-Fit / Auto-Fill</label>
                        <select id="autoFit" class="input">
                            <option value="none">None (explicit columns)</option>
                            <option value="auto-fill">auto-fill</option>
                            <option value="auto-fit">auto-fit</option>
                        </select>
                    </div>

                    <div id="minmaxControls" style="display: none;">
                        <div class="form-group">
                            <label for="minWidth" class="form-label">Min Width</label>
                            <input type="text" id="minWidth" class="input" value="200px" placeholder="e.g., 100px">
                        </div>
                        <div class="form-group">
                            <label for="maxWidth" class="form-label">Max Width</label>
                            <select id="maxWidth" class="input">
                                <option value="1fr">1fr</option>
                                <option value="auto">auto</option>
                                <option value="max-content">max-content</option>
                                <option value="custom">Custom...</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span>Breakpoints</span>
                    <button id="addBreakpoint" class="btn btn-sm btn-primary">Add</button>
                </div>
                <div class="card-body">
                    <div id="breakpointsContainer"></div>
                    <div class="helper-text">Add responsive breakpoints to change layout at different screen sizes.</div>
                </div>
            </div>
        </aside>
    </main>
</div>

<script>
    // State management
    const state = {
        rows: 2,
        columns: 2,
        gap: 10,
        rowSizes: ['1fr', '1fr'],
        columnSizes: ['1fr', '1fr'],
        alignItems: 'stretch',
        justifyContent: 'start',
        gridAutoFlow: 'row',
        useNamedAreas: false,
        namedAreas: [],
        autoFit: 'none',
        minWidth: '200px',
        maxWidth: '1fr',
        selectedItem: null,
        gridItems: [],
        breakpoints: []
    };

    // Initialize the application
    function init() {
        // Get DOM elements
        const elements = {
            rows: document.getElementById('rows'),
            columns: document.getElementById('columns'),
            gap: document.getElementById('gap'),
            gapOutput: document.getElementById('gapOutput'),
            alignItems: document.getElementById('alignItems'),
            justifyContent: document.getElementById('justifyContent'),
            gridAutoFlow: document.getElementById('gridAutoFlow'),
            useNamedAreas: document.getElementById('useNamedAreas'),
            autoFit: document.getElementById('autoFit'),
            minWidth: document.getElementById('minWidth'),
            maxWidth: document.getElementById('maxWidth'),
            minmaxControls: document.getElementById('minmaxControls'),
            gridDisplay: document.getElementById('gridDisplay'),
            codePreview: document.getElementById('codePreview'),
            rowSizes: document.getElementById('rowSizes'),
            columnSizes: document.getElementById('columnSizes'),
            addBreakpoint: document.getElementById('addBreakpoint'),
            breakpointsContainer: document.getElementById('breakpointsContainer'),
            namedAreas: document.getElementById('namedAreas'),
            addNamedArea: document.getElementById('addNamedArea'),
            copyCode: document.getElementById('copyCode'),
            resetSizes: document.getElementById('resetSizes'),
            itemControls: document.getElementById('itemControls'),
            gridRowStart: document.getElementById('gridRowStart'),
            gridRowSpan: document.getElementById('gridRowSpan'),
            gridColumnStart: document.getElementById('gridColumnStart'),
            gridColumnSpan: document.getElementById('gridColumnSpan'),
            gridArea: document.getElementById('gridArea'),
            tabs: document.querySelectorAll('.tab'),
            presets: document.querySelectorAll('.preset')
        };

        // Add event listeners
        elements.rows.addEventListener('input', () => {
            const newRows = parseInt(elements.rows.value) || 2;
            if (newRows > 0 && newRows <= 12) {
                state.rows = newRows;
                updateRowControls();
                updateGrid();
            }
        });

        elements.columns.addEventListener('input', () => {
            const newColumns = parseInt(elements.columns.value) || 2;
            if (newColumns > 0 && newColumns <= 12) {
                state.columns = newColumns;
                updateColumnControls();
                updateGrid();
            }
        });

        elements.gap.addEventListener('input', () => {
            state.gap = parseInt(elements.gap.value);
            elements.gapOutput.textContent = `${state.gap}px`;
            updateGrid();
        });

        elements.alignItems.addEventListener('change', () => {
            state.alignItems = elements.alignItems.value;
            updateGrid();
        });

        elements.justifyContent.addEventListener('change', () => {
            state.justifyContent = elements.justifyContent.value;
            updateGrid();
        });

        elements.gridAutoFlow.addEventListener('change', () => {
            state.gridAutoFlow = elements.gridAutoFlow.value;
            updateGrid();
        });

        elements.useNamedAreas.addEventListener('change', () => {
            state.useNamedAreas = elements.useNamedAreas.checked;
            updateGridAreaSelect();
            updateGrid();
        });

        elements.autoFit.addEventListener('change', () => {
            state.autoFit = elements.autoFit.value;
            elements.minmaxControls.style.display = state.autoFit !== 'none' ? 'block' : 'none';
            updateGrid();
        });

        elements.minWidth.addEventListener('input', () => {
            state.minWidth = elements.minWidth.value;
            updateGrid();
        });

        elements.maxWidth.addEventListener('change', () => {
            if (elements.maxWidth.value === 'custom') {
                const customValue = prompt('Enter custom max width value:', '1fr');
                if (customValue) {
                    state.maxWidth = customValue;
                    // Add custom option if it doesn't exist
                    let found = false;
                    for (let i = 0; i < elements.maxWidth.options.length; i++) {
                        if (elements.maxWidth.options[i].value === 'custom') {
                            elements.maxWidth.options[i].text = `Custom (${customValue})`;
                            found = true;
                            break;
                        }
                    }
                    if (!found) {
                        const option = new Option(`Custom (${customValue})`, 'custom');
                        elements.maxWidth.add(option);
                    }
                } else {
                    elements.maxWidth.value = state.maxWidth;
                }
            } else {
                state.maxWidth = elements.maxWidth.value;
            }
            updateGrid();
        });

        elements.addBreakpoint.addEventListener('click', addBreakpoint);
        elements.addNamedArea.addEventListener('click', addNamedArea);
        elements.copyCode.addEventListener('click', copyCode);
        elements.resetSizes.addEventListener('click', resetSizes);

        // Tab switching
        elements.tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                elements.tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`${tabName}Tab`).classList.add('active');
            });
        });

        // Grid item controls
        elements.gridRowStart.addEventListener('input', updateSelectedItem);
        elements.gridRowSpan.addEventListener('input', updateSelectedItem);
        elements.gridColumnStart.addEventListener('input', updateSelectedItem);
        elements.gridColumnSpan.addEventListener('input', updateSelectedItem);
        elements.gridArea.addEventListener('change', updateSelectedItemArea);

        // Apply presets
        elements.presets.forEach(preset => {
            preset.addEventListener('click', () => applyPreset(preset.dataset.preset));
        });

        // Initial setup
        updateRowControls();
        updateColumnControls();
        updateGrid();
    }

    // Update controls for row sizes
    function updateRowControls() {
        const container = document.getElementById('rowSizes');
        container.innerHTML = '';

        // Ensure rowSizes array matches current row count
        while (state.rowSizes.length < state.rows) {
            state.rowSizes.push('1fr');
        }
        state.rowSizes = state.rowSizes.slice(0, state.rows);

        // Create controls for each row
        state.rowSizes.forEach((size, index) => {
            const row = document.createElement('div');
            row.className = 'size-control';
            row.innerHTML = `Row ${index + 1}: <select class="row-size" data-index="${index}">
      <option value="auto" ${size === 'auto' ? 'selected' : ''}>auto</option>
      <option value="min-content" ${size === 'min-content' ? 'selected' : ''}>min-content</option>
      <option value="max-content" ${size === 'max-content' ? 'selected' : ''}>max-content</option>
      <option value="1fr" ${size === '1fr' ? 'selected' : ''}>1fr</option>
      <option value="2fr" ${size === '2fr' ? 'selected' : ''}>2fr</option>
      <option value="3fr" ${size === '3fr' ? 'selected' : ''}>3fr</option>
      <option value="custom" ${!['auto', 'min-content', 'max-content', '1fr', '2fr', '3fr'].includes(size) ? 'selected' : ''}>custom</option>
    </select>`;

            container.appendChild(row);

            const select = row.querySelector('select');
            select.addEventListener('change', function() {
                const idx = parseInt(this.dataset.index);
                if (this.value === 'custom') {
                    const customValue = prompt('Enter custom value (e.g., 100px, 50%):', state.rowSizes[idx]);
                    if (customValue) {
                        state.rowSizes[idx] = customValue;
                        updateGrid();
                    } else {
                        this.value = state.rowSizes[idx];
                    }
                } else {
                    state.rowSizes[idx] = this.value;
                    updateGrid();
                }
            });
        });
    }

    // Update controls for column sizes
    function updateColumnControls() {
        const container = document.getElementById('columnSizes');
        container.innerHTML = '';

        // Ensure columnSizes array matches current column count
        while (state.columnSizes.length < state.columns) {
            state.columnSizes.push('1fr');
        }
        state.columnSizes = state.columnSizes.slice(0, state.columns);

        // Create controls for each column
        state.columnSizes.forEach((size, index) => {
            const column = document.createElement('div');
            column.className = 'size-control';
            column.innerHTML = `Column ${index + 1}: <select class="column-size" data-index="${index}">
      <option value="auto" ${size === 'auto' ? 'selected' : ''}>auto</option>
      <option value="min-content" ${size === 'min-content' ? 'selected' : ''}>min-content</option>
      <option value="max-content" ${size === 'max-content' ? 'selected' : ''}>max-content</option>
      <option value="1fr" ${size === '1fr' ? 'selected' : ''}>1fr</option>
      <option value="2fr" ${size === '2fr' ? 'selected' : ''}>2fr</option>
      <option value="3fr" ${size === '3fr' ? 'selected' : ''}>3fr</option>
      <option value="custom" ${!['auto', 'min-content', 'max-content', '1fr', '2fr', '3fr'].includes(size) ? 'selected' : ''}>custom</option>
    </select>`;

            container.appendChild(column);

            const select = column.querySelector('select');
            select.addEventListener('change', function() {
                const idx = parseInt(this.dataset.index);
                if (this.value === 'custom') {
                    const customValue = prompt('Enter custom value (e.g., 200px, 30%):', state.columnSizes[idx]);
                    if (customValue) {
                        state.columnSizes[idx] = customValue;
                        updateGrid();
                    } else {
                        this.value = state.columnSizes[idx];
                    }
                } else {
                    state.columnSizes[idx] = this.value;
                    updateGrid();
                }
            });
        });
    }

    // Reset all sizes to 1fr
    function resetSizes() {
        state.rowSizes = Array(state.rows).fill('1fr');
        state.columnSizes = Array(state.columns).fill('1fr');
        updateRowControls();
        updateColumnControls();
        updateGrid();
    }

    // Add named area
    function addNamedArea() {
        const name = prompt('Enter name for the grid area:');
        if (name && /^[a-zA-Z][a-zA-Z0-9-_]*$/.test(name)) {
            if (state.namedAreas.includes(name)) {
                alert('Area name already exists!');
                return;
            }
            state.namedAreas.push(name);
            updateNamedAreas();
            updateGridAreaSelect();
            updateGrid();
        } else if (name) {
            alert('Area name must start with a letter and contain only letters, numbers, hyphens, and underscores.');
        }
    }

    // Update named areas UI
    function updateNamedAreas() {
        const container = document.getElementById('namedAreas');
        container.innerHTML = '';

        state.namedAreas.forEach((area, index) => {
            const areaEl = document.createElement('div');
            areaEl.className = 'named-area';
            areaEl.innerHTML = `
      <input type="text" class="input" value="${area}" data-index="${index}">
      <button class="btn btn-sm btn-danger remove-area" data-index="${index}">Remove</button>
    `;
            container.appendChild(areaEl);

            // Add change event
            areaEl.querySelector('input').addEventListener('input', function() {
                const idx = parseInt(this.dataset.index);
                const newName = this.value;
                if (/^[a-zA-Z][a-zA-Z0-9-_]*$/.test(newName)) {
                    state.namedAreas[idx] = newName;
                    updateGridAreaSelect();
                    updateGrid();
                }
            });

            // Add remove event
            areaEl.querySelector('.remove-area').addEventListener('click', function() {
                const idx = parseInt(this.dataset.index);
                state.namedAreas.splice(idx, 1);
                updateNamedAreas();
                updateGridAreaSelect();
                updateGrid();
            });
        });
    }

    // Update grid area select dropdown
    function updateGridAreaSelect() {
        const select = document.getElementById('gridArea');
        select.innerHTML = '<option value="">None</option>';

        state.namedAreas.forEach(area => {
            const option = document.createElement('option');
            option.value = area;
            option.textContent = area;
            select.appendChild(option);
        });

        // Set current value if selected item exists
        if (state.selectedItem !== null) {
            const item = state.gridItems[state.selectedItem];
            if (item.gridArea) {
                select.value = item.gridArea;
            }
        }

        select.parentElement.style.display = state.useNamedAreas ? 'block' : 'none';
    }

    // Update the grid preview and CSS
    function updateGrid() {
        const gridDisplay = document.getElementById('gridDisplay');

        // Update grid container styles
        gridDisplay.style.display = 'grid';

        if (state.autoFit === 'none') {
            gridDisplay.style.gridTemplateRows = state.rowSizes.join(' ');
            gridDisplay.style.gridTemplateColumns = state.columnSizes.join(' ');
        } else {
            gridDisplay.style.gridTemplateRows = state.rowSizes.join(' ');
            gridDisplay.style.gridTemplateColumns = `repeat(${state.autoFit}, minmax(${state.minWidth}, ${state.maxWidth}))`;
        }

        gridDisplay.style.gap = `${state.gap}px`;
        gridDisplay.style.alignItems = state.alignItems;
        gridDisplay.style.justifyContent = state.justifyContent;
        gridDisplay.style.gridAutoFlow = state.gridAutoFlow;

        // Set named areas if enabled
        if (state.useNamedAreas && state.namedAreas.length > 0) {
            // We'll generate this in the CSS but not apply it to the preview
            // as it would override individual item positioning
        }

        // Clear previous grid items
        gridDisplay.innerHTML = '';
        state.gridItems = [];

        // Create grid items
        for (let i = 0; i < state.rows * state.columns; i++) {
            const gridItem = document.createElement('div');
            gridItem.className = 'grid-item';
            gridItem.textContent = `Item ${i + 1}`;
            gridItem.dataset.index = i;

            // Calculate default position
            const row = Math.floor(i / state.columns) + 1;
            const col = (i % state.columns) + 1;

            // Add to state
            state.gridItems.push({
                element: gridItem,
                rowStart: row,
                rowSpan: 1,
                columnStart: col,
                columnSpan: 1,
                gridArea: ''
            });

            // Add click event
            gridItem.addEventListener('click', () => selectGridItem(i));

            gridDisplay.appendChild(gridItem);
        }

        // Generate CSS code
        generateCode();

        // Update selected item if there is one
        if (state.selectedItem !== null) {
            selectGridItem(state.selectedItem);
        }
    }

    // Select a grid item
    function selectGridItem(index) {
        // If already selected, deselect
        if (state.selectedItem === index) {
            state.selectedItem = null;
            document.querySelectorAll('.grid-item').forEach(item => {
                item.classList.remove('selected');
            });
            document.getElementById('itemControls').style.display = 'none';
            return;
        }

        // Deselect previous
        document.querySelectorAll('.grid-item').forEach(item => {
            item.classList.remove('selected');
        });

        // Select new item
        state.selectedItem = index;
        const item = state.gridItems[index];
        item.element.classList.add('selected');

        // Update controls
        const controls = document.getElementById('itemControls');
        document.getElementById('gridRowStart').value = item.rowStart;
        document.getElementById('gridRowSpan').value = item.rowSpan;
        document.getElementById('gridColumnStart').value = item.columnStart;
        document.getElementById('gridColumnSpan').value = item.columnSpan;

        // Update grid area select
        const gridAreaSelect = document.getElementById('gridArea');
        gridAreaSelect.value = item.gridArea || '';

        controls.style.display = 'block';
    }

    // Update selected item position and span
    function updateSelectedItem() {
        if (state.selectedItem === null) return;

        const item = state.gridItems[state.selectedItem];
        item.rowStart = parseInt(document.getElementById('gridRowStart').value) || 1;
        item.rowSpan = parseInt(document.getElementById('gridRowSpan').value) || 1;
        item.columnStart = parseInt(document.getElementById('gridColumnStart').value) || 1;
        item.columnSpan = parseInt(document.getElementById('gridColumnSpan').value) || 1;

        // Apply to element
        item.element.style.gridRowStart = item.rowStart;
        item.element.style.gridRowEnd = `span ${item.rowSpan}`;
        item.element.style.gridColumnStart = item.columnStart;
        item.element.style.gridColumnEnd = `span ${item.columnSpan}`;

        // Update code
        generateCode();
    }

    // Update selected item area
    function updateSelectedItemArea() {
        if (state.selectedItem === null) return;

        const item = state.gridItems[state.selectedItem];
        item.gridArea = document.getElementById('gridArea').value;

        if (item.gridArea) {
            // If using grid area, apply it to the element
            item.element.style.gridArea = item.gridArea;
            // Clear other positioning
            item.element.style.gridRowStart = '';
            item.element.style.gridRowEnd = '';
            item.element.style.gridColumnStart = '';
            item.element.style.gridColumnEnd = '';
        } else {
            // If not using grid area, reapply positioning
            item.element.style.gridArea = '';
            item.element.style.gridRowStart = item.rowStart;
            item.element.style.gridRowEnd = `span ${item.rowSpan}`;
            item.element.style.gridColumnStart = item.columnStart;
            item.element.style.gridColumnEnd = `span ${item.columnSpan}`;
        }

        // Update code
        generateCode();
    }

    // Add a responsive breakpoint
    function addBreakpoint() {
        const id = state.breakpoints.length;
        const breakpoint = {
            id,
            minWidth: 768,
            columns: state.columns,
            enabled: true
        };
        state.breakpoints.push(breakpoint);

        const container = document.getElementById('breakpointsContainer');
        const breakpointEl = document.createElement('div');
        breakpointEl.className = 'breakpoint';
        breakpointEl.innerHTML = `
    <div class="breakpoint-header">
      <label class="toggle">
        <input type="checkbox" class="breakpoint-toggle" data-id="${id}" checked>
        <span class="toggle-slider"></span>
      </label>
      <span>Breakpoint ${id + 1}</span>
      <button class="btn btn-sm btn-danger breakpoint-remove" data-id="${id}">Remove</button>
    </div>
    <div class="flex gap-2">
      <div class="form-group" style="flex: 1">
        <label class="form-label">Min Width (px)</label>
        <input type="number" class="input breakpoint-width" data-id="${id}" value="768" min="1">
      </div>
      <div class="form-group" style="flex: 1">
        <label class="form-label">Columns</label>
        <input type="number" class="input breakpoint-columns" data-id="${id}" value="${state.columns}" min="1" max="12">
      </div>
    </div>
  `;

        container.appendChild(breakpointEl);

        // Add event listeners
        breakpointEl.querySelector('.breakpoint-toggle').addEventListener('change', function() {
            const id = parseInt(this.dataset.id);
            state.breakpoints[id].enabled = this.checked;
            generateCode();
        });

        breakpointEl.querySelector('.breakpoint-width').addEventListener('input', function() {
            const id = parseInt(this.dataset.id);
            state.breakpoints[id].minWidth = parseInt(this.value) || 0;
            generateCode();
        });

        breakpointEl.querySelector('.breakpoint-columns').addEventListener('input', function() {
            const id = parseInt(this.dataset.id);
            state.breakpoints[id].columns = parseInt(this.value) || 1;
            generateCode();
        });

        breakpointEl.querySelector('.breakpoint-remove').addEventListener('click', function() {
            const id = parseInt(this.dataset.id);
            removeBreakpoint(id);
        });

        generateCode();
    }

    // Remove a breakpoint
    function removeBreakpoint(id) {
        state.breakpoints = state.breakpoints.filter(bp => bp.id !== id);

        // Update the UI
        const container = document.getElementById('breakpointsContainer');
        container.innerHTML = '';
        state.breakpoints.forEach((bp, index) => {
            const breakpointEl = document.createElement('div');
            breakpointEl.className = 'breakpoint';
            breakpointEl.innerHTML = `
      <div class="breakpoint-header">
        <label class="toggle">
          <input type="checkbox" class="breakpoint-toggle" data-id="${bp.id}" ${bp.enabled ? 'checked' : ''}>
          <span class="toggle-slider"></span>
        </label>
        <span>Breakpoint ${index + 1}</span>
        <button class="btn btn-sm btn-danger breakpoint-remove" data-id="${bp.id}">Remove</button>
      </div>
      <div class="flex gap-2">
        <div class="form-group" style="flex: 1">
          <label class="form-label">Min Width (px)</label>
          <input type="number" class="input breakpoint-width" data-id="${bp.id}" value="${bp.minWidth}" min="1">
        </div>
        <div class="form-group" style="flex: 1">
          <label class="form-label">Columns</label>
          <input type="number" class="input breakpoint-columns" data-id="${bp.id}" value="${bp.columns}" min="1" max="12">
        </div>
      </div>
    `;

            container.appendChild(breakpointEl);

            // Add event listeners
            breakpointEl.querySelector('.breakpoint-toggle').addEventListener('change', function() {
                const id = parseInt(this.dataset.id);
                state.breakpoints[state.breakpoints.findIndex(b => b.id === id)].enabled = this.checked;
                generateCode();
            });

            breakpointEl.querySelector('.breakpoint-width').addEventListener('input', function() {
                const id = parseInt(this.dataset.id);
                state.breakpoints[state.breakpoints.findIndex(b => b.id === id)].minWidth = parseInt(this.value) || 0;
                generateCode();
            });

            breakpointEl.querySelector('.breakpoint-columns').addEventListener('input', function() {
                const id = parseInt(this.dataset.id);
                state.breakpoints[state.breakpoints.findIndex(b => b.id === id)].columns = parseInt(this.value) || 1;
                generateCode();
            });

            breakpointEl.querySelector('.breakpoint-remove').addEventListener('click', function() {
                const id = parseInt(this.dataset.id);
                removeBreakpoint(id);
            });
        });

        generateCode();
    }

    // Generate CSS code
    function generateCode() {
        let css = `.grid-container {\n  display: grid;`;

        // Grid template rows
        css += `\n  grid-template-rows: ${state.rowSizes.join(' ')};`;

        // Grid template columns - handle auto-fit/auto-fill
        if (state.autoFit === 'none') {
            css += `\n  grid-template-columns: ${state.columnSizes.join(' ')};`;
        } else {
            css += `\n  grid-template-columns: repeat(${state.autoFit}, minmax(${state.minWidth}, ${state.maxWidth}));`;
        }

        // Gap
        css += `\n  gap: ${state.gap}px;`;

        // Grid auto flow
        if (state.gridAutoFlow !== 'row') {
            css += `\n  grid-auto-flow: ${state.gridAutoFlow};`;
        }

        // Alignment
        if (state.alignItems !== 'stretch') {
            css += `\n  align-items: ${state.alignItems};`;
        }
        if (state.justifyContent !== 'start') {
            css += `\n  justify-content: ${state.justifyContent};`;
        }

        // Named template areas
        if (state.useNamedAreas && state.namedAreas.length > 0) {
            css += `\n  grid-template-areas:\n    `;
            // This is a placeholder - in a real implementation, you'd generate
            // a visual representation of the grid with the named areas
            let areaTemplate = '';
            for (let i = 0; i < state.rows; i++) {
                let row = '';
                for (let j = 0; j < state.columns; j++) {
                    // Find if there's an item with this gridArea at this position
                    let areaName = '.';
                    for (const item of state.gridItems) {
                        if (item.gridArea && item.rowStart <= i+1 &&
                            item.rowStart + item.rowSpan > i+1 &&
                            item.columnStart <= j+1 &&
                            item.columnStart + item.columnSpan > j+1) {
                            areaName = item.gridArea;
                            break;
                        }
                    }
                    row += areaName + ' ';
                }
                areaTemplate += `"${row.trim()}"${i < state.rows - 1 ? '\n    ' : ''}`;
            }
            css += areaTemplate;
        }

        css += `\n}`;

        // Add custom grid item positions
        const customItems = state.gridItems.filter(item => {
            return item.gridArea || item.rowSpan > 1 || item.columnSpan > 1 ||
                item.rowStart !== Math.floor(state.gridItems.indexOf(item) / state.columns) + 1 ||
                item.columnStart !== (state.gridItems.indexOf(item) % state.columns) + 1;
        });

        if (customItems.length > 0) {
            css += `\n\n/* Custom grid item positions */`;
            customItems.forEach(item => {
                const index = state.gridItems.indexOf(item) + 1;
                css += `\n.grid-item:nth-child(${index}) {`;
                if (item.gridArea && state.useNamedAreas) {
                    css += `\n  grid-area: ${item.gridArea};`;
                } else {
                    css += `\n  grid-row: ${item.rowStart} / span ${item.rowSpan};`;
                    css += `\n  grid-column: ${item.columnStart} / span ${item.columnSpan};`;
                }
                css += `\n}`;
            });
        }

        // Add media queries for breakpoints
        if (state.breakpoints.length > 0) {
            css += `\n\n/* Responsive breakpoints */`;

            // Sort breakpoints by min-width (smallest first for mobile-first approach)
            const sortedBreakpoints = [...state.breakpoints].filter(bp => bp.enabled).sort((a, b) => a.minWidth - b.minWidth);

            sortedBreakpoints.forEach(bp => {
                css += `\n@media (min-width: ${bp.minWidth}px) {`;
                css += `\n  .grid-container {`;
                css += `\n    grid-template-columns: repeat(${bp.columns}, 1fr);`;
                css += `\n  }`;
                css += `\n}`;
            });
        }

        // Update code display with syntax highlighting
        document.getElementById('codePreview').innerHTML = css;
    }

    // Apply a preset layout
    function applyPreset(preset) {
        // Reset named areas
        state.namedAreas = [];
        document.getElementById('useNamedAreas').checked = false;
        state.useNamedAreas = false;

        switch (preset) {
            case 'basic-2x2':
                state.rows = 2;
                state.columns = 2;
                state.rowSizes = ['1fr', '1fr'];
                state.columnSizes = ['1fr', '1fr'];
                document.getElementById('rows').value = 2;
                document.getElementById('columns').value = 2;
                break;

            case 'holy-grail':
                state.rows = 3;
                state.columns = 3;
                state.rowSizes = ['auto', '1fr', 'auto'];
                state.columnSizes = ['1fr', '4fr', '1fr'];
                document.getElementById('rows').value = 3;
                document.getElementById('columns').value = 3;

                // Set up named areas
                state.namedAreas = ['header', 'sidebar', 'main', 'aside', 'footer'];
                document.getElementById('useNamedAreas').checked = true;
                state.useNamedAreas = true;

                // Set up the layout after the grid is created
                setTimeout(() => {
                    // Setup with named areas
                    state.gridItems[0].gridArea = 'header';
                    state.gridItems[0].columnSpan = 3;

                    state.gridItems[3].gridArea = 'sidebar';
                    state.gridItems[4].gridArea = 'main';
                    state.gridItems[5].gridArea = 'aside';

                    state.gridItems[6].gridArea = 'footer';
                    state.gridItems[6].columnSpan = 3;

                    updateNamedAreas();
                    updateGridAreaSelect();
                    updateGrid();
                }, 100);
                break;

            case 'magazine':
                state.rows = 4;
                state.columns = 3;
                state.rowSizes = ['auto', 'auto', '1fr', 'auto'];
                state.columnSizes = ['1fr', '2fr', '1fr'];
                document.getElementById('rows').value = 4;
                document.getElementById('columns').value = 3;

                // Set up the layout after the grid is created
                setTimeout(() => {
                    // Header spans all columns
                    state.gridItems[0].columnSpan = 3;
                    // Featured content spans first two rows of middle column
                    state.gridItems[4].rowSpan = 2;
                    // Footer spans all columns
                    state.gridItems[9].columnSpan = 3;

                    updateGrid();
                }, 100);
                break;

            case 'dashboard':
                state.rows = 3;
                state.columns = 4;
                state.rowSizes = ['auto', '1fr', '1fr'];
                state.columnSizes = ['1fr', '1fr', '1fr', '1fr'];
                document.getElementById('rows').value = 3;
                document.getElementById('columns').value = 4;

                // Set up the layout after the grid is created
                setTimeout(() => {
                    // Header spans all columns
                    state.gridItems[0].columnSpan = 4;
                    // Main chart spans 2x2
                    state.gridItems[4].rowSpan = 2;
                    state.gridItems[4].columnSpan = 2;

                    updateGrid();
                }, 100);
                break;

            case 'gallery':
                state.rows = 3;
                state.columns = 4;
                state.rowSizes = ['200px', '200px', '200px'];
                state.columnSizes = ['1fr', '1fr', '1fr', '1fr'];
                document.getElementById('rows').value = 3;
                document.getElementById('columns').value = 4;

                // Enable auto-fit for responsive gallery
                document.getElementById('autoFit').value = 'auto-fit';
                state.autoFit = 'auto-fit';
                document.getElementById('minWidth').value = '200px';
                state.minWidth = '200px';
                document.getElementById('maxWidth').value = '1fr';
                state.maxWidth = '1fr';
                document.getElementById('minmaxControls').style.display = 'block';

                updateGrid();
                break;

            case 'card-layout':
                state.rows = 2;
                state.columns = 3;
                state.rowSizes = ['1fr', '1fr'];
                state.columnSizes = ['1fr', '1fr', '1fr'];
                document.getElementById('rows').value = 2;
                document.getElementById('columns').value = 3;

                // Enable auto-fill for card layout
                document.getElementById('autoFit').value = 'auto-fill';
                state.autoFit = 'auto-fill';
                document.getElementById('minWidth').value = '250px';
                state.minWidth = '250px';
                document.getElementById('maxWidth').value = '1fr';
                state.maxWidth = '1fr';
                document.getElementById('minmaxControls').style.display = 'block';

                // Set gap for spacing between cards
                document.getElementById('gap').value = '20';
                state.gap = 20;
                document.getElementById('gapOutput').textContent = '20px';

                updateGrid();
                break;

            case 'portfolio':
                state.rows = 4;
                state.columns = 3;
                state.rowSizes = ['auto', '300px', '300px', 'auto'];
                state.columnSizes = ['1fr', '1fr', '1fr'];
                document.getElementById('rows').value = 4;
                document.getElementById('columns').value = 3;

                // Set up the layout after the grid is created
                setTimeout(() => {
                    // Header
                    state.gridItems[0].columnSpan = 3;

                    // Featured project
                    state.gridItems[3].columnSpan = 2;
                    state.gridItems[3].rowSpan = 2;

                    // Footer
                    state.gridItems[9].columnSpan = 3;

                    updateGrid();
                }, 100);
                break;

            case 'blog':
                state.rows = 3;
                state.columns = 3;
                state.rowSizes = ['auto', '1fr', 'auto'];
                state.columnSizes = ['3fr', '6fr', '3fr'];
                document.getElementById('rows').value = 3;
                document.getElementById('columns').value = 3;

                // Set up named areas
                state.namedAreas = ['header', 'sidebar', 'main', 'aside', 'footer'];
                document.getElementById('useNamedAreas').checked = true;
                state.useNamedAreas = true;

                // Set up the layout after the grid is created
                setTimeout(() => {
                    // Setup with named areas
                    state.gridItems[0].gridArea = 'header';
                    state.gridItems[0].columnSpan = 3;

                    state.gridItems[3].gridArea = 'sidebar';
                    state.gridItems[4].gridArea = 'main';
                    state.gridItems[5].gridArea = 'aside';

                    state.gridItems[6].gridArea = 'footer';
                    state.gridItems[6].columnSpan = 3;

                    updateNamedAreas();
                    updateGridAreaSelect();
                    updateGrid();
                }, 100);
                break;

            case 'product':
                state.rows = 4;
                state.columns = 2;
                state.rowSizes = ['auto', '400px', 'auto', 'auto'];
                state.columnSizes = ['1fr', '1fr'];
                document.getElementById('rows').value = 4;
                document.getElementById('columns').value = 2;

                // Set up named areas
                state.namedAreas = ['header', 'product-image', 'product-info', 'description', 'reviews', 'related-products'];
                document.getElementById('useNamedAreas').checked = true;
                state.useNamedAreas = true;

                // Set up the layout after the grid is created
                setTimeout(() => {
                    // Setup with named areas
                    state.gridItems[0].gridArea = 'header';
                    state.gridItems[0].columnSpan = 2;

                    state.gridItems[2].gridArea = 'product-image';
                    state.gridItems[3].gridArea = 'product-info';

                    state.gridItems[4].gridArea = 'description';
                    state.gridItems[4].columnSpan = 2;

                    state.gridItems[6].gridArea = 'related-products';
                    state.gridItems[6].columnSpan = 2;

                    updateNamedAreas();
                    updateGridAreaSelect();
                    updateGrid();
                }, 100);
                break;

            case 'masonry':
                state.rows = 4;
                state.columns = 4;
                state.rowSizes = ['200px', '250px', '150px', '300px'];
                state.columnSizes = ['1fr', '1fr', '1fr', '1fr'];
                document.getElementById('rows').value = 4;
                document.getElementById('columns').value = 4;

                // Enable dense packing
                document.getElementById('gridAutoFlow').value = 'row dense';
                state.gridAutoFlow = 'row dense';

                // Set gap
                document.getElementById('gap').value = '10';
                state.gap = 10;
                document.getElementById('gapOutput').textContent = '10px';

                // Set up the layout with different item spans
                setTimeout(() => {
                    state.gridItems[0].rowSpan = 2;
                    state.gridItems[3].columnSpan = 2;
                    state.gridItems[5].rowSpan = 2;
                    state.gridItems[5].columnSpan = 2;
                    state.gridItems[9].columnSpan = 2;
                    state.gridItems[11].rowSpan = 2;

                    updateGrid();
                }, 100);
                break;
        }

        updateRowControls();
        updateColumnControls();
        updateNamedAreas();
        updateGrid();
    }

    // Copy CSS code to clipboard
    function copyCode() {
        const code = document.getElementById('codePreview').textContent;
        navigator.clipboard.writeText(code).then(() => {
            const copyBtn = document.getElementById('copyCode');
            const originalText = copyBtn.innerHTML;
            copyBtn.innerHTML = 'Copied!';
            setTimeout(() => {
                copyBtn.innerHTML = originalText;
            }, 2000);
        });
    }

    // Initialize the application when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
</script>
<script src="../logo.js"></script>
</body>
</html>
