<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîç</text></svg>">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center">
<div class="container mx-auto py-10 max-w-lg bg-gray-800 p-6 rounded-lg">
  <header>
    <h1 class="text-2xl mb-6 text-center">RegExpress</h1>
    <p class="text-center text-gray-400 mb-6 text-lg">AI-Powered Regex Generation from Natural Language Descriptions</p>
  </header>
  <div class="mb-4">
    <label for="naturalLanguageInput" class="block mb-2 text-sm font-bold">Natural Language Description</label>
    <input type="text" id="naturalLanguageInput" placeholder="Enter natural language description..." class="w-full p-4 rounded bg-gray-700 text-white border border-gray-600 text-lg" aria-label="Natural Language Description"/>
  </div>
  <button id="generateButton" onclick="generateRegex()" class="py-2 px-4 bg-blue-500 hover:bg-blue-700 rounded disabled:opacity-50 text-lg w-full mb-4">Generate RegEx</button>
  <p id="regexOutput" class="mt-4 cursor-pointer p-4 bg-gray-700 rounded text-lg" onclick="navigator.clipboard.writeText(this.innerText)" aria-live="polite"></p>
  <p class="mt-6 text-lg">Example Queries:</p>
  <div class="grid grid-cols-2 gap-2 mt-2">
    <button onclick="setExample('Find a series of 13-19 digits representing a valid credit card number')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Credit Card Numbers</button>
    <button onclick="setExample('Extract all hashtags from a tweet, which start with # followed by letters, numbers, or underscores')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Hashtags</button>
    <button onclick="setExample('Match phone numbers in various formats including (123) 456-7890, 123-456-7890, and 123.456.7890')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Phone Numbers</button>
    <button onclick="setExample('Identify strings that contain only alphabets without any numbers or special characters')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Alphabetical Strings</button>
    <button onclick="setExample('Capture all URLs from the text, including http, https, www prefixed URLs')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">URLs</button>
    <button onclick="setExample('Validate a strong password that contains at least 8 characters, including at least one uppercase letter, one lowercase letter, and one number')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Strong Passwords</button>
    <button onclick="setExample('Find all sentences that end with a question mark')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Questions</button>
    <button onclick="setExample('Extract phrases enclosed in quotes from a paragraph')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Quoted Phrases</button>
    <button onclick="setExample('Match dates formatted specifically as MM-DD-YYYY')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Dates (MM-DD-YYYY)</button>
    <button onclick="setExample('Identify all valid email addresses in the text')" class="py-2 px-4 bg-green-700 hover:bg-green-900 rounded text-sm">Email Addresses</button>
  </div>
  <div class="mt-6 text-lg">FAQs:</div>
  <div class="text-sm">
    <details class="mb-2">
      <summary class="cursor-pointer">Why does the generated regex include ^ and $ symbols?</summary>
      The ^ and $ are start and end of line/string anchors respectively. Including these in your regex pattern will mean that the pattern will match only if it aligns exactly with the start and end of your input string. If your goal is to find a match anywhere in the input string, you can remove these symbols from the generated regex pattern.
    </details>
    <details class="mb-2">
      <summary class="cursor-pointer">How can I test the generated regex patterns?</summary>
      You can use regex testing platforms such as <a href="https://regex101.com/" target="_blank" class="text-blue-400 hover:text-blue-600">regex101.com</a> to verify and test the regex patterns generated by this tool.
    </details>
    <details class="mb-2">
      <summary class="cursor-pointer">What are regex groups and how do I use them?</summary>
      Regex groups are parts of a regex pattern enclosed in parentheses. They allow you to apply regex operators to the entire grouped section. Additionally, groups capture the text matched, allowing you to extract and use submatches in your pattern.
    </details>
    <details class="mb-2">
      <summary class="cursor-pointer">How do I match special characters literally?</summary>
      To match special characters literally, you have to escape them using a backslash (\) before the character. For example, to match a period (.) literally, you would write it as \. in your regex pattern, since the period is a special character that matches any single character.
    </details>
    <details class="mb-2">
      <summary class="cursor-pointer">Can I specify a range of characters to match?</summary>
      Yes, you can specify a range of characters to match using square brackets []. For instance, [a-z] will match any lowercase letter, and [0-9] will match any digit. You can combine ranges and individual characters; for example, [a-zA-Z0-9] will match any alphanumeric character.
    </details>
    <details class="mb-2">
      <summary class="cursor-pointer">What does the question mark (?) mean in regex?</summary>
      The question mark is a quantifier that makes the preceding element optional. It matches zero or one occurrence of the preceding element. For example, "colou?r" would match both "color" and "colour".
    </details>
  </div>
</div>

<script>
  const API_ENDPOINT = 'https://chatgpt.tobiasmue91.workers.dev/';

  async function generateRegex() {
    const inputText = document.getElementById('naturalLanguageInput').value;
    const generateButton = document.getElementById('generateButton');
    generateButton.textContent = "Generating RegEx...";
    generateButton.disabled = true;

    const systemMessage = `You are the RegExpress AI. Your function is to convert specifications provided in any language into Regular Expression (regex, RegExp) patterns. Provide only the regex pattern derived from the provided specifications.`;

    try {
      const response = await fetch(API_ENDPOINT, {
        method: 'POST',
        headers: { "Content-Type": "application/json", "Accept": "*/*" },
        body: JSON.stringify({
          model: "gpt-4",
          max_tokens: 150,
          temperature: 0.1,
          top_p: 0.3,
          messages: [
            { role: "system", content: systemMessage },
            { role: "user", content: inputText }
          ],
        }),
      });
      if (response.ok) {
        const data = await response.json();
        document.getElementById('regexOutput').innerText = data.choices[0].message.content;
      } else {
        alert('Error.');
      }
    } catch (e) {
      console.error(e);
    } finally {
      generateButton.textContent = "Generate RegEx";
      generateButton.disabled = false;
    }
  }

  function setExample(exampleText) {
    document.getElementById('naturalLanguageInput').value = exampleText;
  }
</script>
<script src="../sidebar.js"></script>
</body>
</html>